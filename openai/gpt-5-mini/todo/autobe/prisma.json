{"files":[{"filename":"schema-01-todos.prisma","namespace":"Todos","models":[{"name":"todo_app_todos","description":"Primary Todo items for the minimal Todo app. Stores raw task data for quick capture and lifecycle management (active, completed, deleted). Each todo is owned by a user (owner) to ensure data isolation. Temporal fields support audit and soft-delete semantics. Related snapshots are captured in {@\\link todo_app_todo_snapshots.id}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Owner user. {@\\link todo_app_user.id}.","relation":{"name":"user","targetModel":"todo_app_user"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","nullable":false,"description":"Short task title. Required business field used for display and quick capture."},{"name":"description","type":"string","nullable":true,"description":"Optional longer description or notes for the todo item."},{"name":"is_completed","type":"boolean","nullable":false,"description":"Whether the todo is completed. Used for filtering and UI state."},{"name":"completed_at","type":"datetime","nullable":true,"description":"Timestamp when the todo was marked completed. Null if not completed."},{"name":"position","type":"int","nullable":true,"description":"Optional manual ordering position used by client for custom sort orders."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Record last modification timestamp."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Soft-delete timestamp. Null when item is active or completed."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["user_id","created_at"]},{"fieldNames":["is_completed"]}],"ginIndexes":[]},{"name":"todo_app_todo_snapshots","description":"Snapshot history for todos. Captures point-in-time copies of a todo item for audit and historical queries. Each snapshot references the source {@\\link todo_app_todos.id} and records snapshot_at when the snapshot was taken.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"todo_app_todo_id","type":"uuid","description":"Referenced todo item. {@\\link todo_app_todos.id}.","relation":{"name":"todo","targetModel":"todo_app_todos"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","nullable":false,"description":"Snapshot of todo.title at snapshot time."},{"name":"description","type":"string","nullable":true,"description":"Snapshot of todo.description at snapshot time."},{"name":"is_completed","type":"boolean","nullable":false,"description":"Snapshot of completion flag at snapshot time."},{"name":"completed_at","type":"datetime","nullable":true,"description":"Snapshot of completed_at (if set on source)."},{"name":"position","type":"int","nullable":true,"description":"Snapshot of position for ordering."},{"name":"created_at","type":"datetime","nullable":false,"description":"Original created_at from source todo at snapshot time."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Original updated_at from source todo at snapshot time."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Original deleted_at from source todo at snapshot time."},{"name":"snapshot_at","type":"datetime","nullable":false,"description":"Timestamp when this snapshot was created."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["todo_app_todo_id","snapshot_at"]}],"ginIndexes":[]},{"name":"todo_app_audit_records","description":"Append-only audit records for administrative and system actions. Records actor (admin or system), action type, target resource, optional reason, and timestamp for forensic and compliance purposes. Actor references are nullable to preserve system-initiated events. Foreign-key delete behavior must not cascade to preserve audit history.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"admin_id","type":"uuid","description":"Acting admin's {@\\link todo_app_admin.id}. Nullable for system actions.","relation":{"name":"admin","targetModel":"todo_app_admin"},"unique":false,"nullable":true},{"name":"user_id","type":"uuid","description":"Referenced user affected by the action. {@\\link todo_app_user.id}. Nullable when not applicable.","relation":{"name":"user","targetModel":"todo_app_user"},"unique":false,"nullable":true}],"plainFields":[{"name":"actor_role","type":"string","nullable":false,"description":"Role of the actor performing the action (e.g., 'admin','system')."},{"name":"action_type","type":"string","nullable":false,"description":"Type of action performed (e.g., 'suspend_user','restore_todo','purge')."},{"name":"target_resource","type":"string","nullable":false,"description":"Logical resource type affected by the action (e.g., 'todo','user')."},{"name":"target_id","type":"uuid","nullable":true,"description":"Optional identifier of the target resource (e.g., todo id) for quick lookup."},{"name":"reason","type":"string","nullable":true,"description":"Optional reason provided by the actor for the action."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the audit record was created."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["target_resource","target_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"todo_app_guest","description":"Lightweight record for unauthenticated or ephemeral visitors. Kept minimal per component guidance; useful for analytics or short-term session tracking. Managed as a subsidiary support table.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":true,"description":"Optional visitor-provided email address (nullable)."},{"name":"created_at","type":"datetime","nullable":false,"description":"Record creation timestamp for the guest entry."},{"name":"last_active_at","type":"datetime","nullable":true,"description":"Last observed activity for the guest (nullable)."},{"name":"status","type":"string","nullable":true,"description":"Optional status for administrative housekeeping (e.g., 'active','bounced')."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"todo_app_user","description":"User accounts for the application. Users are independently managed business entities (registration, authentication, profile). This model is intentionally included but todos do not require a mandatory user relation in this MVP shape.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"Primary email for the user account. Used for login and communication."},{"name":"display_name","type":"string","nullable":true,"description":"Optional display name for the user."},{"name":"password_hash","type":"string","nullable":true,"description":"Password hash for authentication (nullable if external auth used)."},{"name":"account_status","type":"string","nullable":false,"description":"Account lifecycle status (e.g., 'active','suspended')."},{"name":"created_at","type":"datetime","nullable":false,"description":"Account creation timestamp."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Last update timestamp for the account."},{"name":"last_active_at","type":"datetime","nullable":true,"description":"Last activity timestamp (nullable)."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"todo_app_admin","description":"Administrative accounts with elevated privileges used for support and maintenance. Admin actions are audited in {@\\link todo_app_audit_records.id}. This model is primary since admins require independent management and auditability.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","nullable":false,"description":"Admin account email used for login and notifications."},{"name":"password_hash","type":"string","nullable":true,"description":"Password hash for admin authentication (nullable if external SSO used)."},{"name":"is_super","type":"boolean","nullable":false,"description":"Flag indicating super-admin privileges."},{"name":"created_at","type":"datetime","nullable":false,"description":"Admin account creation timestamp."},{"name":"last_active_at","type":"datetime","nullable":true,"description":"Last activity timestamp for the admin (nullable)."}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]}]}]}
import { tags } from "typia";

/**
 * Represents a single link attached to a post. Contains URL, preview metadata,
 * link order, and ID references to the parent post and file asset as required.
 * This DTO is aligned to the community_platform_post_links Prisma DB schema and
 * used for link representation in post detail responses.
 *
 * Returned from endpoints like GET
 * /communityPlatform/posts/{postId}/links/{linkId} and in link collections for
 * content presentation and moderation. All fields correspond directly to the
 * underlying database schema.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type ICommunityPlatformPostLink = {
  /**
   * Unique identifier for this link attachment record. Maps to JP primary key
   * 'id' field for community_platform_post_links.
   *
   * Required by all detail and update operations.
   */
  id: string & tags.Format<"uuid">;

  /**
   * The UUID of the parent post to which this link is attached. Must
   * reference an existing post entity.
   */
  community_platform_post_id: string & tags.Format<"uuid">;

  /**
   * Absolute or protocol-relative URL for the linked resource. This field
   * must contain a valid, well-formed URL as per standard URL syntax.
   * Example: 'https://example.com/path'.
   */
  url: string;

  /**
   * Title/label rendered in link preview cards for this URL. May be populated
   * by link scraping or manual assignment. Optional.
   */
  preview_title?: string | undefined;

  /**
   * Optional short description or preview text for the attached link. Used in
   * rendering content summary cards.
   */
  preview_description?: string | undefined;

  /**
   * URL (usually absolute or proxied) for the preview image or favicon
   * associated with this link. Must be a well-formed URI or null.
   */
  preview_image_uri?: string | undefined;

  /**
   * The order/navigation index for this link among multiple attached links in
   * the same post (1-based integer; may be used to display as a sequence in
   * post body).
   */
  ordering?: (number & tags.Type<"int32">) | undefined;
};
export namespace ICommunityPlatformPostLink {
  /**
   * Filter/search/pagination DTO for querying post links. Each property is
   * optional but filtering by 'postId' is typical for listing links on a
   * specific post.
   *
   * Allows advanced search by URL, title, or preview metadata, plus flexible
   * sorting. Used for PATCH /communityPlatform/posts/{postId}/links and
   * similar endpoints.
   */
  export type IRequest = {
    /**
     * Unique identifier of the parent post this link query is associated
     * with. Used for link context but may be omitted for global queries by
     * admin UI.
     *
     * Must conform to UUID v4 standard. Required when filtering for links
     * attached to a specific post.
     */
    postId?: (string & tags.Format<"uuid">) | undefined;

    /**
     * Partial or complete URL to search/filter for links attached to posts.
     * Uses substring match for broad searches, or exact match for direct
     * lookup.
     *
     * If used, will perform case-insensitive sub-string search on URLs.
     */
    url?: string | undefined;

    /**
     * Preview or title text to search for in associated post links. Allows
     * partial text matches for broad search functionality.
     */
    preview_title?: string | undefined;

    /**
     * Allows searching post links for a given substring within their
     * preview description, facilitating targeted moderation or curation.
     */
    preview_description?: string | undefined;

    /**
     * Indicates the field by which results should be sorted. Must be one
     * of: 'created_at', 'ordering', 'preview_title'.
     */
    sort_by?: "created_at" | "ordering" | "preview_title" | undefined;

    /**
     * Sort direction for compatible sort_by fields. Accepts 'asc'|'desc'.
     * If omitted, platform default is used (typically descending).
     */
    sort_order?: "asc" | "desc" | undefined;

    /**
     * Page number (1-based). Used for paginated results when listing a
     * large number of links. If omitted, defaults to 1.
     */
    page?: (number & tags.Type<"int32"> & tags.Minimum<1>) | undefined;

    /**
     * Maximum number of results to return per page (max 100). Default is
     * platform configuration, commonly 20.
     */
    limit?:
      | (number & tags.Type<"int32"> & tags.Minimum<1> & tags.Maximum<100>)
      | undefined;
  };

  /**
   * Schema for creating a new link association with a post. This schema is
   * used when an authenticated user attaches an external URL (as a link-type
   * post or as an additional link to a post) to enrich platform content.
   * Extracted previews are optional. All properties must comply with
   * field-level comments from the underlying Prisma schema for post links.
   */
  export type ICreate = {
    /**
     * Validated external link URL (must be well-formed, non-empty, and
     * subject to platform policy). This field is required for creating a
     * new link on a post and must be a valid, policy-compliant URI.
     */
    url: string & tags.Format<"uri">;

    /**
     * Optional preview title extracted from the target URL. If available,
     * this can be set by automated link parsing or by the user. Nullable if
     * preview not available.
     */
    preview_title?: string | undefined;

    /**
     * Optional preview description extracted from the target URL. This
     * field is nullable and is not required if a description is not
     * resolved from the link.
     */
    preview_description?: string | undefined;

    /**
     * Optional preview image or favicon URI extracted from the target URL.
     * This may be shown in previews if available and must be a valid URI if
     * provided. Nullable if not resolved.
     */
    preview_image_uri?: (string & tags.Format<"uri">) | undefined;
  };

  /**
   * Schema for updating an existing link associated with a post. Permits
   * updates to the displayed link URL or its preview data. Fields not
   * included in the body remain unchanged. Follows the field definitions and
   * types from the Prisma community_platform_post_links table. No required
   * fields; any present field will be updated.
   */
  export type IUpdate = {
    /**
     * If updating the link's target, this must be set to a new valid,
     * policy-compliant URL. Otherwise, omit or set to null to keep
     * unchanged.
     */
    url?: (string & tags.Format<"uri">) | undefined;

    /**
     * Optional updated preview title for the link (if available or
     * re-parsed). Nullable if not updating.
     */
    preview_title?: string | undefined;

    /**
     * Optional updated or corrected preview description for the link.
     * Nullable if not updating.
     */
    preview_description?: string | undefined;

    /**
     * Optional preview image/favico URI from the target URL. Nullable if
     * not updating or not applicable.
     */
    preview_image_uri?: (string & tags.Format<"uri">) | undefined;
  };
}

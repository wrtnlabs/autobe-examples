{"files":[{"filename":"schema-01-actors.prisma","namespace":"Actors","models":[{"name":"econ_discuss_users","description":"Platform accounts and identity records for econDiscuss. Holds login credentials, display identity, and preferences such as timezone and locale. Adds secure 2FA storage (secret and recovery codes) to meet policy. Primary reference for most other entities including {@link econ_discuss_user_profiles}, {@link econ_discuss_user_follows}, {@link econ_discuss_notifications}, {@link econ_discuss_user_reputations}, and {@link econ_discuss_reputation_events}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"User's unique email address for authentication and notifications. Store a normalized lowercased form at application layer for uniqueness semantics.","nullable":false},{"name":"password_hash","type":"string","description":"Hashed password for email+password sign-in. Never store plaintext.","nullable":false},{"name":"display_name","type":"string","description":"Publicly visible display name or handle.","nullable":false},{"name":"avatar_uri","type":"uri","description":"Optional avatar image URI for the profile. Keep within reasonable length (e.g., â‰¤ 2048 chars) and validate format in application.","nullable":true},{"name":"timezone","type":"string","description":"IANA timezone identifier used for notifications, digests, and scheduling (e.g., Asia/Seoul).","nullable":true},{"name":"locale","type":"string","description":"Preferred locale (e.g., en-US) for UI and communication.","nullable":true},{"name":"email_verified","type":"boolean","description":"Whether the email address has been verified.","nullable":false},{"name":"mfa_enabled","type":"boolean","description":"Whether multi-factor authentication is enabled for this account.","nullable":false},{"name":"mfa_secret","type":"string","description":"Encrypted/managed secret for TOTP (or equivalent 2FA). Store encrypted and restrict access. Null when 2FA is not configured.","nullable":true},{"name":"mfa_recovery_codes","type":"string","description":"Hashed or encrypted 2FA recovery codes (concatenated or structured storage). Rotated on regeneration. Null when 2FA not configured.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp; null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"display_name"}]},{"name":"econ_discuss_user_profiles","description":"Extended profile details for a user. Managed through the owning {@link econ_discuss_users} entity. Supports bio, affiliation, and web presence. Enables richer discovery while keeping base identity minimal.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Owning user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"bio","type":"string","description":"Short biography or professional summary.","nullable":true},{"name":"affiliation","type":"string","description":"Current affiliation or organization string.","nullable":true},{"name":"website","type":"uri","description":"Personal or professional website URI.","nullable":true},{"name":"location","type":"string","description":"Freeform location string for public display.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp; null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[{"fieldName":"bio"}]},{"name":"econ_discuss_visitors","description":"Role assignment table indicating a user has the \"visitor\" role scope (read-only baseline). Although visitors generally represent unauthenticated contexts, this table captures explicit role assignment for edge or operational cases. Managed through {@link econ_discuss_users}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Assigned user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"notes","type":"string","description":"Optional notes about why this role assignment exists (e.g., operational testing, restricted mode).","nullable":true},{"name":"created_at","type":"datetime","description":"Assignment creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Assignment last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to end this role assignment.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"econ_discuss_members","description":"Role assignment table for standard platform members with participation privileges. Existence of a record implies member capabilities for the linked {@link econ_discuss_users} account.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Assigned user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"joined_at","type":"datetime","description":"Timestamp when member role became effective.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to end this role assignment.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"econ_discuss_verified_experts","description":"Role assignment for verified experts. Captures verification moment and optional validity window for expert badges. Referenced by discovery and gating policies via joins from {@link econ_discuss_users}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Assigned user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"verified_at","type":"datetime","description":"Timestamp when expert verification was approved.","nullable":false},{"name":"badge_valid_until","type":"datetime","description":"Optional expiration timestamp for the current expert badge.","nullable":true},{"name":"primary_domain","type":"string","description":"Primary economics domain (e.g., Macroeconomics, Labor) for display and policy hints.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for revocation or expiry handling.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["verified_at"]}],"ginIndexes":[]},{"name":"econ_discuss_moderators","description":"Role assignment for moderators with governance permissions. Requires 2FA per policy. Managed through {@link econ_discuss_users}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Assigned user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"enforced_2fa","type":"boolean","description":"Whether 2FA enforcement is active for this moderator assignment per policy.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to end this role assignment.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"econ_discuss_admins","description":"Role assignment for platform administrators with full administrative privileges. Requires 2FA and dual-control for severe actions. Mirrors moderators with explicit 2FA enforcement flag. Managed through {@link econ_discuss_users}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Assigned user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"superuser","type":"boolean","description":"Whether this admin has superuser capabilities enabled by policy.","nullable":false},{"name":"enforced_2fa","type":"boolean","description":"Whether 2FA enforcement is active for this admin assignment per policy.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to end this role assignment.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"econ_discuss_user_follows","description":"User-to-user follow relationships forming the social graph. Supports listing followers/following and feed personalization. Both follower and followee reference {@link econ_discuss_users}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"follower_user_id","type":"uuid","description":"Follower user's {@link econ_discuss_users.id}.","relation":{"name":"follower","targetModel":"econ_discuss_users","targetField":"id","mappingName":"econ_discuss_user_follows_of_follower_user_id"},"unique":false,"nullable":false},{"name":"followee_user_id","type":"uuid","description":"Followed (target) user's {@link econ_discuss_users.id}.","relation":{"name":"followee","targetModel":"econ_discuss_users","targetField":"id","mappingName":"econ_discuss_user_follows_of_followee_user_id"},"unique":false,"nullable":false}],"plainFields":[{"name":"created_at","type":"datetime","description":"Follow creation timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp; null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["follower_user_id","followee_user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["follower_user_id","created_at"]},{"fieldNames":["followee_user_id","created_at"]}],"ginIndexes":[]},{"name":"econ_discuss_notifications","description":"Persisted notifications delivered to recipients. Each record targets a recipient {@link econ_discuss_users} and may reference an actor {@link econ_discuss_users}. Business consumers list, filter, and mark-as-read/unread per user.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"recipient_user_id","type":"uuid","description":"Recipient user's {@link econ_discuss_users.id}.","relation":{"name":"recipient","targetModel":"econ_discuss_users","targetField":"id","mappingName":"econ_discuss_notifications_of_recipient_user_id"},"unique":false,"nullable":false},{"name":"actor_user_id","type":"uuid","description":"Optional actor user's {@link econ_discuss_users.id} that triggered the notification.","relation":{"name":"actor","targetModel":"econ_discuss_users","targetField":"id","mappingName":"econ_discuss_notifications_of_actor_user_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"type","type":"string","description":"Notification type key (business category identifier).","nullable":false},{"name":"title","type":"string","description":"Short title or summary text for the notification.","nullable":false},{"name":"body","type":"string","description":"Optional detailed body text; localized per user locale.","nullable":true},{"name":"entity_type","type":"string","description":"Optional target entity type (e.g., post, comment, poll).","nullable":true},{"name":"entity_id","type":"uuid","description":"Optional target entity identifier for deep-linking (no FK to allow polymorphism).","nullable":true},{"name":"read_at","type":"datetime","description":"Timestamp when the recipient read this notification; null if unread.","nullable":true},{"name":"created_at","type":"datetime","description":"Notification creation timestamp (send time).","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for recipient-side removal.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["recipient_user_id","created_at"]},{"fieldNames":["recipient_user_id","read_at"]}],"ginIndexes":[]},{"name":"econ_discuss_user_reputations","description":"Current reputation aggregate per user, derived from {@link econ_discuss_reputation_events}. Stores the latest computed score and timestamp for quick gating checks while preserving full historical detail in the ledger.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Related user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":true,"nullable":false}],"plainFields":[{"name":"score","type":"int","description":"Current reputation score for the user (non-negative integer).","nullable":false},{"name":"last_updated_at","type":"datetime","description":"Timestamp when the score was last recalculated.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for this aggregate, if deprecated.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[],"ginIndexes":[]},{"name":"econ_discuss_reputation_events","description":"Immutable ledger of reputation-impacting events for users. Each entry captures points, reason, and optional linkage to a content item (e.g., a {@link econ_discuss_posts}). Serves as the audit trail and supports recomputation of {@link econ_discuss_user_reputations}.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Beneficiary user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id","mappingName":"econ_discuss_reputation_events_of_user_id"},"unique":false,"nullable":false},{"name":"actor_user_id","type":"uuid","description":"Optional actor user's {@link econ_discuss_users.id} who caused the event (e.g., curator, voter).","relation":{"name":"actor","targetModel":"econ_discuss_users","targetField":"id","mappingName":"econ_discuss_reputation_events_of_actor_user_id"},"unique":false,"nullable":true},{"name":"post_id","type":"uuid","description":"Optional related post's {@link econ_discuss_posts.id} for content-scoped events.","relation":{"name":"post","targetModel":"econ_discuss_posts","targetField":"id"},"unique":false,"nullable":true}],"plainFields":[{"name":"points","type":"int","description":"Signed integer delta applied to the userâ€™s reputation for this event (caps and decay applied externally).","nullable":false},{"name":"reason","type":"string","description":"Human-readable reason or category for the points change (e.g., upvote_post, curated_feature, moderation_penalty).","nullable":false},{"name":"source","type":"string","description":"Optional source system or process identifier for traceability.","nullable":true},{"name":"occurred_at","type":"datetime","description":"When the underlying action occurred; used for time-window calculations and decay.","nullable":false},{"name":"created_at","type":"datetime","description":"Ledger entry creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp (rare in append-only ledgers).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for exceptional corrections; null in normal operation.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["user_id","occurred_at"]},{"fieldNames":["post_id","occurred_at"]}],"ginIndexes":[]},{"name":"econ_discuss_expert_domain_badges","description":"Per-domain expert badges assigned to verified experts. Normalizes expertise domains as a junction between {@link econ_discuss_users} and curated topics in {@link econ_discuss_topics}. Captures lifecycle with verified_at, optional valid_until, and optional revocation metadata. Supports expert-only filters and discovery surfaces while preserving auditability.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"Owner expert user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":false,"nullable":false},{"name":"econ_discuss_topic_id","type":"uuid","description":"Linked topic/domain badge {@link econ_discuss_topics.id}.","relation":{"name":"topic","targetModel":"econ_discuss_topics","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"verified_at","type":"datetime","description":"Timestamp when the domain badge was approved for the user.","nullable":false},{"name":"valid_until","type":"datetime","description":"Optional expiration timestamp for the domain badge; null if perpetual until policy change or revocation.","nullable":true},{"name":"revoked_at","type":"datetime","description":"Optional timestamp when the domain badge was revoked for policy reasons.","nullable":true},{"name":"revoked_reason","type":"string","description":"Optional human-readable rationale for revocation (secured to governance staff).","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Record last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to retire this badge record.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id","econ_discuss_topic_id"],"unique":true}],"plainIndexes":[{"fieldNames":["user_id","verified_at"]},{"fieldNames":["econ_discuss_topic_id"]}],"ginIndexes":[]}]},{"filename":"schema-02-topics.prisma","namespace":"Topics","models":[{"name":"econ_discuss_topics","description":"Curated taxonomy of economics subjects used for organizing content and personalization. Managed primarily by admins/moderators with clear naming and optional description. Serves as the authoritative list of topics referenced by {@link econ_discuss_post_topics} and user subscriptions in {@link econ_discuss_user_topic_subscriptions}. Includes temporal fields for audit and soft deletion. Supports search through text indexes on name and description.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Immutable business identifier (slug-like) for the topic. Used in URLs and external references; unique across all topics.","nullable":false},{"name":"name","type":"string","description":"Human-readable topic name shown to users. Used for search and display.","nullable":false},{"name":"description","type":"string","description":"Optional longer description of the topicâ€™s scope and purpose for curation context and tooltips.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp of the topic record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp of the topic record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp. When set, the topic is considered archived/removed from user-facing lists while preserved for audit.","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"econ_discuss_user_topic_subscriptions","description":"User-to-topic subscription relationship representing personalization preferences. Each record indicates that a user follows a topic to prioritize related content and digests. References {@link econ_discuss_users} and {@link econ_discuss_topics}. Designed for efficient queries by user and by topic, auditability via temporal fields, and uniqueness per (user, topic).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_user_id","type":"uuid","description":"Subscribed accountâ€™s {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":false,"nullable":false},{"name":"econ_discuss_topic_id","type":"uuid","description":"Subscribed topicâ€™s {@link econ_discuss_topics.id}.","relation":{"name":"topic","targetModel":"econ_discuss_topics","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"created_at","type":"datetime","description":"Creation timestamp when the subscription was established.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp of this subscription record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp. When set, the subscription is considered inactive but retained for audit and possible restoration.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_user_id","econ_discuss_topic_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_user_id","created_at"]},{"fieldNames":["econ_discuss_topic_id","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-03-articles.prisma","namespace":"Articles","models":[{"name":"econ_discuss_posts","description":"Authored, published content items forming the core discussion surface. Each post is created by a user and is discoverable via search, topic associations, and timelines. Related entities like votes, bookmarks, polls, and live threads exist in other components and reference this table. Supports scheduled publishing via scheduled_publish_at and maintains publication timestamps for feeds. Version history is captured in {@link econ_discuss_post_snapshots}.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_user_id","type":"uuid","description":"Author user's {@link econ_discuss_users.id}. Identifies who created the post.","relation":{"name":"author","targetModel":"econ_discuss_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Human-readable post title for listing and SEO. Required at publish time.","nullable":false},{"name":"body","type":"string","description":"Main content body in sanitized, possibly markdown-like format. Used for full-text search.","nullable":false},{"name":"summary","type":"string","description":"Optional short abstract or excerpt for previews and feeds.","nullable":true},{"name":"published_at","type":"datetime","description":"Publication timestamp. Supports chronological feeds and scheduling validations. May equal created_at on immediate publish.","nullable":true},{"name":"scheduled_publish_at","type":"datetime","description":"Optional scheduled time for future publication (stored in UTC, displayed in user timezone). Used to validate scheduling windows and drive publisher jobs.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp for the post record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for the post record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp when the post is removed from public visibility.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["econ_discuss_user_id","created_at"]},{"fieldNames":["created_at"]},{"fieldNames":["published_at"]},{"fieldNames":["econ_discuss_user_id","published_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"body"},{"fieldName":"summary"}]},{"name":"econ_discuss_post_drafts","description":"Private, autosaved drafts authored by users for long-form writing before publication. Drafts are not publicly visible and support cross-device synchronization and conflict resolution in application logic. Optionally linked to a resulting published post for traceability. {@link econ_discuss_users} authors; optional link to {@link econ_discuss_posts}.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_user_id","type":"uuid","description":"Author user's {@link econ_discuss_users.id}. Owner of this draft.","relation":{"name":"author","targetModel":"econ_discuss_users","targetFieldName":"id"},"unique":false,"nullable":false},{"name":"econ_discuss_post_id","type":"uuid","description":"Optional linkage to the published post's {@link econ_discuss_posts.id} created from this draft (if any). Multiple drafts may relate to one post.","relation":{"name":"publishedPost","targetModel":"econ_discuss_posts","targetFieldName":"id"},"unique":false,"nullable":true}],"plainFields":[{"name":"title","type":"string","description":"Working draft title. Optional to allow early autosave before title is chosen.","nullable":true},{"name":"body","type":"string","description":"Working draft body content. Optional to support early autosaves.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp for the draft.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for the draft (used by autosave sync and ordering).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp when the draft is discarded.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["econ_discuss_user_id","updated_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"body"}]},{"name":"econ_discuss_post_topics","description":"Junction association between posts and curated topics to support filtering, discovery, and subscriptions. Enforces uniqueness per (post, topic). {@link econ_discuss_posts} to {@link econ_discuss_topics}. Includes additional recency index for topic pages.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_post_id","type":"uuid","description":"Associated post's {@link econ_discuss_posts.id}.","relation":{"name":"post","targetModel":"econ_discuss_posts"},"unique":false,"nullable":false},{"name":"econ_discuss_topic_id","type":"uuid","description":"Associated topic's {@link econ_discuss_topics.id}.","relation":{"name":"topic","targetModel":"econ_discuss_topics"},"unique":false,"nullable":false}],"plainFields":[{"name":"created_at","type":"datetime","description":"Creation timestamp for the association.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for the association.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp when the association is logically removed.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_post_id","econ_discuss_topic_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_topic_id","econ_discuss_post_id"]},{"fieldNames":["econ_discuss_topic_id","created_at"]}],"ginIndexes":[]},{"name":"econ_discuss_post_snapshots","description":"Historical snapshots of {@link econ_discuss_posts} capturing the exact state of a post at a point in time for auditability and public version history. Each snapshot stores the full text fields and publication state. Versions are unique per post and are typically append-only.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_post_id","type":"uuid","description":"Source postâ€™s {@link econ_discuss_posts.id}.","relation":{"name":"post","targetModel":"econ_discuss_posts"},"unique":false,"nullable":false},{"name":"econ_discuss_user_id","type":"uuid","description":"Editor/authorâ€™s {@link econ_discuss_users.id} responsible for this snapshot.","relation":{"name":"editor","targetModel":"econ_discuss_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"version","type":"int","description":"Monotonic version number per post. Combined with post_id to enforce uniqueness.","nullable":false},{"name":"title","type":"string","description":"Snapshot of the post title at this version.","nullable":false},{"name":"body","type":"string","description":"Snapshot of the post body at this version.","nullable":false},{"name":"summary","type":"string","description":"Snapshot of the post summary at this version.","nullable":true},{"name":"published_at","type":"datetime","description":"Postâ€™s published_at value at the time of snapshot (null if unpublished).","nullable":true},{"name":"created_at","type":"datetime","description":"Snapshot creation timestamp (when this version was recorded).","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for this snapshot record (rarely used; retained for consistency).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for exceptional corrections; normally null in append-only operation.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_post_id","version"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_post_id","created_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"body"}]}]},{"filename":"schema-04-interactions.prisma","namespace":"Interactions","models":[{"name":"econ_discuss_post_votes","description":"Post voting interactions supporting both upvotes and downvotes with full lifecycle states. Each record represents a single memberâ€™s vote on a specific post and maintains idempotency via a unique (user, post) constraint. Includes status tracking to support switching/withdrawal windows and integrity outcomes (discounted/invalidated). References {@link econ_discuss_users} as voter and {@link econ_discuss_posts} as target post. Optimized for time-window analytics and user-private history.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_user_id","type":"uuid","description":"Voting memberâ€™s {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":false,"nullable":false},{"name":"econ_discuss_post_id","type":"uuid","description":"Target postâ€™s {@link econ_discuss_posts.id}.","relation":{"name":"post","targetModel":"econ_discuss_posts","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"vote_type","type":"string","description":"Type of vote: allowed values are \"up\" or \"down\". Used for content aggregates, reputation weighting, and trending windows.","nullable":false},{"name":"status","type":"string","description":"Lifecycle state of the vote: allowed values are \"active\", \"withdrawn\", \"switched\", \"discounted\", or \"invalidated\". Application logic enforces transitions and time windows.","nullable":false},{"name":"status_reason","type":"string","description":"Optional reason/category when status is discounted/invalidated (e.g., integrity_violation, moderation_invalidation).","nullable":true},{"name":"created_at","type":"datetime","description":"Vote creation timestamp for history and time-window analytics.","nullable":false},{"name":"updated_at","type":"datetime","description":"Vote last update timestamp (e.g., on switch/withdrawal or moderation outcome).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for exceptional removals. Prefer status transitions over deletion for auditability.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_user_id","econ_discuss_post_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_post_id","created_at"]},{"fieldNames":["econ_discuss_user_id","created_at"]},{"fieldNames":["econ_discuss_post_id","vote_type","created_at"]},{"fieldNames":["econ_discuss_user_id","status","created_at"]}],"ginIndexes":[]},{"name":"econ_discuss_post_bookmarks","description":"User saved-item relationships for posts with owner-only personal notes. Each record indicates that a member saved a given post to their personal bookmarks. Enforces idempotent saves via unique (user, post). References {@link econ_discuss_users} as owner and {@link econ_discuss_posts} as saved post. Notes remain private to the owner (application-enforced).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_user_id","type":"uuid","description":"Bookmark ownerâ€™s {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users","targetField":"id"},"unique":false,"nullable":false},{"name":"econ_discuss_post_id","type":"uuid","description":"Saved postâ€™s {@link econ_discuss_posts.id}.","relation":{"name":"post","targetModel":"econ_discuss_posts","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"note","type":"string","description":"Owner-only personal note attached to the saved item. Excluded from any shared collection views and external exports to others.","nullable":true},{"name":"created_at","type":"datetime","description":"Bookmark creation timestamp used for listing, sorting, and export.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the bookmark record was last updated (including note edits).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp to support reversible unbookmark operations, audit trails, and delayed purging.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_user_id","econ_discuss_post_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_user_id","created_at"]},{"fieldNames":["econ_discuss_post_id","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-05-polls.prisma","namespace":"Polls","models":[{"name":"econ_discuss_polls","description":"Poll entity attached to a post with explicit support for multiple question types (single choice, multiple choice, Likert, ranking, numeric estimate), visibility modes, expert-only eligibility, vote-change policy, and per-type configuration. One-to-one with {@link econ_discuss_posts}. Options are stored in {@link econ_discuss_poll_options}. Responses reside in {@link econ_discuss_poll_responses} with selections in {@link econ_discuss_poll_response_options} for multi-select and ranking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_post_id","type":"uuid","description":"Host post's {@link econ_discuss_posts.id}. Exactly one poll per post.","relation":{"name":"post","targetModel":"econ_discuss_posts"},"unique":true,"nullable":false}],"plainFields":[{"name":"question","type":"string","description":"Poll prompt shown to voters.","nullable":false},{"name":"question_type","type":"string","description":"Type of question: single_choice, multiple_choice, likert, ranking, numeric_estimate. Application enforces valid values.","nullable":false},{"name":"visibility_mode","type":"string","description":"Visibility mode: hidden_until_close (default), visible_after_vote, always_visible (policy may disallow for expert-only).","nullable":false},{"name":"expert_only","type":"boolean","description":"Whether voting/participation is restricted to verified experts and staff.","nullable":false},{"name":"allow_vote_change","type":"boolean","description":"Whether respondents may change their vote prior to poll closure. Default business policy: enabled.","nullable":false},{"name":"min_voter_reputation","type":"int","description":"Optional minimum voter reputation required to participate (members below are ineligible).","nullable":true},{"name":"min_account_age_hours","type":"int","description":"Optional minimum account age in hours for eligibility (e.g., 48).","nullable":true},{"name":"min_selections","type":"int","description":"For multiple_choice: minimum number of selections required.","nullable":true},{"name":"max_selections","type":"int","description":"For multiple_choice: maximum number of selections allowed (â‰¤ number of options).","nullable":true},{"name":"scale_points","type":"int","description":"For likert: number of scale points (commonly 5 or 7).","nullable":true},{"name":"scale_min_label","type":"string","description":"For likert: label for the minimum endpoint.","nullable":true},{"name":"scale_max_label","type":"string","description":"For likert: label for the maximum endpoint.","nullable":true},{"name":"scale_mid_label","type":"string","description":"For likert: optional midpoint label.","nullable":true},{"name":"unit_label","type":"string","description":"For numeric_estimate: unit label (e.g., %, index points).","nullable":true},{"name":"numeric_min","type":"double","description":"For numeric_estimate: minimum allowed value.","nullable":true},{"name":"numeric_max","type":"double","description":"For numeric_estimate: maximum allowed value.","nullable":true},{"name":"numeric_step","type":"double","description":"For numeric_estimate: step size/precision for rounding.","nullable":true},{"name":"start_at","type":"datetime","description":"Scheduled start time when the poll opens for responses (optional).","nullable":true},{"name":"end_at","type":"datetime","description":"Scheduled end time after which responses are closed (optional).","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp for audit and ordering.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for audit and cache invalidation.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp. When set, the poll is considered removed from active use.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_post_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_post_id","created_at"]},{"fieldNames":["start_at","end_at"]},{"fieldNames":["expert_only","start_at"]},{"fieldNames":["visibility_mode"]},{"fieldNames":["question_type"]}],"ginIndexes":[{"fieldName":"question"}]},{"name":"econ_discuss_poll_options","description":"Answer options for a given poll. Each option belongs to one {@link econ_discuss_polls} and participates in per-poll uniqueness and display ordering. Managed through the parent poll lifecycle.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_poll_id","type":"uuid","description":"Owner poll's {@link econ_discuss_polls.id}.","relation":{"name":"poll","targetModel":"econ_discuss_polls","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"option_text","type":"string","description":"Display text for the option. Must be unique within the same poll.","nullable":false},{"name":"position","type":"int","description":"Zero- or one-based position for deterministic display ordering within a poll.","nullable":false},{"name":"created_at","type":"datetime","description":"Creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to retire an option without losing history.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_poll_id","option_text"],"unique":true},{"fieldNames":["econ_discuss_poll_id","position"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_poll_id","created_at"]}],"ginIndexes":[]},{"name":"econ_discuss_poll_responses","description":"One response per (poll, user) capturing lifecycle status, timestamps, and type-specific values. Option selections are recorded in {@link econ_discuss_poll_response_options} to support multiple choice and ranking. Likert responses use likert_value; numeric estimate uses numeric_value. Withdrawals and integrity actions are modeled via status and withdrawn_at.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_poll_id","type":"uuid","description":"Target poll's {@link econ_discuss_polls.id}.","relation":{"name":"poll","targetModel":"econ_discuss_polls"},"unique":false,"nullable":false},{"name":"econ_discuss_user_id","type":"uuid","description":"Respondent user's {@link econ_discuss_users.id}.","relation":{"name":"user","targetModel":"econ_discuss_users"},"unique":false,"nullable":false}],"plainFields":[{"name":"status","type":"string","description":"Response status: active, withdrawn, quarantined, invalidated. Used for moderation and integrity flows.","nullable":false},{"name":"likert_value","type":"int","description":"For likert: selected integer value within the defined scale points.","nullable":true},{"name":"numeric_value","type":"double","description":"For numeric_estimate: submitted numeric value (unit and bounds on poll).","nullable":true},{"name":"withdrawn_at","type":"datetime","description":"Timestamp when the respondent withdrew their vote (if applicable).","nullable":true},{"name":"created_at","type":"datetime","description":"Response creation timestamp used for user history and time-window analytics.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp (e.g., when editing within allowed window).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp. When set, the response is removed from active tallies; moderation may also use status to indicate reason.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_poll_id","econ_discuss_user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_poll_id","created_at"]},{"fieldNames":["econ_discuss_user_id","created_at"]},{"fieldNames":["econ_discuss_poll_id","status"]}],"ginIndexes":[]},{"name":"econ_discuss_poll_response_options","description":"Junction table linking a response to one or more options, enabling multiple choice and ranking support. When ranking is used, the position field stores the order assigned by the respondent (1 = highest). For single-choice questions, there will be exactly one row per response.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_poll_response_id","type":"uuid","description":"Linked response's {@link econ_discuss_poll_responses.id}.","relation":{"name":"response","targetModel":"econ_discuss_poll_responses"},"unique":false,"nullable":false},{"name":"econ_discuss_poll_option_id","type":"uuid","description":"Selected option's {@link econ_discuss_poll_options.id}.","relation":{"name":"option","targetModel":"econ_discuss_poll_options"},"unique":false,"nullable":false}],"plainFields":[{"name":"position","type":"int","description":"For ranking questions: position order (1..N). Null for non-ranking types.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp for the selection record.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp for the selection record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp to remove a selection without losing audit trail.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_poll_response_id","econ_discuss_poll_option_id"],"unique":true}],"plainIndexes":[{"fieldNames":["econ_discuss_poll_response_id","created_at"]},{"fieldNames":["econ_discuss_poll_option_id","created_at"]}],"ginIndexes":[]}]},{"filename":"schema-06-live.prisma","namespace":"Live","models":[{"name":"econ_discuss_live_threads","description":"Represents a live discussion thread (room) attached to a specific post. One-to-one with {@link econ_discuss_posts}. Tracks lifecycle state (scheduled, waiting, live, paused, ended, archived), configuration flags (e.g., expert-only), access scope governance, and key timestamps for operations. Messages are stored in {@link econ_discuss_live_messages}. Managed independently from the post for starting, pausing, ending, and archiving workflows.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_post_id","type":"uuid","description":"Host post's {@link econ_discuss_posts.id}. Exactly one live thread per post.","relation":{"name":"post","targetModel":"econ_discuss_posts","targetField":"id"},"unique":true,"nullable":false},{"name":"host_user_id","type":"uuid","description":"Host user's {@link econ_discuss_users.id} who can start/pause/end this live thread. Co-hosts/participants may be modeled separately.","relation":{"name":"host","targetModel":"econ_discuss_users","targetField":"id"},"unique":false,"nullable":false}],"plainFields":[{"name":"state","type":"string","description":"Lifecycle state of the live thread. Allowed values (application-enforced): scheduled, waiting, live, paused, ended, archived.","nullable":false},{"name":"expert_only","type":"boolean","description":"Whether participation is restricted to verified experts and staff (expert-only mode). Reading may remain broader per policy.","nullable":false},{"name":"access_scope","type":"string","description":"Access scope for participation/visibility. Allowed values (application-enforced): public, followers_only, topic_subscribers_only, invite_only.","nullable":false},{"name":"scheduled_start_at","type":"datetime","description":"Planned start time for scheduled rooms (displayed in userâ€™s timezone; stored canonical in UTC).","nullable":true},{"name":"started_at","type":"datetime","description":"Actual start time when the room transitions to live.","nullable":true},{"name":"paused_at","type":"datetime","description":"Timestamp when the room was paused. Null when not paused.","nullable":true},{"name":"ended_at","type":"datetime","description":"Timestamp when the room ended. Null if still ongoing.","nullable":true},{"name":"archived_at","type":"datetime","description":"Timestamp when the room was archived and made read-only.","nullable":true},{"name":"slow_mode_interval_seconds","type":"int","description":"Optional slow-mode interval (in seconds) limiting how frequently a participant may post messages.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp of the live thread entity.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp of the live thread entity.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp. When set, the thread is no longer active but retained for audit/restore windows.","nullable":true}],"uniqueIndexes":[{"fieldNames":["econ_discuss_post_id"],"unique":true}],"plainIndexes":[{"fieldNames":["state","updated_at"]},{"fieldNames":["expert_only","state"]},{"fieldNames":["created_at"]},{"fieldNames":["host_user_id","state"]},{"fieldNames":["scheduled_start_at"]}],"ginIndexes":[]},{"name":"econ_discuss_live_messages","description":"Live chat messages belonging to {@link econ_discuss_live_threads}. Authored by users from {@link econ_discuss_users}. Stores raw message content, type, and lifecycle timestamps for ordering and limited edits. Used to render real-time streams and archived transcripts. Author is nullable to preserve transcripts when user accounts are deleted/anonymized.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"econ_discuss_live_thread_id","type":"uuid","description":"Belonged live threadâ€™s {@link econ_discuss_live_threads.id}.","relation":{"name":"thread","targetModel":"econ_discuss_live_threads","targetField":"id"},"unique":false,"nullable":false},{"name":"econ_discuss_user_id","type":"uuid","description":"Author userâ€™s {@link econ_discuss_users.id}. Nullable to preserve transcripts by anonymizing author when the user is deleted.","relation":{"name":"author","targetModel":"econ_discuss_users","targetField":"id","onDelete":"SetNull"},"unique":false,"nullable":true}],"plainFields":[{"name":"message_type","type":"string","description":"Type of message for rendering/controls. Allowed values (application-enforced): text, system, poll_prompt, poll_result, moderation_notice, pinned.","nullable":false},{"name":"content","type":"string","description":"Message body text (for system/control messages this may be short explanatory text).","nullable":true},{"name":"pinned","type":"boolean","description":"Whether this message is currently pinned for context within the live thread.","nullable":false},{"name":"edited_at","type":"datetime","description":"Timestamp of last edit within allowed edit window. Null if never edited.","nullable":true},{"name":"created_at","type":"datetime","description":"Creation timestamp; also serves as the chronological ordering key for fan-out and transcript views.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp (e.g., pin/unpin, edit).","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for moderated or removed messages while preserving transcript placeholders as required.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["econ_discuss_live_thread_id","created_at"]},{"fieldNames":["econ_discuss_user_id","created_at"]},{"fieldNames":["message_type","created_at"]},{"fieldNames":["econ_discuss_live_thread_id","pinned","created_at"]}],"ginIndexes":[{"fieldName":"content"}]}]}]}
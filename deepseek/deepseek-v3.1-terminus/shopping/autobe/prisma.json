{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"shopping_mall_channels","description":"Defines the organizational channels within the shopping mall platform. Channels represent major business divisions or market segments that contain multiple sections. Each channel has hierarchical capabilities for nesting and manages its own branding, configuration, and operational parameters. {@link shopping_mall_sections} are organized within channels to create a structured marketplace environment.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","description":"Parent channel for hierarchical organization. Enables nested channel structures. {@link shopping_mall_channels.id}","relation":{"name":"parent","targetModel":"shopping_mall_channels","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"code","type":"string","description":"Unique business identifier for the channel. Used for API references and system integration.","nullable":false},{"name":"name","type":"string","description":"Display name of the channel shown to users and administrators.","nullable":false},{"name":"description","type":"string","description":"Detailed description explaining the channel's purpose and business context.","nullable":true},{"name":"logo_url","type":"uri","description":"Channel branding logo image URL for visual identification.","nullable":true},{"name":"banner_url","type":"uri","description":"Header banner image URL for channel presentation.","nullable":true},{"name":"display_order","type":"int","description":"Sort order for channel display in listings and navigation.","nullable":false},{"name":"is_active","type":"boolean","description":"Indicates whether the channel is currently active and visible.","nullable":false},{"name":"is_visible","type":"boolean","description":"Controls visibility of the channel in public interfaces.","nullable":false},{"name":"metadata","type":"string","description":"JSON structured data for channel-specific configurations and extensions.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the channel was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the channel was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the channel was soft deleted. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["parent_id","display_order"]},{"fieldNames":["is_active","is_visible"]},{"fieldNames":["display_order"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"shopping_mall_sections","description":"Organizational sections that group related content within channels. Sections provide logical segmentation within channels for better content organization and user navigation. Each section belongs to a specific channel and can contain products, categories, or other platform components. {@link shopping_mall_channels}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_channel_id","type":"uuid","description":"Parent channel that contains this section. {@link shopping_mall_channels.id}","relation":{"name":"channel","targetModel":"shopping_mall_channels"},"unique":false,"nullable":false}],"plainFields":[{"name":"code","type":"string","description":"Unique section identifier within the channel context.","nullable":false},{"name":"name","type":"string","description":"Display name of the section for user interfaces.","nullable":false},{"name":"description","type":"string","description":"Detailed explanation of the section's purpose and content.","nullable":true},{"name":"icon_url","type":"uri","description":"Icon image URL for section visual representation.","nullable":true},{"name":"background_url","type":"uri","description":"Background image URL for section presentation.","nullable":true},{"name":"display_order","type":"int","description":"Sort order for section display within its channel.","nullable":false},{"name":"is_active","type":"boolean","description":"Indicates whether the section is active and operational.","nullable":false},{"name":"is_featured","type":"boolean","description":"Marks the section as featured for prominent display.","nullable":false},{"name":"access_level","type":"string","description":"Access control level for section visibility and permissions.","nullable":false},{"name":"metadata","type":"string","description":"JSON structured data for section-specific configurations.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the section was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the section was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the section was soft deleted. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_channel_id","code"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_channel_id","display_order"]},{"fieldNames":["is_active","is_featured"]},{"fieldNames":["access_level"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"shopping_mall_channel_categories","description":"Classification system for organizing channels into meaningful categories. Enables hierarchical categorization of channels for better discovery, filtering, and management. Supports multiple categorization schemes and flexible taxonomy structures. {@link shopping_mall_channels}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","description":"Parent category for hierarchical organization. Enables nested category trees. {@link shopping_mall_channel_categories.id}","relation":{"name":"parent","targetModel":"shopping_mall_channel_categories","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"code","type":"string","description":"Unique category identifier for system reference and API access.","nullable":false},{"name":"name","type":"string","description":"Display name of the category shown to users and administrators.","nullable":false},{"name":"description","type":"string","description":"Detailed description of the category's purpose and scope.","nullable":true},{"name":"icon_url","type":"uri","description":"Category icon image URL for visual representation.","nullable":true},{"name":"display_order","type":"int","description":"Sort order for category display in listings and navigation.","nullable":false},{"name":"is_active","type":"boolean","description":"Indicates whether the category is currently active.","nullable":false},{"name":"is_visible","type":"boolean","description":"Controls visibility of the category in public interfaces.","nullable":false},{"name":"category_type","type":"string","description":"Type of category (e.g., product-based, regional, thematic).","nullable":false},{"name":"metadata","type":"string","description":"JSON structured data for category-specific configurations.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the category was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the category was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the category was soft deleted. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["parent_id","display_order"]},{"fieldNames":["is_active","is_visible"]},{"fieldNames":["category_type"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"shopping_mall_channel_category_assignments","description":"Junction table for assigning channels to multiple categories. Enables flexible many-to-many relationships between channels and categories, supporting multiple categorization schemes and dynamic classification. {@link shopping_mall_channels} {@link shopping_mall_channel_categories}","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_channel_id","type":"uuid","description":"Channel being assigned to a category. {@link shopping_mall_channels.id}","relation":{"name":"channel","targetModel":"shopping_mall_channels"},"unique":false,"nullable":false},{"name":"shopping_mall_channel_category_id","type":"uuid","description":"Category receiving the channel assignment. {@link shopping_mall_channel_categories.id}","relation":{"name":"category","targetModel":"shopping_mall_channel_categories"},"unique":false,"nullable":false}],"plainFields":[{"name":"assignment_type","type":"string","description":"Type of category assignment (primary, secondary, thematic).","nullable":false},{"name":"display_order","type":"int","description":"Sort order for channel display within the category.","nullable":false},{"name":"is_primary","type":"boolean","description":"Indicates if this is the primary category for the channel.","nullable":false},{"name":"metadata","type":"string","description":"JSON structured data for assignment-specific configurations.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the category assignment was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the assignment was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the assignment was soft deleted. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_channel_id","shopping_mall_channel_category_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_channel_category_id","display_order"]},{"fieldNames":["is_primary"]}],"ginIndexes":[]},{"name":"shopping_mall_configurations","description":"System-wide and channel-specific configuration settings. Stores platform configuration parameters, feature flags, and operational settings that control system behavior across different scopes (global, channel, section). Supports configuration versioning and audit trails. {@link shopping_mall_channels} {@link shopping_mall_sections}","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_channel_id","type":"uuid","description":"Channel scope for channel-specific configurations. Null for global settings. {@link shopping_mall_channels.id}","relation":{"name":"channel","targetModel":"shopping_mall_channels"},"unique":false,"nullable":true},{"name":"shopping_mall_section_id","type":"uuid","description":"Section scope for section-specific configurations. Null for broader scopes. {@link shopping_mall_sections.id}","relation":{"name":"section","targetModel":"shopping_mall_sections"},"unique":false,"nullable":true}],"plainFields":[{"name":"configuration_key","type":"string","description":"Unique key identifying the configuration parameter.","nullable":false},{"name":"configuration_value","type":"string","description":"Value of the configuration parameter in JSON format.","nullable":false},{"name":"data_type","type":"string","description":"Data type of the configuration value (string, number, boolean, json).","nullable":false},{"name":"description","type":"string","description":"Human-readable description of the configuration parameter.","nullable":true},{"name":"is_encrypted","type":"boolean","description":"Indicates if the configuration value should be encrypted.","nullable":false},{"name":"is_system","type":"boolean","description":"Marks system-critical configurations that cannot be modified by users.","nullable":false},{"name":"version","type":"int","description":"Configuration version for change tracking and rollback capabilities.","nullable":false},{"name":"effective_from","type":"datetime","description":"Timestamp when the configuration becomes effective.","nullable":false},{"name":"effective_until","type":"datetime","description":"Timestamp when the configuration expires. Null for indefinite.","nullable":true},{"name":"metadata","type":"string","description":"JSON structured metadata for configuration management.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the configuration was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the configuration was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the configuration was soft deleted. Null if active.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_channel_id","shopping_mall_section_id","configuration_key","version"],"unique":true}],"plainIndexes":[{"fieldNames":["configuration_key"]},{"fieldNames":["effective_from","effective_until"]},{"fieldNames":["is_system"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"shopping_mall_guests","description":"Temporary guest users created for browsing and anonymous shopping sessions. Stores minimal guest information for session continuity and cart preservation. Guest accounts can be converted to registered customer accounts upon user registration.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"guest_token","type":"string","description":"Unique anonymous identifier for guest sessions.","nullable":false},{"name":"email","type":"string","description":"Optional email address provided by guest for order notifications.","nullable":true},{"name":"session_data","type":"string","description":"JSON-encoded guest session data including cart contents and preferences.","nullable":true},{"name":"status","type":"string","description":"Guest account status (active, expired, converted).","nullable":false},{"name":"expires_at","type":"datetime","description":"Automatic expiration timestamp for guest account cleanup.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when guest account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last guest account update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for GDPR compliance.","nullable":true}],"uniqueIndexes":[{"fieldNames":["guest_token"],"unique":true}],"plainIndexes":[{"fieldNames":["expires_at"]},{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"email"}]},{"name":"shopping_mall_customers","description":"Registered customer accounts with full authentication and shopping capabilities. Central entity for customer relationship management, order history, and personalized shopping experiences.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Verified email address for customer authentication and communication.","nullable":false},{"name":"password_hash","type":"string","description":"Securely hashed password for customer authentication.","nullable":false},{"name":"first_name","type":"string","description":"Customer's first name for personalized communication.","nullable":false},{"name":"last_name","type":"string","description":"Customer's last name for shipping and billing purposes.","nullable":false},{"name":"phone_number","type":"string","description":"Customer phone number for order updates and support.","nullable":true},{"name":"date_of_birth","type":"datetime","description":"Customer birth date for age verification and personalization.","nullable":true},{"name":"status","type":"string","description":"Customer account status (active, suspended, verified).","nullable":false},{"name":"email_verified_at","type":"datetime","description":"Timestamp when email address was verified.","nullable":true},{"name":"last_login_at","type":"datetime","description":"Timestamp of customer's last successful login.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when customer account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last customer account update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for GDPR compliance.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["last_login_at"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"first_name"},{"fieldName":"last_name"}]},{"name":"shopping_mall_sellers","description":"Business seller accounts with product management, order fulfillment, and business analytics capabilities. Sellers operate their storefronts within the shopping mall platform.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Business email address for seller authentication and communication.","nullable":false},{"name":"password_hash","type":"string","description":"Securely hashed password for seller authentication.","nullable":false},{"name":"business_name","type":"string","description":"Official registered business name for the seller store.","nullable":false},{"name":"contact_person","type":"string","description":"Primary contact person name for business communications.","nullable":false},{"name":"phone_number","type":"string","description":"Business phone number for order coordination and support.","nullable":false},{"name":"tax_id","type":"string","description":"Business tax identification number for financial compliance.","nullable":true},{"name":"business_registration_number","type":"string","description":"Official business registration number for verification.","nullable":true},{"name":"status","type":"string","description":"Seller account status (pending, active, suspended, verified).","nullable":false},{"name":"business_status","type":"string","description":"Seller business status (individual, partnership, corporation).","nullable":false},{"name":"commission_rate","type":"double","description":"Platform commission rate percentage for this seller.","nullable":false},{"name":"email_verified_at","type":"datetime","description":"Timestamp when business email was verified.","nullable":true},{"name":"last_login_at","type":"datetime","description":"Timestamp of seller's last successful login.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when seller account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last seller account update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for business continuity.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["business_name"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["business_status"]},{"fieldNames":["last_login_at"]}],"ginIndexes":[]},{"name":"shopping_mall_administrators","description":"Platform administrator accounts with system-wide management and configuration capabilities. Administrators oversee platform operations, user management, and system security.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Administrative email address for platform authentication and alerts.","nullable":false},{"name":"password_hash","type":"string","description":"Securely hashed password for administrator authentication.","nullable":false},{"name":"first_name","type":"string","description":"Administrator's first name for identification purposes.","nullable":false},{"name":"last_name","type":"string","description":"Administrator's last name for audit trail identification.","nullable":false},{"name":"role","type":"string","description":"Administrative role level (super_admin, content_admin, support_admin).","nullable":false},{"name":"permissions","type":"string","description":"JSON-encoded permission set for role-based access control.","nullable":false},{"name":"status","type":"string","description":"Administrator account status (active, suspended, inactive).","nullable":false},{"name":"last_login_at","type":"datetime","description":"Timestamp of administrator's last system login.","nullable":true},{"name":"last_activity_at","type":"datetime","description":"Timestamp of administrator's last platform activity.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when administrator account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last administrator account update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for audit compliance.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true}],"plainIndexes":[{"fieldNames":["role"]},{"fieldNames":["status"]},{"fieldNames":["last_login_at"]}],"ginIndexes":[]},{"name":"shopping_mall_user_addresses","description":"User address book entries for shipping, billing, and contact purposes. Supports multiple addresses per user with type classification and validation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Associated customer's {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Associated seller's {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true}],"plainFields":[{"name":"address_type","type":"string","description":"Address classification (shipping, billing, business, home).","nullable":false},{"name":"recipient_name","type":"string","description":"Full name of the person receiving deliveries at this address.","nullable":false},{"name":"address_line_1","type":"string","description":"Primary street address line for delivery.","nullable":false},{"name":"address_line_2","type":"string","description":"Secondary address details (apartment, suite, building).","nullable":true},{"name":"city","type":"string","description":"City or locality name for the address.","nullable":false},{"name":"state","type":"string","description":"State or province name for geographic location.","nullable":false},{"name":"postal_code","type":"string","description":"Postal or ZIP code for address validation.","nullable":false},{"name":"country","type":"string","description":"Country name for international shipping.","nullable":false},{"name":"phone_number","type":"string","description":"Contact phone number for this address location.","nullable":true},{"name":"is_default","type":"boolean","description":"Flag indicating if this is the user's primary/default address.","nullable":false},{"name":"latitude","type":"double","description":"Geographic latitude for mapping and delivery optimization.","nullable":true},{"name":"longitude","type":"double","description":"Geographic longitude for mapping and delivery optimization.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when address record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last address record update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for address cleanup.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id","address_type"]},{"fieldNames":["shopping_mall_seller_id","address_type"]},{"fieldNames":["city","state"]},{"fieldNames":["postal_code"]}],"ginIndexes":[{"fieldName":"recipient_name"}]},{"name":"shopping_mall_user_profiles","description":"Extended user profile information for personalization and customer service. Stores additional user preferences, communication settings, and profile metadata.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Associated customer's {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":true,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Associated seller's {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":true,"nullable":true}],"plainFields":[{"name":"avatar_url","type":"uri","description":"URL to user's profile picture or avatar image.","nullable":true},{"name":"profile_bio","type":"string","description":"User-provided biography or description text.","nullable":true},{"name":"communication_preferences","type":"string","description":"JSON-encoded communication preferences and notification settings.","nullable":false},{"name":"language_preference","type":"string","description":"User's preferred language for platform interface.","nullable":false},{"name":"currency_preference","type":"string","description":"User's preferred currency for price display.","nullable":false},{"name":"timezone","type":"string","description":"User's preferred timezone for scheduling and notifications.","nullable":false},{"name":"marketing_opt_in","type":"boolean","description":"Flag indicating user consent for marketing communications.","nullable":false},{"name":"newsletter_subscription","type":"boolean","description":"Flag indicating user subscription to platform newsletters.","nullable":false},{"name":"privacy_settings","type":"string","description":"JSON-encoded privacy and data sharing preferences.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when profile was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last profile update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp for privacy compliance.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["shopping_mall_seller_id"]},{"fieldNames":["language_preference"]}],"ginIndexes":[{"fieldName":"profile_bio"}]},{"name":"shopping_mall_user_sessions","description":"User authentication sessions for security and access management. Tracks active user sessions with expiration and security controls.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Associated customer's {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Associated seller's {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Associated administrator's {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"session_token","type":"string","description":"Unique session identifier for authentication purposes.","nullable":false},{"name":"ip_address","type":"string","description":"IP address from which the session was initiated.","nullable":false},{"name":"user_agent","type":"string","description":"Browser or client user agent string for device identification.","nullable":true},{"name":"device_fingerprint","type":"string","description":"Unique device identifier for security validation.","nullable":true},{"name":"status","type":"string","description":"Session status (active, expired, revoked, logged_out).","nullable":false},{"name":"last_activity_at","type":"datetime","description":"Timestamp of last user activity during this session.","nullable":false},{"name":"expires_at","type":"datetime","description":"Automatic expiration timestamp for session security.","nullable":false},{"name":"revoked_at","type":"datetime","description":"Timestamp when session was manually revoked.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when session was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last session activity update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["session_token"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id","status"]},{"fieldNames":["shopping_mall_seller_id","status"]},{"fieldNames":["shopping_mall_administrator_id","status"]},{"fieldNames":["expires_at"]},{"fieldNames":["last_activity_at"]}],"ginIndexes":[{"fieldName":"ip_address"}]}]},{"filename":"schema-03-product-catalog.prisma","namespace":"ProductCatalog","models":[{"name":"shopping_mall_products","description":"Core product entity containing base product information that serves as the foundation for variant creation. Products represent the main catalog items that customers can purchase. Each product belongs to a brand and manufacturer, and can be categorized into multiple product categories for organization and discovery.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_brand_id","type":"uuid","description":"Associated brand's {@link shopping_mall_brands.id}.","relation":{"name":"brand","targetModel":"shopping_mall_brands"},"unique":false,"nullable":true},{"name":"shopping_mall_manufacturer_id","type":"uuid","description":"Associated manufacturer's {@link shopping_mall_manufacturers.id}.","relation":{"name":"manufacturer","targetModel":"shopping_mall_manufacturers"},"unique":false,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller who owns this product {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"Product name displayed to customers.","nullable":false},{"name":"description","type":"string","description":"Detailed product description including features and specifications.","nullable":true},{"name":"base_price","type":"double","description":"Base price for the product before variant-specific pricing.","nullable":false},{"name":"is_active","type":"boolean","description":"Whether the product is available for sale.","nullable":false},{"name":"requires_variants","type":"boolean","description":"Indicates if product requires variant selection before purchase.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when product was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when product was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when product was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_seller_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]},{"fieldNames":["base_price"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"shopping_mall_product_variants","description":"Product variants representing different configurations of the same base product. Each variant has a unique SKU and specific pricing, enabling inventory management at the variant level. Variants inherit base product information but can override pricing and have distinct attributes.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"Parent product's {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"sku","type":"string","description":"Unique Stock Keeping Unit identifier for the variant.","nullable":false},{"name":"name","type":"string","description":"Variant-specific name or description.","nullable":false},{"name":"price","type":"double","description":"Variant-specific price that overrides base product price.","nullable":false},{"name":"is_active","type":"boolean","description":"Whether this specific variant is available for sale.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when variant was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when variant was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when variant was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["sku"],"unique":true},{"fieldNames":["shopping_mall_product_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]},{"fieldNames":["price"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"shopping_mall_product_categories","description":"Product category hierarchy for organizing products into logical groups. Categories support multi-level hierarchy with parent-child relationships enabling flexible product organization. Products can belong to multiple categories for enhanced discoverability.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","description":"Parent category's {@link shopping_mall_product_categories.id}.","relation":{"name":"parent","targetModel":"shopping_mall_product_categories","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"name","type":"string","description":"Category name displayed to users.","nullable":false},{"name":"description","type":"string","description":"Category description for administrative purposes.","nullable":true},{"name":"hierarchy_level","type":"int","description":"Level in category hierarchy (1 for root categories).","nullable":false},{"name":"is_active","type":"boolean","description":"Whether category is active and visible.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when category was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when category was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when category was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name","parent_id"],"unique":true}],"plainIndexes":[{"fieldNames":["hierarchy_level"]},{"fieldNames":["is_active"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"shopping_mall_product_attributes","description":"Product attributes defining the characteristics that distinguish product variants. Attributes represent the variable properties of products (like color, size, material) that enable variant creation. Each attribute can be used across multiple products and variants.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"Product that uses this attribute {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"Attribute name (e.g., 'Color', 'Size', 'Material').","nullable":false},{"name":"value","type":"string","description":"Attribute value (e.g., 'Red', 'Large', 'Cotton').","nullable":false},{"name":"is_required","type":"boolean","description":"Whether this attribute is required for variant selection.","nullable":false},{"name":"display_order","type":"int","description":"Order in which attributes are displayed to users.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when attribute was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when attribute was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when attribute was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","name","value"],"unique":true}],"plainIndexes":[{"fieldNames":["display_order"]},{"fieldNames":["is_required"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"value"}]},{"name":"shopping_mall_product_images","description":"Product images and media files associated with products and variants. Supports multiple images per product/variant with ordering and type classification. Images can be specific to variants or shared across products for comprehensive product visualization.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"Product associated with this image {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":true},{"name":"shopping_mall_product_variant_id","type":"uuid","description":"Variant-specific image {@link shopping_mall_product_variants.id}.","relation":{"name":"variant","targetModel":"shopping_mall_product_variants"},"unique":false,"nullable":true}],"plainFields":[{"name":"image_url","type":"uri","description":"URL to the product image file.","nullable":false},{"name":"alt_text","type":"string","description":"Alternative text for accessibility and SEO.","nullable":true},{"name":"display_order","type":"int","description":"Order in which images are displayed (lower numbers first).","nullable":false},{"name":"image_type","type":"string","description":"Type of image (thumbnail, main, gallery, etc.).","nullable":false},{"name":"is_primary","type":"boolean","description":"Whether this is the primary image for the product/variant.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when image was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when image was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when image was soft deleted.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["display_order"]},{"fieldNames":["is_primary"]},{"fieldNames":["image_type"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"alt_text"}]},{"name":"shopping_mall_brands","description":"Product brands representing the manufacturers or companies that produce products. Brands serve as important categorization and filtering criteria for customers. Each brand can have associated branding information and quality standards.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","description":"Brand name displayed to customers.","nullable":false},{"name":"description","type":"string","description":"Brand description and company information.","nullable":true},{"name":"logo_url","type":"uri","description":"URL to brand logo image.","nullable":true},{"name":"website_url","type":"uri","description":"Official brand website URL.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether brand is active and visible.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when brand was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when brand was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when brand was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"shopping_mall_manufacturers","description":"Product manufacturers representing the actual producers of goods. Manufacturers are distinct from brands as they represent the entity responsible for product creation. This enables detailed supply chain tracking and quality control.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","description":"Manufacturer name for identification.","nullable":false},{"name":"description","type":"string","description":"Manufacturer description and business details.","nullable":true},{"name":"contact_email","type":"string","description":"Manufacturer contact email address.","nullable":true},{"name":"website_url","type":"uri","description":"Manufacturer website URL.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether manufacturer is active in the system.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when manufacturer was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when manufacturer was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when manufacturer was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"description"}]}]},{"filename":"schema-04-sales.prisma","namespace":"Sales","models":[{"name":"shopping_mall_sales","description":"Core sales transaction records tracking all marketplace purchases. Each sale represents a completed transaction between a customer and seller, including pricing, commission calculations, and fulfillment status. Sales records are essential for revenue tracking, seller payments, and business analytics.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who made the purchase. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller who received the payment. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false},{"name":"shopping_mall_order_id","type":"uuid","description":"Reference to the original order. {@link shopping_mall_orders.id}","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":true,"nullable":false}],"plainFields":[{"name":"sale_amount","type":"double","description":"Total sale amount before any discounts or commissions.","nullable":false},{"name":"discount_amount","type":"double","description":"Total discount applied to the sale.","nullable":false},{"name":"commission_rate","type":"double","description":"Commission percentage applied to the sale.","nullable":false},{"name":"commission_amount","type":"double","description":"Calculated commission amount deducted from sale.","nullable":false},{"name":"net_amount","type":"double","description":"Final amount payable to seller after commissions.","nullable":false},{"name":"currency","type":"string","description":"Currency code for the transaction (e.g., USD, EUR).","nullable":false},{"name":"sale_status","type":"string","description":"Current status of the sale (pending, completed, refunded, cancelled).","nullable":false},{"name":"payment_received_at","type":"datetime","description":"Timestamp when payment was successfully received.","nullable":true},{"name":"seller_paid_at","type":"datetime","description":"Timestamp when seller payment was processed.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the sale record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the sale record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id","created_at"]},{"fieldNames":["shopping_mall_seller_id","created_at"]},{"fieldNames":["sale_status"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_pricing_tiers","description":"Flexible pricing tier structure supporting different customer segments, volume discounts, and promotional pricing. Pricing tiers can be applied to products, categories, or customer groups with configurable rules and conditions.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"Product this pricing tier applies to. {@link shopping_mall_products.id}","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":true},{"name":"shopping_mall_product_category_id","type":"uuid","description":"Product category this pricing tier applies to. {@link shopping_mall_product_categories.id}","relation":{"name":"productCategory","targetModel":"shopping_mall_product_categories"},"unique":false,"nullable":true},{"name":"shopping_mall_customer_id","type":"uuid","description":"Specific customer this pricing tier applies to. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true}],"plainFields":[{"name":"tier_name","type":"string","description":"Descriptive name for this pricing tier.","nullable":false},{"name":"tier_type","type":"string","description":"Type of pricing tier (volume, customer_group, promotional, seasonal).","nullable":false},{"name":"minimum_quantity","type":"int","description":"Minimum quantity required to qualify for this tier.","nullable":true},{"name":"maximum_quantity","type":"int","description":"Maximum quantity allowed for this tier.","nullable":true},{"name":"price_adjustment_type","type":"string","description":"Type of price adjustment (percentage, fixed_amount, override).","nullable":false},{"name":"price_adjustment_value","type":"double","description":"Value of the price adjustment.","nullable":false},{"name":"priority","type":"int","description":"Priority level for tier application (higher numbers take precedence).","nullable":false},{"name":"valid_from","type":"datetime","description":"Start date when this pricing tier becomes active.","nullable":false},{"name":"valid_until","type":"datetime","description":"End date when this pricing tier expires.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether this pricing tier is currently active.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the pricing tier was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the pricing tier was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_product_id","valid_from","valid_until"]},{"fieldNames":["shopping_mall_product_category_id","valid_from","valid_until"]},{"fieldNames":["tier_type","is_active"]},{"fieldNames":["valid_from","valid_until"]},{"fieldNames":["priority"]}],"ginIndexes":[{"fieldName":"tier_name"}]},{"name":"shopping_mall_promotions","description":"Promotional campaigns and marketing initiatives with configurable rules, targeting, and performance tracking. Promotions can include discounts, free shipping, gifts, or other incentives to drive sales.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"promotion_name","type":"string","description":"Descriptive name for the promotion campaign.","nullable":false},{"name":"promotion_type","type":"string","description":"Type of promotion (percentage_discount, fixed_discount, free_shipping, bundle, gift).","nullable":false},{"name":"description","type":"string","description":"Detailed description of the promotion terms and conditions.","nullable":true},{"name":"promotion_code","type":"string","description":"Optional promotion code for manual entry.","nullable":true},{"name":"target_audience","type":"string","description":"Target audience for the promotion (all_customers, new_customers, VIP, specific_segment).","nullable":false},{"name":"minimum_order_value","type":"double","description":"Minimum order value required to qualify for promotion.","nullable":true},{"name":"maximum_discount_amount","type":"double","description":"Maximum discount amount allowed per order.","nullable":true},{"name":"usage_limit_per_customer","type":"int","description":"Maximum number of times a customer can use this promotion.","nullable":true},{"name":"total_usage_limit","type":"int","description":"Maximum total number of times this promotion can be used.","nullable":true},{"name":"start_date","type":"datetime","description":"Date and time when the promotion becomes active.","nullable":false},{"name":"end_date","type":"datetime","description":"Date and time when the promotion expires.","nullable":false},{"name":"is_active","type":"boolean","description":"Whether the promotion is currently active.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the promotion was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the promotion was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["promotion_code"],"unique":true}],"plainIndexes":[{"fieldNames":["promotion_type","is_active"]},{"fieldNames":["start_date","end_date"]},{"fieldNames":["target_audience"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"promotion_name"},{"fieldName":"description"}]},{"name":"shopping_mall_discounts","description":"Discount rules and calculations applied to products, categories, or orders. Discounts can be automatic (based on conditions) or manual (applied by customers or admins) with various calculation methods.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_promotion_id","type":"uuid","description":"Promotion that this discount belongs to. {@link shopping_mall_promotions.id}","relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"unique":false,"nullable":true},{"name":"shopping_mall_product_id","type":"uuid","description":"Product this discount applies to. {@link shopping_mall_products.id}","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":true},{"name":"shopping_mall_product_category_id","type":"uuid","description":"Product category this discount applies to. {@link shopping_mall_product_categories.id}","relation":{"name":"productCategory","targetModel":"shopping_mall_product_categories"},"unique":false,"nullable":true}],"plainFields":[{"name":"discount_type","type":"string","description":"Type of discount (percentage, fixed_amount, free_shipping, buy_x_get_y).","nullable":false},{"name":"discount_value","type":"double","description":"Value of the discount (percentage or fixed amount).","nullable":false},{"name":"minimum_quantity","type":"int","description":"Minimum quantity required to qualify for discount.","nullable":true},{"name":"maximum_discount_amount","type":"double","description":"Maximum discount amount that can be applied.","nullable":true},{"name":"apply_to","type":"string","description":"What the discount applies to (product, category, order, shipping).","nullable":false},{"name":"stackable","type":"boolean","description":"Whether this discount can be combined with other discounts.","nullable":false},{"name":"auto_apply","type":"boolean","description":"Whether discount applies automatically when conditions are met.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the discount was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the discount was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_promotion_id"]},{"fieldNames":["shopping_mall_product_id","discount_type"]},{"fieldNames":["shopping_mall_product_category_id","discount_type"]},{"fieldNames":["discount_type","auto_apply"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_coupons","description":"Coupon code management system with unique codes, usage tracking, and validation rules. Coupons provide customers with special discounts or offers that can be applied during checkout.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_promotion_id","type":"uuid","description":"Promotion associated with this coupon. {@link shopping_mall_promotions.id}","relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"unique":false,"nullable":true},{"name":"shopping_mall_customer_id","type":"uuid","description":"Specific customer this coupon was issued to. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true}],"plainFields":[{"name":"coupon_code","type":"string","description":"Unique coupon code that customers enter during checkout.","nullable":false},{"name":"coupon_type","type":"string","description":"Type of coupon (percentage, fixed_amount, free_shipping, gift).","nullable":false},{"name":"discount_value","type":"double","description":"Discount value (percentage or fixed amount).","nullable":false},{"name":"minimum_order_amount","type":"double","description":"Minimum order amount required to use this coupon.","nullable":true},{"name":"maximum_discount","type":"double","description":"Maximum discount amount that can be applied.","nullable":true},{"name":"usage_limit","type":"int","description":"Maximum number of times this coupon can be used.","nullable":true},{"name":"times_used","type":"int","description":"Number of times this coupon has been used.","nullable":false},{"name":"valid_from","type":"datetime","description":"Date and time when the coupon becomes valid.","nullable":false},{"name":"valid_until","type":"datetime","description":"Date and time when the coupon expires.","nullable":false},{"name":"is_active","type":"boolean","description":"Whether the coupon is currently active and valid.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the coupon was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the coupon was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["coupon_code"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_promotion_id"]},{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["coupon_type","is_active"]},{"fieldNames":["valid_from","valid_until"]},{"fieldNames":["times_used","usage_limit"]}],"ginIndexes":[]},{"name":"shopping_mall_commission_rates","description":"Commission rate structures defining platform fees for different sellers, product categories, and transaction types. Supports tiered commission models based on sales volume, product category, and seller performance.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller this commission rate applies to. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true},{"name":"shopping_mall_product_category_id","type":"uuid","description":"Product category this commission rate applies to. {@link shopping_mall_product_categories.id}","relation":{"name":"productCategory","targetModel":"shopping_mall_product_categories"},"unique":false,"nullable":true}],"plainFields":[{"name":"rate_name","type":"string","description":"Descriptive name for this commission rate structure.","nullable":false},{"name":"commission_type","type":"string","description":"Type of commission (percentage, fixed_amount, tiered).","nullable":false},{"name":"commission_rate","type":"double","description":"Commission rate value (percentage or fixed amount).","nullable":false},{"name":"minimum_sales_amount","type":"double","description":"Minimum sales amount required for this rate to apply.","nullable":true},{"name":"maximum_sales_amount","type":"double","description":"Maximum sales amount for this rate tier.","nullable":true},{"name":"effective_from","type":"datetime","description":"Date when this commission rate becomes effective.","nullable":false},{"name":"effective_until","type":"datetime","description":"Date when this commission rate expires.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether this commission rate is currently active.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the commission rate was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the commission rate was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_seller_id","effective_from","effective_until"]},{"fieldNames":["shopping_mall_product_category_id","effective_from","effective_until"]},{"fieldNames":["commission_type","is_active"]},{"fieldNames":["effective_from","effective_until"]},{"fieldNames":["minimum_sales_amount","maximum_sales_amount"]}],"ginIndexes":[{"fieldName":"rate_name"}]}]},{"filename":"schema-05-carts.prisma","namespace":"Carts","models":[{"name":"shopping_mall_shopping_carts","description":"Represents individual shopping carts that customers use to collect products before purchase. Each cart can belong to either an authenticated customer or a guest session. Carts maintain their state including active items, pricing totals, and expiration status for abandoned cart recovery.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Owner customer's reference. Nullable to support guest carts. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true}],"plainFields":[{"name":"session_key","type":"string","description":"Unique session identifier for guest carts. Used to maintain cart state across browser sessions.","nullable":true},{"name":"status","type":"string","description":"Current cart status: 'active', 'abandoned', 'converted', 'expired'. Controls cart lifecycle management.","nullable":false},{"name":"total_price","type":"double","description":"Calculated sum of all cart items prices. Used for quick cart total display.","nullable":false},{"name":"item_count","type":"int","description":"Total number of items in the cart. Used for cart icon badges and quick summaries.","nullable":false},{"name":"expires_at","type":"datetime","description":"Timestamp when cart automatically expires if inactive. Typically 30 days for guest carts.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when cart was initially created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when cart was last modified.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when cart was soft deleted for recovery purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["session_key"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id","status"]},{"fieldNames":["status","expires_at"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_cart_items","description":"Individual items added to shopping carts. Each item represents a specific product variant with quantity, pricing snapshot, and cart association. Supports real-time inventory validation and pricing updates.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_shopping_cart_id","type":"uuid","description":"Parent shopping cart reference. {@link shopping_mall_shopping_carts.id}","relation":{"name":"shoppingCart","targetModel":"shopping_mall_shopping_carts"},"unique":false,"nullable":false},{"name":"shopping_mall_product_variant_id","type":"uuid","description":"Specific product variant added to cart. {@link shopping_mall_product_variants.id}","relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"unique":false,"nullable":false}],"plainFields":[{"name":"quantity","type":"int","description":"Number of units for this product variant in the cart. Must be positive integer.","nullable":false},{"name":"unit_price","type":"double","description":"Snapshot of product price at time of adding to cart. Preserves pricing integrity.","nullable":false},{"name":"total_price","type":"double","description":"Calculated price for this line item (quantity  unit_price).","nullable":false},{"name":"added_at","type":"datetime","description":"Timestamp when item was originally added to cart.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when item quantity or price was last modified.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when item was removed from cart for recovery purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_shopping_cart_id","shopping_mall_product_variant_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_shopping_cart_id"]},{"fieldNames":["shopping_mall_product_variant_id"]},{"fieldNames":["added_at"]}],"ginIndexes":[]},{"name":"shopping_mall_wishlists","description":"Customer wishlists for saving products of interest. Each wishlist can have a custom name and privacy settings. Supports multiple wishlists per customer for different shopping goals.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Owner customer reference. Wishlists require authenticated customers. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"Display name for the wishlist. Customers can create multiple named wishlists.","nullable":false},{"name":"description","type":"string","description":"Optional description explaining the wishlist purpose or theme.","nullable":true},{"name":"privacy","type":"string","description":"Privacy setting: 'private', 'shared', 'public'. Controls visibility to other users.","nullable":false},{"name":"item_count","type":"int","description":"Total number of items currently in the wishlist. Updated automatically.","nullable":false},{"name":"is_default","type":"boolean","description":"Indicates if this is the customer's default wishlist for quick adds.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when wishlist was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when wishlist details were last modified.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when wishlist was soft deleted for recovery purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_customer_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["privacy"]},{"fieldNames":["is_default"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"},{"fieldName":"description"}]},{"name":"shopping_mall_wishlist_items","description":"Individual products saved to customer wishlists. Each item captures product details and pricing snapshot at time of addition. Supports moving items between wishlists or to shopping cart.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_wishlist_id","type":"uuid","description":"Parent wishlist reference. {@link shopping_mall_wishlists.id}","relation":{"name":"wishlist","targetModel":"shopping_mall_wishlists"},"unique":false,"nullable":false},{"name":"shopping_mall_product_variant_id","type":"uuid","description":"Specific product variant saved to wishlist. {@link shopping_mall_product_variants.id}","relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"unique":false,"nullable":false}],"plainFields":[{"name":"notes","type":"string","description":"Optional customer notes about why this product was saved or intended use.","nullable":true},{"name":"price_at_addition","type":"double","description":"Snapshot of product price when added to wishlist. Helps track price changes.","nullable":false},{"name":"priority","type":"int","description":"Customer-assigned priority level for wishlist sorting (1=highest, 5=lowest).","nullable":false},{"name":"added_at","type":"datetime","description":"Timestamp when product was added to wishlist.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when item details were last modified.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when item was removed from wishlist for recovery purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_wishlist_id","shopping_mall_product_variant_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_wishlist_id"]},{"fieldNames":["shopping_mall_product_variant_id"]},{"fieldNames":["priority"]},{"fieldNames":["added_at"]}],"ginIndexes":[{"fieldName":"notes"}]}]},{"filename":"schema-06-orders.prisma","namespace":"Orders","models":[{"name":"shopping_mall_orders","description":"Main order entity representing complete customer purchases. Contains order header information, customer details, payment status, and overall order management. Orders can contain items from multiple sellers with separate fulfillment workflows. {@link shopping_mall_customers.id}, {@link shopping_mall_payments.id}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who placed the order. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Primary seller for the order (used for commission calculations). {@link shopping_mall_sellers.id}","relation":{"name":"primarySeller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"order_number","type":"string","description":"Unique order identifier for customer reference and tracking.","nullable":false},{"name":"status","type":"string","description":"Current order status (pending, confirmed, processing, shipped, delivered, cancelled).","nullable":false},{"name":"total_amount","type":"double","description":"Total order amount including taxes and shipping.","nullable":false},{"name":"subtotal_amount","type":"double","description":"Order subtotal before taxes and shipping.","nullable":false},{"name":"tax_amount","type":"double","description":"Total tax amount calculated for the order.","nullable":false},{"name":"shipping_amount","type":"double","description":"Total shipping cost for the order.","nullable":false},{"name":"currency","type":"string","description":"Currency code for the order amounts (ISO 4217 format).","nullable":false},{"name":"shipping_address","type":"string","description":"Complete shipping address for order delivery.","nullable":false},{"name":"billing_address","type":"string","description":"Complete billing address for payment purposes.","nullable":false},{"name":"special_instructions","type":"string","description":"Customer-provided special delivery instructions.","nullable":true},{"name":"estimated_delivery_date","type":"datetime","description":"Estimated delivery date provided to customer.","nullable":true},{"name":"actual_delivery_date","type":"datetime","description":"Actual delivery date when order was delivered.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the order was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the order was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the order was soft deleted (for cancellations).","nullable":true}],"uniqueIndexes":[{"fieldNames":["order_number"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id","created_at"]},{"fieldNames":["status","created_at"]},{"fieldNames":["shopping_mall_seller_id","created_at"]}],"ginIndexes":[{"fieldName":"shipping_address"}]},{"name":"shopping_mall_order_items","description":"Individual line items within an order. Each item represents a specific product variant (SKU) with quantity, price, and seller assignment. Supports multi-seller orders with proper item grouping. {@link shopping_mall_orders.id}, {@link shopping_mall_product_variants.id}, {@link shopping_mall_sellers.id}","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Parent order containing this item. {@link shopping_mall_orders.id}","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_product_variant_id","type":"uuid","description":"Specific product variant (SKU) being ordered. {@link shopping_mall_product_variants.id}","relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller responsible for fulfilling this specific item. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"quantity","type":"int","description":"Quantity of the product variant ordered.","nullable":false},{"name":"unit_price","type":"double","description":"Price per unit at time of order.","nullable":false},{"name":"total_price","type":"double","description":"Total price for this line item (quantity  unit_price).","nullable":false},{"name":"tax_amount","type":"double","description":"Tax amount calculated for this specific item.","nullable":false},{"name":"discount_amount","type":"double","description":"Discount applied to this specific item.","nullable":false},{"name":"item_status","type":"string","description":"Status of this specific item (ordered, shipped, delivered, returned).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the order item was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the order item was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","shopping_mall_seller_id"]},{"fieldNames":["shopping_mall_product_variant_id","created_at"]},{"fieldNames":["item_status","created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_order_shipments","description":"Shipment records for order fulfillment. Tracks individual shipments within an order, especially important for multi-seller orders where items ship separately. Includes carrier information and shipping costs. {@link shopping_mall_orders.id}, {@link shopping_mall_sellers.id}","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Parent order being shipped. {@link shopping_mall_orders.id}","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller responsible for this shipment. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"shipment_number","type":"string","description":"Unique shipment identifier for tracking purposes.","nullable":false},{"name":"carrier","type":"string","description":"Shipping carrier used for this shipment (UPS, FedEx, DHL, etc.).","nullable":false},{"name":"tracking_number","type":"string","description":"Carrier-provided tracking number for shipment monitoring.","nullable":false},{"name":"shipping_method","type":"string","description":"Shipping service level (Standard, Express, Overnight).","nullable":false},{"name":"shipping_cost","type":"double","description":"Cost of shipping for this specific shipment.","nullable":false},{"name":"estimated_delivery_date","type":"datetime","description":"Carrier-estimated delivery date for this shipment.","nullable":true},{"name":"actual_delivery_date","type":"datetime","description":"Actual delivery date when shipment was completed.","nullable":true},{"name":"shipment_status","type":"string","description":"Current shipment status (pending, shipped, in_transit, delivered).","nullable":false},{"name":"shipment_weight","type":"double","description":"Total weight of the shipment package.","nullable":true},{"name":"shipment_dimensions","type":"string","description":"Package dimensions (LWH) for shipping calculations.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the shipment was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the shipment was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shipment_number"],"unique":true},{"fieldNames":["tracking_number"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","shopping_mall_seller_id"]},{"fieldNames":["carrier","created_at"]},{"fieldNames":["shipment_status","created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_order_tracking","description":"Historical tracking events for order shipments. Captures all tracking updates from carriers for audit trails and customer communication. Provides complete visibility into shipment progress. {@link shopping_mall_order_shipments.id}","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_shipment_id","type":"uuid","description":"Shipment being tracked. {@link shopping_mall_order_shipments.id}","relation":{"name":"shipment","targetModel":"shopping_mall_order_shipments"},"unique":false,"nullable":false}],"plainFields":[{"name":"tracking_event","type":"string","description":"Description of the tracking event (package received, in transit, out for delivery, delivered).","nullable":false},{"name":"event_location","type":"string","description":"Location where the tracking event occurred.","nullable":true},{"name":"event_timestamp","type":"datetime","description":"Timestamp when the tracking event occurred according to the carrier.","nullable":false},{"name":"event_details","type":"string","description":"Additional details about the tracking event.","nullable":true},{"name":"carrier_status","type":"string","description":"Status code provided by the carrier for this event.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this tracking record was created in the system.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_shipment_id","event_timestamp"]},{"fieldNames":["tracking_event","event_timestamp"]}],"ginIndexes":[{"fieldName":"event_details"}]},{"name":"shopping_mall_order_returns","description":"Return management for order items. Handles the complete return process including return authorization, item receipt, inspection, and refund processing. Supports partial returns for multi-item orders. {@link shopping_mall_orders.id}, {@link shopping_mall_order_items.id}, {@link shopping_mall_customers.id}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Original order being returned. {@link shopping_mall_orders.id}","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_order_item_id","type":"uuid","description":"Specific order item being returned (for partial returns). {@link shopping_mall_order_items.id}","relation":{"name":"orderItem","targetModel":"shopping_mall_order_items"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer requesting the return. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"return_reason","type":"string","description":"Reason for the return (defective, wrong item, changed mind, etc.).","nullable":false},{"name":"return_status","type":"string","description":"Current return status (requested, approved, received, inspected, refunded).","nullable":false},{"name":"return_quantity","type":"int","description":"Quantity of items being returned (for partial returns).","nullable":false},{"name":"refund_amount","type":"double","description":"Amount to be refunded for this return.","nullable":true},{"name":"restocking_fee","type":"double","description":"Restocking fee applied to the return (if applicable).","nullable":true},{"name":"return_instructions","type":"string","description":"Specific instructions for returning the item.","nullable":true},{"name":"return_tracking_number","type":"string","description":"Tracking number for the return shipment.","nullable":true},{"name":"item_condition","type":"string","description":"Condition of the returned item (new, used, damaged).","nullable":true},{"name":"inspection_notes","type":"string","description":"Notes from the inspection of returned items.","nullable":true},{"name":"refund_processed_date","type":"datetime","description":"Date when the refund was processed.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the return was requested.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the return was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["return_tracking_number"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","return_status"]},{"fieldNames":["shopping_mall_customer_id","created_at"]},{"fieldNames":["return_status","created_at"]}],"ginIndexes":[{"fieldName":"return_reason"}]},{"name":"shopping_mall_order_cancellations","description":"Historical record of order cancellations. Preserves cancellation details for audit trails, analytics, and customer service. Captures cancellation reasons and timestamps for compliance. {@link shopping_mall_orders.id}, {@link shopping_mall_customers.id}","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order that was cancelled. {@link shopping_mall_orders.id}","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":true,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who requested the cancellation. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"cancellation_reason","type":"string","description":"Reason for order cancellation (customer_request, payment_failed, out_of_stock).","nullable":false},{"name":"cancellation_type","type":"string","description":"Type of cancellation (full, partial, before_shipment, after_shipment).","nullable":false},{"name":"refund_amount","type":"double","description":"Amount refunded due to cancellation.","nullable":true},{"name":"cancellation_fee","type":"double","description":"Fee applied for the cancellation (if applicable).","nullable":true},{"name":"cancellation_notes","type":"string","description":"Additional notes about the cancellation.","nullable":true},{"name":"cancelled_by","type":"string","description":"Who initiated the cancellation (customer, seller, admin).","nullable":false},{"name":"cancellation_timestamp","type":"datetime","description":"Exact timestamp when the cancellation occurred.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the cancellation record was created.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_id"]},{"fieldNames":["shopping_mall_customer_id","cancellation_timestamp"]},{"fieldNames":["cancellation_type","cancellation_timestamp"]}],"ginIndexes":[{"fieldName":"cancellation_reason"}]}]},{"filename":"schema-07-payments.prisma","namespace":"Payments","models":[{"name":"shopping_mall_payments","description":"Primary payment records linking orders to financial transactions. Stores payment authorization, capture, and settlement details for complete payment lifecycle tracking. Each payment record represents a financial commitment against an order, supporting multiple payment methods and maintaining PCI DSS compliance through secure data handling.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Associated order for this payment. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who authorized this payment. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"payment_method_type","type":"string","description":"Type of payment method used (credit_card, debit_card, paypal, bank_transfer, etc.)","nullable":false},{"name":"amount","type":"double","description":"Total payment amount in base currency.","nullable":false},{"name":"currency","type":"string","description":"Currency code in ISO 4217 format (USD, EUR, GBP, etc.)","nullable":false},{"name":"status","type":"string","description":"Current payment status (pending, authorized, captured, settled, failed, refunded, disputed).","nullable":false},{"name":"payment_gateway_transaction_id","type":"string","description":"External payment gateway transaction identifier for reconciliation.","nullable":true},{"name":"authorized_at","type":"datetime","description":"Timestamp when payment was authorized by the payment gateway.","nullable":true},{"name":"captured_at","type":"datetime","description":"Timestamp when authorized funds were captured for settlement.","nullable":true},{"name":"settled_at","type":"datetime","description":"Timestamp when payment was fully settled and funds transferred.","nullable":true},{"name":"failure_reason","type":"string","description":"Detailed reason for payment failure if applicable.","nullable":true},{"name":"security_token","type":"string","description":"Secure token representing payment instrument for PCI DSS compliance.","nullable":true},{"name":"gateway_response_code","type":"string","description":"Payment gateway response code for debugging and error handling.","nullable":true},{"name":"gateway_response_message","type":"string","description":"Human-readable response message from payment gateway.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when payment record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when payment record was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when payment record was soft deleted for audit purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","payment_method_type"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["status"]},{"fieldNames":["created_at"]},{"fieldNames":["payment_method_type"]}],"ginIndexes":[{"fieldName":"gateway_response_message"}]},{"name":"shopping_mall_payment_transactions","description":"Individual transaction events within the payment lifecycle. Tracks each discrete financial operation including authorization attempts, captures, voids, and settlement adjustments. Provides granular audit trail for payment processing and dispute resolution.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payment_id","type":"uuid","description":"Parent payment record this transaction belongs to. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":false}],"plainFields":[{"name":"transaction_type","type":"string","description":"Type of transaction (authorize, capture, void, refund, settlement, adjustment).","nullable":false},{"name":"amount","type":"double","description":"Transaction amount in base currency.","nullable":false},{"name":"currency","type":"string","description":"Currency code in ISO 4217 format.","nullable":false},{"name":"gateway_transaction_id","type":"string","description":"External payment gateway identifier for this specific transaction.","nullable":true},{"name":"status","type":"string","description":"Transaction processing status (pending, processing, completed, failed, cancelled).","nullable":false},{"name":"gateway_request_payload","type":"string","description":"Complete request payload sent to payment gateway for audit purposes.","nullable":true},{"name":"gateway_response_payload","type":"string","description":"Complete response payload received from payment gateway for audit.","nullable":true},{"name":"error_code","type":"string","description":"Error code returned by payment gateway if transaction failed.","nullable":true},{"name":"error_message","type":"string","description":"Detailed error message from payment gateway for debugging.","nullable":true},{"name":"processed_at","type":"datetime","description":"Timestamp when transaction was processed by payment gateway.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when transaction record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when transaction record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["gateway_transaction_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_payment_id"]},{"fieldNames":["transaction_type"]},{"fieldNames":["status"]},{"fieldNames":["processed_at"]}],"ginIndexes":[{"fieldName":"error_message"}]},{"name":"shopping_mall_refunds","description":"Refund records for processing customer reimbursements. Tracks refund requests, approvals, processing, and completion with full audit trail. Supports partial refunds, restocking fee calculations, and integration with inventory management.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payment_id","type":"uuid","description":"Original payment being refunded. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":false},{"name":"shopping_mall_order_id","type":"uuid","description":"Associated order for this refund. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer receiving the refund. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"refund_reason","type":"string","description":"Reason for refund request (return, cancellation, defect, price adjustment, etc.)","nullable":false},{"name":"refund_amount","type":"double","description":"Total refund amount being processed.","nullable":false},{"name":"currency","type":"string","description":"Currency code in ISO 4217 format.","nullable":false},{"name":"refund_method","type":"string","description":"Method used for refund (original_payment_method, store_credit, bank_transfer, etc.)","nullable":false},{"name":"status","type":"string","description":"Refund processing status (requested, approved, processing, completed, failed, cancelled).","nullable":false},{"name":"approver_id","type":"uuid","description":"Administrator or seller who approved the refund request.","nullable":true},{"name":"approved_at","type":"datetime","description":"Timestamp when refund was approved for processing.","nullable":true},{"name":"processed_at","type":"datetime","description":"Timestamp when refund was processed by payment gateway.","nullable":true},{"name":"gateway_refund_id","type":"string","description":"External payment gateway identifier for this refund transaction.","nullable":true},{"name":"restocking_fee","type":"double","description":"Amount deducted as restocking fee if applicable.","nullable":true},{"name":"shipping_cost_refund","type":"double","description":"Amount of shipping costs being refunded.","nullable":true},{"name":"notes","type":"string","description":"Additional notes or instructions for refund processing.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when refund record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when refund record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["gateway_refund_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_payment_id"]},{"fieldNames":["shopping_mall_order_id"]},{"fieldNames":["status"]},{"fieldNames":["created_at"]},{"fieldNames":["refund_reason"]}],"ginIndexes":[{"fieldName":"notes"}]},{"name":"shopping_mall_chargebacks","description":"Chargeback dispute records for managing payment disputes initiated by customers through their financial institutions. Tracks dispute lifecycle, evidence submission, resolution outcomes, and financial impact analysis.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payment_id","type":"uuid","description":"Payment being disputed through chargeback. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":false},{"name":"shopping_mall_order_id","type":"uuid","description":"Associated order for this chargeback. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who initiated the chargeback. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"chargeback_reason","type":"string","description":"Reason code for chargeback (fraud, unauthorized, duplicate, product_not_received, etc.)","nullable":false},{"name":"chargeback_amount","type":"double","description":"Amount being disputed through chargeback.","nullable":false},{"name":"currency","type":"string","description":"Currency code in ISO 4217 format.","nullable":false},{"name":"dispute_case_id","type":"string","description":"External dispute case identifier from payment processor or bank.","nullable":true},{"name":"status","type":"string","description":"Chargeback status (received, under_review, evidence_submitted, won, lost, settled).","nullable":false},{"name":"received_date","type":"datetime","description":"Date when chargeback was received from payment processor.","nullable":false},{"name":"response_deadline","type":"datetime","description":"Deadline for submitting evidence to dispute the chargeback.","nullable":false},{"name":"evidence_submitted_at","type":"datetime","description":"Timestamp when dispute evidence was submitted.","nullable":true},{"name":"resolution_date","type":"datetime","description":"Date when chargeback was resolved by payment processor.","nullable":true},{"name":"resolution_outcome","type":"string","description":"Final outcome of chargeback dispute (merchant_won, merchant_lost, settled).","nullable":true},{"name":"chargeback_fee","type":"double","description":"Fee charged by payment processor for handling the chargeback.","nullable":true},{"name":"evidence_documentation","type":"string","description":"Summary of evidence submitted to dispute the chargeback.","nullable":true},{"name":"resolution_notes","type":"string","description":"Notes about the resolution process and outcome.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when chargeback record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when chargeback record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["dispute_case_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_payment_id"]},{"fieldNames":["status"]},{"fieldNames":["received_date"]},{"fieldNames":["response_deadline"]},{"fieldNames":["chargeback_reason"]}],"ginIndexes":[{"fieldName":"evidence_documentation"}]},{"name":"shopping_mall_payment_methods","description":"Customer payment method preferences and securely stored payment instruments. Maintains PCI DSS compliant tokenized payment data with customer preferences for recurring payments and checkout optimization.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who owns this payment method. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"payment_method_type","type":"string","description":"Type of payment instrument (credit_card, debit_card, paypal, bank_account, etc.)","nullable":false},{"name":"display_name","type":"string","description":"Customer-friendly display name for this payment method.","nullable":false},{"name":"is_default","type":"boolean","description":"Whether this is the customer's default payment method for checkout.","nullable":false},{"name":"payment_token","type":"string","description":"Secure token representing the payment instrument for PCI DSS compliance.","nullable":false},{"name":"gateway_customer_id","type":"string","description":"External payment gateway identifier for the customer profile.","nullable":true},{"name":"gateway_payment_method_id","type":"string","description":"External payment gateway identifier for this specific payment method.","nullable":true},{"name":"last_four_digits","type":"string","description":"Last four digits of payment instrument for display purposes (e.g., 4242 for credit card).","nullable":true},{"name":"expiry_month","type":"int","description":"Expiration month for card-based payment methods.","nullable":true},{"name":"expiry_year","type":"int","description":"Expiration year for card-based payment methods.","nullable":true},{"name":"billing_address_line1","type":"string","description":"First line of billing address associated with this payment method.","nullable":true},{"name":"billing_address_city","type":"string","description":"City for billing address.","nullable":true},{"name":"billing_address_state","type":"string","description":"State or province for billing address.","nullable":true},{"name":"billing_address_postal_code","type":"string","description":"Postal code for billing address.","nullable":true},{"name":"billing_address_country","type":"string","description":"Country for billing address in ISO 3166-1 alpha-2 format.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether this payment method is currently active and usable.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when payment method record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when payment method record was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when payment method was soft deleted for audit purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["payment_token"],"unique":true},{"fieldNames":["shopping_mall_customer_id","is_default"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["payment_method_type"]},{"fieldNames":["is_active"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"display_name"}]}]},{"filename":"schema-08-reviews.prisma","namespace":"Reviews","models":[{"name":"shopping_mall_reviews","description":"Customer reviews for products and sellers. Stores detailed feedback including title, content, and verification status. Reviews are linked to specific purchases to ensure authenticity and prevent fake reviews. {@link shopping_mall_products.id} {@link shopping_mall_customers.id}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who wrote the review. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_product_id","type":"uuid","description":"Product being reviewed. {@link shopping_mall_products.id}","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller of the product being reviewed. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Review title summarizing the customer feedback.","nullable":false},{"name":"content","type":"string","description":"Detailed review content describing the customer experience.","nullable":false},{"name":"is_verified_purchase","type":"boolean","description":"Whether the review is from a verified purchase. Prevents fake reviews.","nullable":false},{"name":"helpful_votes","type":"int","description":"Number of users who found this review helpful.","nullable":false},{"name":"report_count","type":"int","description":"Number of times this review has been reported for abuse.","nullable":false},{"name":"status","type":"string","description":"Review status: pending, approved, rejected, flagged. Enables moderation workflow.","nullable":false},{"name":"created_at","type":"datetime","description":"When the review was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the review was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"When the review was soft deleted, if applicable.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_customer_id","shopping_mall_product_id"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["shopping_mall_seller_id"]},{"fieldNames":["created_at"]},{"fieldNames":["helpful_votes"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"content"}]},{"name":"shopping_mall_ratings","description":"Numerical ratings (1-5 stars) for products and sellers. Supports detailed rating breakdown by category when products have specific attributes. {@link shopping_mall_reviews.id} {@link shopping_mall_products.id} {@link shopping_mall_sellers.id}","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Associated review that contains this rating. {@link shopping_mall_reviews.id}","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":true,"nullable":false},{"name":"shopping_mall_product_id","type":"uuid","description":"Product being rated. {@link shopping_mall_products.id}","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller being rated. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"overall_rating","type":"int","description":"Overall rating from 1 to 5 stars.","nullable":false},{"name":"quality_rating","type":"int","description":"Specific rating for product quality, if applicable.","nullable":true},{"name":"value_rating","type":"int","description":"Specific rating for value for money, if applicable.","nullable":true},{"name":"service_rating","type":"int","description":"Specific rating for seller service, if applicable.","nullable":true},{"name":"delivery_rating","type":"int","description":"Specific rating for delivery experience, if applicable.","nullable":true},{"name":"created_at","type":"datetime","description":"When the rating was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the rating was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id"],"unique":true}],"plainIndexes":[{"fieldNames":["overall_rating"]},{"fieldNames":["shopping_mall_product_id"]},{"fieldNames":["shopping_mall_seller_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_review_comments","description":"Comments and responses on reviews, including seller responses and customer follow-up comments. Enables discussion and clarification around reviews. {@link shopping_mall_reviews.id} {@link shopping_mall_customers.id} {@link shopping_mall_sellers.id}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Parent review being commented on. {@link shopping_mall_reviews.id}","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer who wrote the comment, if applicable. {@link shopping_mall_customers.id}","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller who wrote the response, if applicable. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true},{"name":"parent_comment_id","type":"uuid","description":"Parent comment for threaded discussions, if applicable. {@link shopping_mall_review_comments.id}","relation":{"name":"parent","targetModel":"shopping_mall_review_comments","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"content","type":"string","description":"Comment content text.","nullable":false},{"name":"is_seller_response","type":"boolean","description":"Whether this comment is an official seller response.","nullable":false},{"name":"helpful_votes","type":"int","description":"Number of users who found this comment helpful.","nullable":false},{"name":"report_count","type":"int","description":"Number of times this comment has been reported for abuse.","nullable":false},{"name":"status","type":"string","description":"Comment status: pending, approved, rejected, flagged.","nullable":false},{"name":"created_at","type":"datetime","description":"When the comment was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the comment was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"When the comment was soft deleted, if applicable.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_review_id"]},{"fieldNames":["is_seller_response"]},{"fieldNames":["status"]},{"fieldNames":["created_at"]},{"fieldNames":["parent_comment_id"]}],"ginIndexes":[{"fieldName":"content"}]},{"name":"shopping_mall_review_moderation","description":"Review and comment moderation workflow tracking. Records moderation actions, automated flags, and manual review decisions. {@link shopping_mall_reviews.id} {@link shopping_mall_review_comments.id} {@link shopping_mall_administrators.id}","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Review being moderated, if applicable. {@link shopping_mall_reviews.id}","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":false,"nullable":true},{"name":"shopping_mall_review_comment_id","type":"uuid","description":"Comment being moderated, if applicable. {@link shopping_mall_review_comments.id}","relation":{"name":"comment","targetModel":"shopping_mall_review_comments"},"unique":false,"nullable":true},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Administrator who performed the moderation, if manual. {@link shopping_mall_administrators.id}","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"moderation_type","type":"string","description":"Type of moderation: automated, manual, appeal, escalation.","nullable":false},{"name":"action_taken","type":"string","description":"Action taken: approve, reject, flag, edit, delete.","nullable":false},{"name":"reason","type":"string","description":"Reason for the moderation action.","nullable":false},{"name":"automated_flag_reason","type":"string","description":"Specific automated flag reason if applicable (profanity, spam, etc.).","nullable":true},{"name":"is_appealed","type":"boolean","description":"Whether this moderation decision has been appealed.","nullable":false},{"name":"appeal_resolution","type":"string","description":"Resolution of any appeal: overturned, upheld, modified.","nullable":true},{"name":"created_at","type":"datetime","description":"When the moderation action was recorded.","nullable":false},{"name":"resolved_at","type":"datetime","description":"When the moderation was resolved, if applicable.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["moderation_type"]},{"fieldNames":["action_taken"]},{"fieldNames":["created_at"]},{"fieldNames":["shopping_mall_review_id","shopping_mall_review_comment_id"]}],"ginIndexes":[{"fieldName":"reason"},{"fieldName":"automated_flag_reason"}]}]},{"filename":"schema-09-inventory.prisma","namespace":"Inventory","models":[{"name":"shopping_mall_inventory","description":"Core inventory management system tracking SKU-level stock quantities, locations, and supplier relationships. This table maintains real-time inventory visibility across all product variants and supports multi-location inventory management with automatic low-stock alerts and reorder point tracking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_variant_id","type":"uuid","description":"Associated product variant for inventory tracking. {@link shopping_mall_product_variants.id}","relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"unique":false,"nullable":false},{"name":"shopping_mall_inventory_location_id","type":"uuid","description":"Physical storage location for this inventory item. {@link shopping_mall_inventory_locations.id}","relation":{"name":"location","targetModel":"shopping_mall_inventory_locations"},"unique":false,"nullable":false},{"name":"shopping_mall_supplier_id","type":"uuid","description":"Primary supplier for this inventory item. {@link shopping_mall_suppliers.id}","relation":{"name":"supplier","targetModel":"shopping_mall_suppliers"},"unique":false,"nullable":true}],"plainFields":[{"name":"current_quantity","type":"int","description":"Real-time available stock quantity for this SKU.","nullable":false},{"name":"reserved_quantity","type":"int","description":"Quantity reserved for pending orders but not yet shipped.","nullable":false},{"name":"minimum_stock_level","type":"int","description":"Minimum threshold that triggers low-stock alerts.","nullable":false},{"name":"maximum_stock_level","type":"int","description":"Maximum capacity for this inventory item.","nullable":false},{"name":"reorder_point","type":"int","description":"Stock level at which automatic reordering should occur.","nullable":false},{"name":"stock_status","type":"string","description":"Current inventory status (in_stock, low_stock, out_of_stock, backordered).","nullable":false},{"name":"allow_backorders","type":"boolean","description":"Whether backorders are allowed when stock is depleted.","nullable":false},{"name":"cost_price","type":"double","description":"Per-unit cost price for inventory valuation.","nullable":false},{"name":"last_restocked_at","type":"datetime","description":"Timestamp of last inventory replenishment.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for audit purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_variant_id","shopping_mall_inventory_location_id"],"unique":true}],"plainIndexes":[{"fieldNames":["stock_status"]},{"fieldNames":["current_quantity"]},{"fieldNames":["last_restocked_at"]},{"fieldNames":["shopping_mall_supplier_id"]}],"ginIndexes":[]},{"name":"shopping_mall_inventory_locations","description":"Physical storage locations for inventory management, supporting multi-location warehouse operations. This includes warehouse zones, shelves, bins, and other storage organizational structures with capacity tracking.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_location_id","type":"uuid","description":"Parent location for hierarchical organization (zones within warehouses). {@link shopping_mall_inventory_locations.id}","relation":{"name":"parent","targetModel":"shopping_mall_inventory_locations","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"location_code","type":"string","description":"Unique identifier code for this location (e.g., WH-A-ZONE1-BIN5).","nullable":false},{"name":"location_name","type":"string","description":"Descriptive name for the location (e.g., Main Warehouse - Zone A).","nullable":false},{"name":"location_type","type":"string","description":"Type of location (warehouse, store, distribution_center, returns).","nullable":false},{"name":"address_line_1","type":"string","description":"Primary address line for physical location.","nullable":true},{"name":"address_line_2","type":"string","description":"Secondary address line for physical location.","nullable":true},{"name":"city","type":"string","description":"City where location is situated.","nullable":true},{"name":"state","type":"string","description":"State or province for location address.","nullable":true},{"name":"postal_code","type":"string","description":"Postal or ZIP code for location.","nullable":true},{"name":"country","type":"string","description":"Country code for location address.","nullable":true},{"name":"contact_phone","type":"string","description":"Contact phone number for location management.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether this location is currently active for inventory operations.","nullable":false},{"name":"capacity_limit","type":"int","description":"Maximum inventory capacity for this location.","nullable":true},{"name":"current_utilization","type":"int","description":"Current inventory quantity in this location.","nullable":false},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for location deactivation.","nullable":true}],"uniqueIndexes":[{"fieldNames":["location_code"],"unique":true}],"plainIndexes":[{"fieldNames":["location_type"]},{"fieldNames":["is_active"]},{"fieldNames":["country","state"]},{"fieldNames":["current_utilization"]}],"ginIndexes":[{"fieldName":"location_name"}]},{"name":"shopping_mall_stock_movements","description":"Complete audit trail of all inventory transactions and stock movements. This snapshot table records every inventory change for auditing, reporting, and historical analysis purposes, including purchases, sales, adjustments, and transfers.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"Inventory item affected by this movement. {@link shopping_mall_inventory.id}","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"shopping_mall_order_id","type":"uuid","description":"Associated order if movement is related to sales. {@link shopping_mall_orders.id}","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":true},{"name":"source_location_id","type":"uuid","description":"Source location for transfers. {@link shopping_mall_inventory_locations.id}","relation":{"name":"sourceLocation","targetModel":"shopping_mall_inventory_locations","mappingName":"shopping_mall_stock_movements_of_source_location_id"},"unique":false,"nullable":true},{"name":"destination_location_id","type":"uuid","description":"Destination location for transfers. {@link shopping_mall_inventory_locations.id}","relation":{"name":"destinationLocation","targetModel":"shopping_mall_inventory_locations","mappingName":"shopping_mall_stock_movements_of_destination_location_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"movement_type","type":"string","description":"Type of stock movement (purchase, sale, adjustment, transfer, return).","nullable":false},{"name":"quantity_change","type":"int","description":"Net quantity change (positive for additions, negative for deductions).","nullable":false},{"name":"previous_quantity","type":"int","description":"Stock quantity before this movement occurred.","nullable":false},{"name":"new_quantity","type":"int","description":"Stock quantity after this movement was applied.","nullable":false},{"name":"reference_number","type":"string","description":"External reference number (PO number, adjustment code, etc.).","nullable":true},{"name":"reason_code","type":"string","description":"Reason code for the movement (damage, count_error, etc.).","nullable":true},{"name":"unit_cost","type":"double","description":"Cost per unit at time of movement for valuation.","nullable":true},{"name":"total_value","type":"double","description":"Total monetary value of this movement.","nullable":true},{"name":"movement_date","type":"datetime","description":"Effective date of the stock movement.","nullable":false},{"name":"processed_by","type":"string","description":"Identifier of person/system that processed this movement.","nullable":true},{"name":"notes","type":"string","description":"Additional notes or comments about this movement.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["movement_type"]},{"fieldNames":["movement_date"]},{"fieldNames":["shopping_mall_inventory_id","movement_date"]},{"fieldNames":["reference_number"]},{"fieldNames":["reason_code"]}],"ginIndexes":[]},{"name":"shopping_mall_inventory_alerts","description":"Automated alert system for inventory management, tracking low stock levels, expiration dates, and other inventory-related notifications. This system ensures timely replenishment and prevents stockouts through configurable alert thresholds.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"Inventory item that triggered this alert. {@link shopping_mall_inventory.id}","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller who owns the inventory item. {@link shopping_mall_sellers.id}","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"alert_type","type":"string","description":"Type of alert (low_stock, out_of_stock, overstock, expiration).","nullable":false},{"name":"alert_severity","type":"string","description":"Severity level (info, warning, critical, emergency).","nullable":false},{"name":"trigger_quantity","type":"int","description":"Stock quantity that triggered this alert.","nullable":false},{"name":"threshold_quantity","type":"int","description":"Configured threshold quantity for this alert type.","nullable":false},{"name":"alert_message","type":"string","description":"Detailed alert message with context and recommendations.","nullable":false},{"name":"is_acknowledged","type":"boolean","description":"Whether this alert has been acknowledged by responsible party.","nullable":false},{"name":"acknowledged_by","type":"string","description":"User who acknowledged this alert.","nullable":true},{"name":"acknowledged_at","type":"datetime","description":"Timestamp when alert was acknowledged.","nullable":true},{"name":"is_resolved","type":"boolean","description":"Whether the underlying issue has been resolved.","nullable":false},{"name":"resolved_by","type":"string","description":"User who resolved this alert.","nullable":true},{"name":"resolved_at","type":"datetime","description":"Timestamp when alert was resolved.","nullable":true},{"name":"resolution_notes","type":"string","description":"Notes about how the alert was resolved.","nullable":true},{"name":"notification_sent","type":"boolean","description":"Whether notification has been sent to relevant parties.","nullable":false},{"name":"last_notification_sent_at","type":"datetime","description":"Timestamp of last notification attempt.","nullable":true},{"name":"created_at","type":"datetime","description":"Alert creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["alert_type"]},{"fieldNames":["alert_severity"]},{"fieldNames":["is_acknowledged"]},{"fieldNames":["is_resolved"]},{"fieldNames":["shopping_mall_seller_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_suppliers","description":"Supplier management system for inventory procurement, tracking vendor relationships, contact information, performance metrics, and procurement terms. This enables efficient supplier management and ensures reliable inventory supply chain operations.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"supplier_code","type":"string","description":"Unique supplier identifier code for internal reference.","nullable":false},{"name":"company_name","type":"string","description":"Legal company name of the supplier.","nullable":false},{"name":"contact_name","type":"string","description":"Primary contact person at the supplier.","nullable":true},{"name":"contact_email","type":"string","description":"Primary contact email address.","nullable":false},{"name":"contact_phone","type":"string","description":"Primary contact phone number.","nullable":true},{"name":"website","type":"uri","description":"Supplier company website URL.","nullable":true},{"name":"address_line_1","type":"string","description":"Primary business address line.","nullable":false},{"name":"address_line_2","type":"string","description":"Secondary business address line.","nullable":true},{"name":"city","type":"string","description":"City of business location.","nullable":false},{"name":"state","type":"string","description":"State or province of business location.","nullable":false},{"name":"postal_code","type":"string","description":"Postal or ZIP code of business location.","nullable":false},{"name":"country","type":"string","description":"Country of business location.","nullable":false},{"name":"tax_id","type":"string","description":"Business tax identification number.","nullable":true},{"name":"payment_terms","type":"string","description":"Standard payment terms (Net 30, Net 60, etc.).","nullable":true},{"name":"lead_time_days","type":"int","description":"Average lead time for order fulfillment in days.","nullable":false},{"name":"minimum_order_amount","type":"double","description":"Minimum order amount required by supplier.","nullable":true},{"name":"supplier_rating","type":"double","description":"Performance rating based on delivery and quality metrics.","nullable":true},{"name":"is_active","type":"boolean","description":"Whether this supplier is currently active for procurement.","nullable":false},{"name":"preferred_supplier","type":"boolean","description":"Whether this supplier is preferred for automatic ordering.","nullable":false},{"name":"notes","type":"string","description":"Additional notes or comments about the supplier.","nullable":true},{"name":"created_at","type":"datetime","description":"Record creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last update timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for supplier deactivation.","nullable":true}],"uniqueIndexes":[{"fieldNames":["supplier_code"],"unique":true},{"fieldNames":["contact_email"],"unique":true}],"plainIndexes":[{"fieldNames":["company_name"]},{"fieldNames":["country","state"]},{"fieldNames":["is_active"]},{"fieldNames":["preferred_supplier"]},{"fieldNames":["supplier_rating"]}],"ginIndexes":[]}]},{"filename":"schema-10-admin.prisma","namespace":"Admin","models":[{"name":"shopping_mall_admin_logs","description":"Comprehensive logging of all administrative actions and system events. Maintains audit trail for compliance, security monitoring, and troubleshooting. Each log entry captures user actions, system events, and contextual data for complete oversight. {@link shopping_mall_administrators.id}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"admin_id","type":"uuid","description":"Administrator who performed the action. {@link shopping_mall_administrators.id}","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"action_type","type":"string","description":"Type of administrative action performed (e.g., user_management, system_config, security_change).","nullable":false},{"name":"description","type":"string","description":"Detailed description of the action performed and context.","nullable":false},{"name":"ip_address","type":"string","description":"IP address from which the action was performed for security tracking.","nullable":false},{"name":"user_agent","type":"string","description":"User agent string of the client browser/device for forensic analysis.","nullable":true},{"name":"resource_type","type":"string","description":"Type of resource affected by the action (e.g., user, product, order, system).","nullable":false},{"name":"resource_id","type":"string","description":"Identifier of the affected resource (flexible format for different entity types).","nullable":true},{"name":"status","type":"string","description":"Status of the action (success, failed, pending, error).","nullable":false},{"name":"error_details","type":"string","description":"Error message or stack trace if the action failed.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the log entry was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the log entry was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["admin_id","created_at"]},{"fieldNames":["action_type","created_at"]},{"fieldNames":["resource_type","resource_id"]},{"fieldNames":["status","created_at"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"shopping_mall_system_audits","description":"System-wide audit records for compliance, security, and operational oversight. Captures significant system events, configuration changes, and security incidents. Provides comprehensive audit trail for regulatory requirements. {@link shopping_mall_administrators.id}","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"initiated_by","type":"uuid","description":"Administrator who initiated the audit or system change. {@link shopping_mall_administrators.id}","relation":{"name":"initiator","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_system_audits_of_initiated_by"},"unique":false,"nullable":true},{"name":"approved_by","type":"uuid","description":"Administrator who approved the audit or change if required. {@link shopping_mall_administrators.id}","relation":{"name":"approver","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_system_audits_of_approved_by"},"unique":false,"nullable":true}],"plainFields":[{"name":"audit_type","type":"string","description":"Type of audit or system event (security_breach, config_change, compliance_check).","nullable":false},{"name":"severity_level","type":"string","description":"Severity level of the audit event (critical, high, medium, low, info).","nullable":false},{"name":"description","type":"string","description":"Detailed description of the audit event and its impact.","nullable":false},{"name":"affected_components","type":"string","description":"Comma-separated list of system components affected by the event.","nullable":false},{"name":"pre_change_state","type":"string","description":"JSON representation of the system state before the change.","nullable":true},{"name":"post_change_state","type":"string","description":"JSON representation of the system state after the change.","nullable":true},{"name":"review_status","type":"string","description":"Current status of the audit review (pending, in_review, completed, escalated).","nullable":false},{"name":"resolution_details","type":"string","description":"Details of how the audit event was resolved or mitigated.","nullable":true},{"name":"compliance_standard","type":"string","description":"Relevant compliance standard (GDPR, PCI_DSS, HIPAA, etc.).","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the audit record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the audit record was last updated.","nullable":false},{"name":"reviewed_at","type":"datetime","description":"Timestamp when the audit was reviewed by appropriate personnel.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["audit_type","created_at"]},{"fieldNames":["severity_level","created_at"]},{"fieldNames":["review_status","created_at"]},{"fieldNames":["compliance_standard","created_at"]},{"fieldNames":["created_at"]},{"fieldNames":["initiated_by","created_at"]}],"ginIndexes":[{"fieldName":"description"},{"fieldName":"affected_components"}]},{"name":"shopping_mall_performance_metrics","description":"Comprehensive performance monitoring and analytics data. Tracks platform performance, user engagement, and business metrics for operational insights and capacity planning.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"metric_name","type":"string","description":"Name of the performance metric being tracked (e.g., response_time, conversion_rate).","nullable":false},{"name":"metric_category","type":"string","description":"Category of the metric (system_performance, business_kpi, user_engagement).","nullable":false},{"name":"metric_value","type":"double","description":"Numerical value of the metric measurement.","nullable":false},{"name":"metric_unit","type":"string","description":"Unit of measurement for the metric value (ms, percent, count, etc.).","nullable":false},{"name":"measurement_interval","type":"string","description":"Time interval for the measurement (minute, hour, day, week, month).","nullable":false},{"name":"threshold_min","type":"double","description":"Minimum acceptable threshold for this metric.","nullable":true},{"name":"threshold_max","type":"double","description":"Maximum acceptable threshold for this metric.","nullable":true},{"name":"status","type":"string","description":"Status based on thresholds (normal, warning, critical).","nullable":false},{"name":"component","type":"string","description":"System component being measured (api_gateway, database, payment_processor).","nullable":true},{"name":"data_source","type":"string","description":"Source of the metric data (system_monitoring, analytics, manual_entry).","nullable":false},{"name":"measurement_period_start","type":"datetime","description":"Start timestamp of the measurement period.","nullable":false},{"name":"measurement_period_end","type":"datetime","description":"End timestamp of the measurement period.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the metric record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the metric record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["metric_name","measurement_period_start","measurement_period_end"],"unique":true}],"plainIndexes":[{"fieldNames":["metric_category","measurement_period_start"]},{"fieldNames":["status","measurement_period_start"]},{"fieldNames":["component","measurement_period_start"]},{"fieldNames":["measurement_period_start"]},{"fieldNames":["metric_name","measurement_period_start"]}],"ginIndexes":[]},{"name":"shopping_mall_security_settings","description":"Centralized security configuration and policy management. Controls platform-wide security settings, authentication requirements, and access policies. Maintains version history for audit compliance.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"last_modified_by","type":"uuid","description":"Administrator who last modified the security settings. {@link shopping_mall_administrators.id}","relation":{"name":"modifier","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"setting_name","type":"string","description":"Unique identifier for the security setting configuration.","nullable":false},{"name":"setting_category","type":"string","description":"Category of security setting (authentication, authorization, encryption, monitoring).","nullable":false},{"name":"setting_value","type":"string","description":"Current value of the security setting (JSON format for complex configurations).","nullable":false},{"name":"setting_description","type":"string","description":"Human-readable description of the security setting and its purpose.","nullable":false},{"name":"data_type","type":"string","description":"Data type of the setting value (boolean, integer, string, json, array).","nullable":false},{"name":"is_enabled","type":"boolean","description":"Whether this security setting is currently active and enforced.","nullable":false},{"name":"version","type":"int","description":"Version number of the security setting configuration.","nullable":false},{"name":"change_reason","type":"string","description":"Reason for the most recent change to this security setting.","nullable":true},{"name":"effective_from","type":"datetime","description":"Timestamp when these settings become effective.","nullable":false},{"name":"effective_until","type":"datetime","description":"Timestamp when these settings expire (null for indefinite).","nullable":true},{"name":"requires_approval","type":"boolean","description":"Whether changes to this setting require additional approval.","nullable":false},{"name":"approval_status","type":"string","description":"Current approval status for pending changes (pending, approved, rejected).","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the security setting was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the security setting was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["setting_name","version"],"unique":true}],"plainIndexes":[{"fieldNames":["setting_category","is_enabled"]},{"fieldNames":["is_enabled","effective_from"]},{"fieldNames":["requires_approval","approval_status"]},{"fieldNames":["effective_from"]},{"fieldNames":["last_modified_by","updated_at"]}],"ginIndexes":[{"fieldName":"setting_description"}]}]}]}
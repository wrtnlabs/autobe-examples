{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"shopping_mall_categories","description":"Stores platform-wide product categories that organize the shopping mall's inventory structure with hierarchical relationships. These categories provide the organizational framework for products and enhance product discovery.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","description":"Optional parent category for hierarchical organization. {@link shopping_mall_categories.id}.","relation":{"name":"parent","targetModel":"shopping_mall_categories","mappingName":"recursive"},"unique":false,"nullable":true},{"name":"creator_admin_id","type":"uuid","description":"Administrator who created this category. {@link shopping_mall_administrators.id}.","relation":{"name":"creator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"name","type":"string","description":"Category name that identifies this product category in the shopping mall.","nullable":false},{"name":"description","type":"string","description":"Detailed description explaining the purpose and scope of this product category.","nullable":true},{"name":"slug","type":"string","description":"URL-friendly version of the category name used in product navigation.","nullable":false},{"name":"display_order","type":"int","description":"Integer value determining the display order of this category in navigation.","nullable":false},{"name":"is_active","type":"boolean","description":"Flag indicating whether this category is currently visible to customers.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this category was created in the system.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this category was last modified.","nullable":false}],"uniqueIndexes":[{"fieldNames":["slug"],"unique":true},{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active","display_order"]},{"fieldNames":["parent_id"]}],"ginIndexes":[]},{"name":"shopping_mall_category_hierarchy","description":"Represents the hierarchical relationships between shopping mall categories, enabling multi-level category structures. This table supports category nesting and tree-like organizational patterns.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"ancestor_id","type":"uuid","description":"The ancestor category in the hierarchy relationship. {@link shopping_mall_categories.id}.","relation":{"name":"ancestor","targetModel":"shopping_mall_categories","mappingName":"shopping_mall_category_hierarchy_of_ancestor_id"},"unique":false,"nullable":false},{"name":"descendant_id","type":"uuid","description":"The descendant category in the hierarchy relationship. {@link shopping_mall_categories.id}.","relation":{"name":"descendant","targetModel":"shopping_mall_categories","mappingName":"shopping_mall_category_hierarchy_of_descendant_id"},"unique":false,"nullable":false},{"name":"relation_creator_id","type":"uuid","description":"Administrator who established this hierarchical relationship. {@link shopping_mall_administrators.id}.","relation":{"name":"creator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"depth","type":"int","description":"The level of separation between ancestor and descendant categories in the hierarchy.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this hierarchical relationship was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this hierarchical relationship was last modified.","nullable":false}],"uniqueIndexes":[{"fieldNames":["ancestor_id","descendant_id"],"unique":true}],"plainIndexes":[{"fieldNames":["ancestor_id"]},{"fieldNames":["descendant_id"]},{"fieldNames":["depth"]}],"ginIndexes":[]},{"name":"shopping_mall_platform_settings","description":"Stores configurable platform-wide settings for the shopping mall e-commerce system. These settings control global platform behavior, policies, and operational parameters.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"updated_by_admin_id","type":"uuid","description":"Administrator who last modified these platform settings. {@link shopping_mall_administrators.id}.","relation":{"name":"updatedBy","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"setting_key","type":"string","description":"Unique key identifying the specific platform setting (e.g., 'site_name', 'currency', 'tax_rate').","nullable":false},{"name":"setting_value","type":"string","description":"Current value of the platform setting, stored as text to accommodate various data types.","nullable":false},{"name":"setting_type","type":"string","description":"Data type of the setting value (string, integer, decimal, boolean, json).","nullable":false},{"name":"category","type":"string","description":"Grouping category for the setting (e.g., 'general', 'payment', 'shipping', 'display').","nullable":false},{"name":"description","type":"string","description":"Description explaining the purpose and impact of this setting.","nullable":false},{"name":"is_encrypted","type":"boolean","description":"Flag indicating whether this setting value is encrypted at rest.","nullable":false},{"name":"status","type":"string","description":"Current status of the setting (active, inactive, deprecated).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this setting was first created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this setting was last modified.","nullable":false}],"uniqueIndexes":[{"fieldNames":["setting_key"],"unique":true}],"plainIndexes":[{"fieldNames":["category","status"]},{"fieldNames":["setting_type"]}],"ginIndexes":[]},{"name":"shopping_mall_search_terms","description":"Records popular and frequently searched terms within the shopping mall platform, supporting search optimization, autocomplete features, and trend analysis.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"trend_analyzer_admin_id","type":"uuid","description":"Administrator associated with analyzing search trends. {@link shopping_mall_administrators.id}.","relation":{"name":"trendAnalyst","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"search_term","type":"string","description":"The actual search query entered by users in the shopping mall platform.","nullable":false},{"name":"search_count","type":"int","description":"Number of times this search term has been used by platform users.","nullable":false},{"name":"last_searched_at","type":"datetime","description":"Timestamp when this search term was most recently used.","nullable":false},{"name":"first_searched_at","type":"datetime","description":"Timestamp when this search term was first recorded by the system.","nullable":false},{"name":"is_blocked","type":"boolean","description":"Flag indicating whether this search term is blocked from results.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this search term was first recorded in the system.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this search term record was last modified.","nullable":false}],"uniqueIndexes":[{"fieldNames":["search_term"],"unique":true}],"plainIndexes":[{"fieldNames":["search_count"]},{"fieldNames":["last_searched_at"]},{"fieldNames":["is_blocked"]}],"ginIndexes":[]},{"name":"shopping_mall_site_policies","description":"Contains the official policies and terms of service that govern the shopping mall platform, providing legal compliance and user guidelines.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"approved_by_admin_id","type":"uuid","description":"Administrator who approved this policy version. {@link shopping_mall_administrators.id}.","relation":{"name":"approvedBy","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_site_policies_of_approved_by_admin_id"},"unique":false,"nullable":true},{"name":"last_updated_by_admin_id","type":"uuid","description":"Administrator who made the last update to this policy. {@link shopping_mall_administrators.id}.","relation":{"name":"lastUpdatedBy","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_site_policies_of_last_updated_by_admin_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"policy_name","type":"string","description":"Name of the site policy (e.g., 'Privacy Policy', 'Terms of Service').","nullable":false},{"name":"policy_key","type":"string","description":"Unique key identifying the policy type for system references.","nullable":false},{"name":"content","type":"string","description":"Full text content of the policy document in HTML format.","nullable":false},{"name":"version","type":"string","description":"Semantic version number for this policy iteration.","nullable":false},{"name":"effective_date","type":"datetime","description":"Date when this policy version becomes effective.","nullable":false},{"name":"status","type":"string","description":"Current status of the policy (draft, approved, deprecated).","nullable":false},{"name":"requires_user_consent","type":"boolean","description":"Flag indicating if users must explicitly consent to this policy.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this policy was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this policy was last modified.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when this policy was soft-deleted (if applicable).","nullable":true}],"uniqueIndexes":[{"fieldNames":["policy_key","version"],"unique":true}],"plainIndexes":[{"fieldNames":["policy_key","status","effective_date"]},{"fieldNames":["requires_user_consent"]}],"ginIndexes":[{"fieldName":"policy_name"}]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"description":"Customer user entity that represents registered users who purchase products through the shopping mall platform. Customers can browse products, make purchases, manage their shopping experience, and submit reviews for purchased products.","foreignFields":[{"description":"User profile information. {@link shopping_mall_user_profiles.id}.","name":"shopping_mall_user_profile_id","nullable":true,"relation":{"name":"userProfile","targetModel":"shopping_mall_user_profiles"},"type":"uuid","unique":true}],"ginIndexes":[],"material":false,"name":"shopping_mall_customers","plainFields":[{"description":"Unique email address used for authentication and communication.","name":"email","nullable":false,"type":"string"},{"description":"Hashed password for secure authentication.","name":"password_hash","nullable":false,"type":"string"},{"description":"Customer's first name.","name":"first_name","nullable":false,"type":"string"},{"description":"Customer's last name.","name":"last_name","nullable":false,"type":"string"},{"description":"Customer's contact phone number.","name":"phone_number","nullable":true,"type":"string"},{"description":"Timestamp when the customer account was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the customer account was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the customer account was deleted (soft delete).","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]},{"fieldNames":["deleted_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["email"],"unique":true}]},{"name":"shopping_mall_sellers","description":"Seller user entity that represents vendor accounts managing product listings and inventory within the marketplace. Sellers can create product listings, manage inventory levels, view sales reports, and respond to customer inquiries.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"email","type":"uuid","description":"Unique email address used for authentication and communication.","relation":{"name":"sellerEmail","targetModel":"shopping_mall_sellers","mappingName":"recursive"},"unique":true,"nullable":false}],"plainFields":[{"name":"business_name","type":"string","description":"Seller's business name.","nullable":false},{"name":"business_registration_number","type":"string","description":"Seller's business registration/identification number.","nullable":false},{"name":"contact_person_name","type":"string","description":"Seller's contact person name.","nullable":false},{"name":"contact_person_phone","type":"string","description":"Seller's contact person phone number.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the seller account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the seller account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the seller account was deleted (soft delete).","nullable":true},{"name":"status","type":"string","description":"Seller account status (active, inactive, suspended, under_review).","nullable":false}],"uniqueIndexes":[{"fieldNames":["business_registration_number"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]},{"fieldNames":["deleted_at"]}],"ginIndexes":[{"fieldName":"business_name"}]},{"description":"Administrator user entity that represents system administrators with full access to manage all aspects of the shopping mall platform. Administrators can oversee user accounts, manage product listings, monitor orders, and configure system settings.","foreignFields":[{"description":"User profile information. {@link shopping_mall_user_profiles.id}.","name":"shopping_mall_user_profile_id","nullable":true,"relation":{"name":"userProfile","targetModel":"shopping_mall_user_profiles"},"type":"uuid","unique":true}],"ginIndexes":[],"material":false,"name":"shopping_mall_administrators","plainFields":[{"description":"Unique email address used for authentication and communication.","name":"email","nullable":false,"type":"string"},{"description":"Hashed password for secure authentication.","name":"password_hash","nullable":false,"type":"string"},{"description":"Administrator's first name.","name":"first_name","nullable":false,"type":"string"},{"description":"Administrator's last name.","name":"last_name","nullable":false,"type":"string"},{"description":"Timestamp when the administrator account was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the administrator account was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the administrator account was deleted (soft delete).","name":"deleted_at","nullable":true,"type":"datetime"},{"description":"Administrator role/position within the organization.","name":"role","nullable":false,"type":"string"},{"description":"Administrator's contact phone number.","name":"contact_phone","nullable":false,"type":"string"}],"plainIndexes":[{"fieldNames":["role"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]},{"fieldNames":["deleted_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["email"],"unique":true}]},{"name":"shopping_mall_guests","description":"Guest user entity that represents unauthenticated users browsing the shopping mall platform. Guests can browse products, view product details, and add products to a temporary shopping cart, with the option to convert to a registered customer during checkout.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_user_preferences_id","type":"uuid","description":"User preferences for personalized experience. {@link shopping_mall_user_preferences.id}.","relation":{"name":"userPreferences","targetModel":"shopping_mall_user_preferences"},"unique":true,"nullable":true}],"plainFields":[{"name":"created_at","type":"datetime","description":"Timestamp when the guest session was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the guest session was last updated.","nullable":false},{"name":"last_active_at","type":"datetime","description":"Timestamp when the guest was last active.","nullable":false},{"name":"user_agent","type":"string","description":"Guest's browser user agent string.","nullable":true},{"name":"ip_address","type":"string","description":"Guest's IP address.","nullable":true},{"name":"session_duration","type":"int","description":"Duration of the guest session in minutes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["ip_address","user_agent"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]},{"fieldNames":["last_active_at"]}],"ginIndexes":[{"fieldName":"user_agent"}]},{"name":"shopping_mall_user_profiles","description":"User profile entity that stores profile information for all user types (customers, sellers, administrators). This table contains shared profile attributes that can be referenced by different user roles.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"profile_picture_id","type":"uuid","description":"Reference to profile picture. {@link shopping_mall_product_images.id}.","relation":{"name":"profilePicture","targetModel":"shopping_mall_product_images"},"unique":false,"nullable":true}],"plainFields":[{"name":"bio","type":"string","description":"User's biography or description.","nullable":true},{"name":"website","type":"uri","description":"User's personal or business website.","nullable":true},{"name":"social_media_links","type":"string","description":"JSON array of user's social media links.","nullable":true},{"name":"avatar_url","type":"uri","description":"URL to user's avatar image.","nullable":true},{"name":"display_name","type":"string","description":"User's display name for public visibility.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the user profile was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the user profile was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["display_name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[{"fieldName":"social_media_links"}]},{"name":"shopping_mall_user_addresses","description":"User address entity that stores shipping and billing address information for users. Supports multiple addresses per user with designation of primary address for order processing.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Reference to customer. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Reference to seller. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to administrator. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"address_type","type":"string","description":"Type of address (home, work, billing, shipping, other).","nullable":false},{"name":"recipient_name","type":"string","description":"Name of the recipient at this address.","nullable":false},{"name":"street_address","type":"string","description":"Street address line.","nullable":false},{"name":"street_address_line2","type":"string","description":"Additional street address line (apartment, suite, etc.).","nullable":true},{"name":"city","type":"string","description":"City name.","nullable":false},{"name":"state","type":"string","description":"State or province name.","nullable":false},{"name":"postal_code","type":"string","description":"Postal or ZIP code.","nullable":false},{"name":"country","type":"string","description":"Country name.","nullable":false},{"name":"is_primary","type":"boolean","description":"Flag indicating if this is the primary address for the user.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the address was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the address was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_customer_id","street_address","city","postal_code","country"],"unique":true},{"fieldNames":["shopping_mall_seller_id","street_address","city","postal_code","country"],"unique":true},{"fieldNames":["shopping_mall_administrator_id","street_address","city","postal_code","country"],"unique":true}],"plainIndexes":[{"fieldNames":["city"]},{"fieldNames":["state"]},{"fieldNames":["postal_code"]},{"fieldNames":["country"]},{"fieldNames":["is_primary"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[{"fieldName":"street_address"}]},{"name":"shopping_mall_user_sessions","description":"User session entity that captures JWT token information and manages user authentication state securely. Stores session details including token, expiration, user agent, and IP address.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Reference to customer. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true},{"name":"shopping_mall_seller_id","type":"uuid","description":"Reference to seller. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to administrator. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"token","type":"string","description":"JWT token for session authentication.","nullable":false},{"name":"refresh_token","type":"string","description":"Refresh token for session renewal.","nullable":false},{"name":"expires_at","type":"datetime","description":"Timestamp when the session expires.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the session was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the session was last updated.","nullable":false},{"name":"last_active_at","type":"datetime","description":"Timestamp when the session was last active.","nullable":false},{"name":"user_agent","type":"string","description":"User's browser user agent string.","nullable":false},{"name":"ip_address","type":"string","description":"User's IP address.","nullable":false},{"name":"is_active","type":"boolean","description":"Flag indicating if the session is currently active.","nullable":false}],"uniqueIndexes":[{"fieldNames":["token"],"unique":true},{"fieldNames":["refresh_token"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id","is_active"]},{"fieldNames":["shopping_mall_seller_id","is_active"]},{"fieldNames":["shopping_mall_administrator_id","is_active"]},{"fieldNames":["expires_at"]},{"fieldNames":["last_active_at"]}],"ginIndexes":[{"fieldName":"user_agent"}]},{"description":"User preferences entity that stores user-specific preferences for personalized experience including language, theme, notification settings, and privacy preferences.","foreignFields":[{"description":"Reference to customer. {@link shopping_mall_customers.id}.","name":"shopping_mall_customer_id","nullable":true,"relation":{"name":"customer","targetModel":"shopping_mall_customers"},"type":"uuid","unique":true},{"description":"Reference to seller. {@link shopping_mall_sellers.id}.","name":"shopping_mall_seller_id","nullable":true,"relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"type":"uuid","unique":true},{"description":"Reference to administrator. {@link shopping_mall_administrators.id}.","name":"shopping_mall_administrator_id","nullable":true,"relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"type":"uuid","unique":true}],"ginIndexes":[],"material":false,"name":"shopping_mall_user_preferences","plainFields":[{"description":"User's preferred language code (e.g., en-US, ko-KR).","name":"language","nullable":false,"type":"string"},{"description":"User's preferred theme (light, dark, system).","name":"theme","nullable":false,"type":"string"},{"description":"User's preferred currency code (e.g., USD, KRW).","name":"currency","nullable":false,"type":"string"},{"description":"User's preferred date format.","name":"date_format","nullable":false,"type":"string"},{"description":"User's preferred time format (12h, 24h).","name":"time_format","nullable":false,"type":"string"},{"description":"Flag indicating if user wants to receive email notifications.","name":"email_notifications","nullable":false,"type":"boolean"},{"description":"Flag indicating if user wants to receive push notifications.","name":"push_notifications","nullable":false,"type":"boolean"},{"description":"Flag indicating if user wants to receive marketing emails.","name":"marketing_emails","nullable":false,"type":"boolean"},{"description":"User's privacy preference level (public, friends, private, anonymous).","name":"privacy_level","nullable":false,"type":"string"},{"description":"Timestamp when the preferences were created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the preferences were last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Flag indicating if personalization features are enabled.","name":"personalization_enabled","nullable":false,"type":"boolean"}],"plainIndexes":[{"fieldNames":["language"]},{"fieldNames":["theme"]},{"fieldNames":["currency"]},{"fieldNames":["privacy_level"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"subsidiary","uniqueIndexes":[{"fieldNames":["shopping_mall_customer_id"],"unique":true},{"fieldNames":["shopping_mall_seller_id"],"unique":true},{"fieldNames":["shopping_mall_administrator_id"],"unique":true}]}]},{"filename":"schema-03-product.prisma","namespace":"Product","models":[{"description":"Core product information in the e-commerce platform. Contains essential details about products available for purchase including title, description, pricing, and status. This is a primary business entity that customers interact with directly through browsing, searching, and purchasing.","foreignFields":[{"description":"The seller who created the product. {@link shopping_mall_sellers.id}.","name":"seller_id","nullable":false,"relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"type":"uuid","unique":false},{"description":"The main category this product belongs to. {@link shopping_mall_product_categories.id}.","name":"primary_category_id","nullable":false,"relation":{"name":"primaryCategory","targetModel":"shopping_mall_product_categories"},"type":"uuid","unique":false}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"brand"}],"material":false,"name":"shopping_mall_products","plainFields":[{"description":"Product title visible to customers.","name":"title","nullable":false,"type":"string"},{"description":"Base price of the product before variant adjustments.","name":"base_price","nullable":false,"type":"double"},{"description":"Currency code for the product price (e.g., USD, EUR).","name":"currency","nullable":false,"type":"string"},{"description":"Manufacturer or brand name.","name":"brand","nullable":true,"type":"string"},{"description":"Lifecycle status of the product (draft, active, inactive, discontinued).","name":"product_status","nullable":false,"type":"string"},{"description":"When the product was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"When the product was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"When the product was deleted (soft delete).","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["product_status","created_at"]},{"fieldNames":["brand","product_status"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["title","seller_id"],"unique":true}]},{"name":"shopping_mall_product_attributes","description":"Structured attributes that describe product characteristics beyond basic information. Contains specifications like material, warranty period, dimensions, and other technical details that help customers evaluate products. This is a subsidiary entity that supports the main product information.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product this attribute belongs to. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"attribute_name","type":"string","description":"Name of the product attribute (e.g., Material, Warranty, Dimensions).","nullable":false},{"name":"attribute_value","type":"string","description":"Value of the product attribute (e.g., Cotton, 2 years, 10x5x3 inches).","nullable":false},{"name":"display_order","type":"int","description":"Order in which this attribute should be displayed.","nullable":false},{"name":"created_at","type":"datetime","description":"When the attribute was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the attribute was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","attribute_name"],"unique":true}],"plainIndexes":[{"fieldNames":["attribute_name"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"attribute_value"}]},{"name":"shopping_mall_product_descriptions","description":"Rich text descriptions of products that provide detailed information to potential customers. Contains the main product description with formatting capabilities, longer than the basic product information. This is a subsidiary entity that enhances the product presentation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product this description belongs to. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"description_text","type":"string","description":"The main product description with rich text content.","nullable":false},{"name":"description_format","type":"string","description":"Format of the description (markdown, html, plain).","nullable":false},{"name":"created_at","type":"datetime","description":"When the description was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the description was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id"],"unique":true}],"plainIndexes":[{"fieldNames":["description_format","updated_at"]}],"ginIndexes":[{"fieldName":"description_text"}]},{"name":"shopping_mall_product_images","description":"Images associated with products that visually represent the product to customers. Contains references to image files and metadata such as display order and alt text. This is a subsidiary entity that supports product presentation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product this image belongs to. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"image_url","type":"uri","description":"URL to the product image.","nullable":false},{"name":"thumbnail_url","type":"uri","description":"URL to the thumbnail version of the product image.","nullable":false},{"name":"display_order","type":"int","description":"Order in which this image should be displayed.","nullable":false},{"name":"alt_text","type":"string","description":"Alternative text for accessibility purposes.","nullable":true},{"name":"is_primary","type":"boolean","description":"Whether this is the primary product image.","nullable":false},{"name":"created_at","type":"datetime","description":"When the image reference was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the image reference was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","display_order"],"unique":true}],"plainIndexes":[{"fieldNames":["is_primary","display_order"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"alt_text"}]},{"name":"shopping_mall_product_videos","description":"Video content associated with products that provide dynamic visual information to customers. Contains references to video files and metadata such as display order and captions. This is a subsidiary entity that supports product presentation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product this video belongs to. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"video_url","type":"uri","description":"URL to the product video.","nullable":false},{"name":"thumbnail_url","type":"uri","description":"URL to the thumbnail image of the video.","nullable":false},{"name":"video_title","type":"string","description":"Title of the video content.","nullable":false},{"name":"display_order","type":"int","description":"Order in which this video should be displayed.","nullable":false},{"name":"duration_seconds","type":"int","description":"Duration of the video in seconds.","nullable":false},{"name":"captions_url","type":"uri","description":"URL to caption file for accessibility.","nullable":true},{"name":"created_at","type":"datetime","description":"When the video reference was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the video reference was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","display_order"],"unique":true}],"plainIndexes":[{"fieldNames":["display_order","duration_seconds"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"video_title"}]},{"description":"Product variants (SKUs) representing different configurations of the same product such as color, size, or material. Each variant has its own pricing, inventory count, and availability. This is a primary business entity due to its importance in inventory management and the purchasing process.","foreignFields":[{"description":"The parent product this variant belongs to. {@link shopping_mall_products.id}.","name":"shopping_mall_product_id","nullable":false,"relation":{"name":"product","targetModel":"shopping_mall_products"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_product_variants","plainFields":[{"description":"Unique stock keeping unit code for this variant.","name":"sku_code","nullable":false,"type":"string"},{"description":"Current price of this variant.","name":"price","nullable":false,"type":"double"},{"description":"Current available inventory for this variant.","name":"inventory_count","nullable":false,"type":"int"},{"description":"Status of the variant (active, out-of-stock, discontinued).","name":"variant_status","nullable":false,"type":"string"},{"description":"Weight of the variant in kilograms.","name":"weight","nullable":false,"type":"double"},{"description":"Dimensions of the variant (length x width x height).","name":"dimensions","nullable":false,"type":"string"},{"description":"When the variant was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"When the variant was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"When the variant was deleted (soft delete).","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["variant_status","inventory_count"]},{"fieldNames":["price"]},{"fieldNames":["created_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["sku_code"],"unique":true},{"fieldNames":["shopping_mall_product_id","sku_code"],"unique":true}]},{"name":"shopping_mall_product_options","description":"Configuration options that define the possible values for product variants such as available colors, sizes, or materials. Each option represents a specific attribute value that can be combined to create product variants. This is a subsidiary entity that supports the product variant system.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product these options belong to. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"option_group_id","type":"uuid","description":"The group this option belongs to. {@link shopping_mall_product_options.id}.","relation":{"name":"optionGroup","targetModel":"shopping_mall_product_options","mappingName":"recursive"},"unique":false,"nullable":false}],"plainFields":[{"name":"option_value","type":"string","description":"Value of the option (e.g., Red, Large, Cotton).","nullable":false},{"name":"display_order","type":"int","description":"Order in which this option should be displayed.","nullable":false},{"name":"created_at","type":"datetime","description":"When the option was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the option was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","option_group_id","option_value"],"unique":true}],"plainIndexes":[{"fieldNames":["option_group_id","display_order"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"option_value"}]},{"name":"shopping_mall_product_reviews","description":"Customer reviews for products, containing ratings, written content, and status information. Reviews undergo a moderation process before becoming publicly visible. This is a primary business entity as it requires independent management of its lifecycle and status.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product being reviewed. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"customer_id","type":"uuid","description":"The customer who wrote the review. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"rating","type":"int","description":"Star rating from 1-5.","nullable":false},{"name":"title","type":"string","description":"Title of the review.","nullable":false},{"name":"content","type":"string","description":"Main content of the review.","nullable":false},{"name":"review_status","type":"string","description":"Current status of the review (draft, submitted, approved, rejected).","nullable":false},{"name":"created_at","type":"datetime","description":"When the review was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the review was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"When the review was deleted (soft delete).","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","customer_id"],"unique":true}],"plainIndexes":[{"fieldNames":["review_status","rating"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"content"}]},{"name":"shopping_mall_product_tags","description":"Tags used to categorize and enhance discoverability of products. Tags help with search functionality and allow customers to find related products. This is a subsidiary entity that supports the search and discovery system.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"The product this tag belongs to. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false}],"plainFields":[{"name":"tag_name","type":"string","description":"Name of the tag (e.g., summer, gift, eco-friendly).","nullable":false},{"name":"display_order","type":"int","description":"Order in which this tag should be displayed.","nullable":false},{"name":"created_at","type":"datetime","description":"When the tag was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the tag was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","tag_name"],"unique":true}],"plainIndexes":[{"fieldNames":["tag_name","display_order"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"tag_name"}]},{"name":"shopping_mall_product_categories","description":"Categories used to organize products in a hierarchical structure. Categories enable browsing and filtering of products. This is a subsidiary entity that provides organizational structure for the product catalog.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_category_id","type":"uuid","description":"The parent category if this is a subcategory. {@link shopping_mall_product_categories.id}.","relation":{"name":"parentCategory","targetModel":"shopping_mall_product_categories","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"category_name","type":"string","description":"Name of the product category.","nullable":false},{"name":"description","type":"string","description":"Description of the category.","nullable":true},{"name":"category_image_url","type":"uri","description":"URL to the category image.","nullable":true},{"name":"display_order","type":"int","description":"Order in which this category should be displayed.","nullable":false},{"name":"is_active","type":"boolean","description":"Whether the category is active and visible to customers.","nullable":false},{"name":"created_at","type":"datetime","description":"When the category was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the category was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["category_name","parent_category_id"],"unique":true}],"plainIndexes":[{"fieldNames":["parent_category_id","is_active"]},{"fieldNames":["display_order"]}],"ginIndexes":[{"fieldName":"category_name"},{"fieldName":"description"}]}]},{"filename":"schema-04-carts.prisma","namespace":"Carts","models":[{"description":"Represents a user's shopping cart containing products they intend to purchase. Each customer has exactly one active cart at a time, which persists across sessions. The cart tracks items, quantities, prices, and other purchase details before checkout. This is a primary entity as users directly interact with their carts, managing items and proceeding to checkout independently.","foreignFields":[{"description":"Customer who owns the cart. {@link shopping_mall_customers.id}.","name":"shopping_customer_id","nullable":false,"relation":{"name":"customer","targetModel":"shopping_mall_customers"},"type":"uuid","unique":false}],"ginIndexes":[{"fieldName":"status"}],"material":false,"name":"shopping_mall_carts","plainFields":[{"description":"Current status of the cart (active, processing, completed, abandoned).","name":"status","nullable":false,"type":"string"},{"description":"The total monetary value of all items in the cart.","name":"total_amount","nullable":false,"type":"double"},{"description":"The currency code for the cart's monetary values (e.g., USD).","name":"currency","nullable":false,"type":"string"},{"description":"Timestamp when the cart was first created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the cart was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the cart was soft-deleted.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["status","updated_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["shopping_customer_id"],"unique":true}]},{"description":"Represents individual items within a shopping cart. Contains the specific product/SKU, quantity, price at time of addition, and other details about each item in a cart. This is a supporting entity (subsidiary) as it exists to support the shopping_mall_carts table and has no independent management or API operations outside the context of its parent cart.","foreignFields":[{"description":"The cart to which this item belongs. {@link shopping_mall_carts.id}.","name":"shopping_mall_cart_id","nullable":false,"relation":{"name":"cart","targetModel":"shopping_mall_carts"},"type":"uuid","unique":false},{"description":"The specific product variant (SKU) in this cart item. {@link shopping_mall_product_variants.id}.","name":"shopping_mall_product_variant_id","nullable":false,"relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_cart_items","plainFields":[{"description":"The number of units of this item in the cart.","name":"quantity","nullable":false,"type":"int"},{"description":"The price per unit at the time the item was added to the cart.","name":"unit_price","nullable":false,"type":"double"},{"description":"The calculated total price for this item (quantity Ã— unit_price).","name":"total_price","nullable":false,"type":"double"},{"description":"Timestamp when this item was added to the cart.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when this item was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp when this item was removed from the cart.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["shopping_mall_cart_id","created_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"subsidiary","uniqueIndexes":[{"fieldNames":["shopping_mall_cart_id","shopping_mall_product_variant_id"],"unique":true}]},{"name":"shopping_mall_wishlists","description":"Represents a user's wishlist containing products they want to save for future purchase. Users can have multiple wishlists with different purposes (e.g., gifts, personal items). Wishlists are independent entities that users can create, rename, delete, and share. This is a primary entity as users independently manage their wishlists regardless of any single cart or product context.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_customer_id","type":"uuid","description":"Customer who owns the wishlist. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"The name of the wishlist (e.g., 'Birthday Gifts', 'Home Renovation').","nullable":false},{"name":"description","type":"string","description":"Optional description providing more details about the wishlist.","nullable":true},{"name":"visibility","type":"string","description":"Determines who can view the wishlist (public, private, shared).","nullable":false},{"name":"is_default","type":"boolean","description":"Indicates if this is the user's default wishlist.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the wishlist was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the wishlist was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the wishlist was soft-deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_customer_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_customer_id","is_default"]}],"ginIndexes":[{"fieldName":"name"}]},{"description":"Represents individual items within a wishlist. Contains the specific product/SKU added to a wishlist and associated metadata. This is a supporting entity (subsidiary) as it exists solely to support the shopping_mall_wishlists table and has no independent management. Users manage wishlist items through their parent wishlist.","foreignFields":[{"description":"The wishlist to which this item belongs. {@link shopping_mall_wishlists.id}.","name":"shopping_mall_wishlist_id","nullable":false,"relation":{"name":"wishlist","targetModel":"shopping_mall_wishlists"},"type":"uuid","unique":false},{"description":"The specific product variant (SKU) saved in this wishlist. {@link shopping_mall_product_variants.id}.","name":"shopping_mall_product_variant_id","nullable":false,"relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_wishlist_items","plainFields":[{"description":"User's personal notes about why they saved this item.","name":"notes","nullable":true,"type":"string"},{"description":"User's priority ranking for this wishlist item (1-5).","name":"priority","nullable":false,"type":"int"},{"description":"Timestamp when this item was added to the wishlist.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when this item was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp when this item was removed from the wishlist.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["shopping_mall_wishlist_id","priority"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"subsidiary","uniqueIndexes":[{"fieldNames":["shopping_mall_wishlist_id","shopping_mall_product_variant_id"],"unique":true}]},{"name":"shopping_mall_cart_wishlist_transfer","description":"Tracks transfers of items between carts and wishlists. Records when users move items from their wishlist to cart or from cart to wishlist. This is a supporting entity (subsidiary) as it's system-maintained and used to analyze user behavior and preferences. It has no independent management by users or administrators.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_customer_id","type":"uuid","description":"Customer who performed the transfer. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"from_wishlist_item_id","type":"uuid","description":"The wishlist item that was transferred. {@link shopping_mall_wishlist_items.id}.","relation":{"name":"fromWishlistItem","targetModel":"shopping_mall_wishlist_items","mappingName":"shopping_mall_cart_wishlist_transfer_of_from_wishlist_item_id"},"unique":false,"nullable":true},{"name":"to_cart_item_id","type":"uuid","description":"The resulting cart item after transfer. {@link shopping_mall_cart_items.id}.","relation":{"name":"toCartItem","targetModel":"shopping_mall_cart_items","mappingName":"shopping_mall_cart_wishlist_transfer_of_to_cart_item_id"},"unique":false,"nullable":true},{"name":"from_cart_item_id","type":"uuid","description":"The cart item that was transferred. {@link shopping_mall_cart_items.id}.","relation":{"name":"fromCartItem","targetModel":"shopping_mall_cart_items","mappingName":"shopping_mall_cart_wishlist_transfer_of_from_cart_item_id"},"unique":false,"nullable":true},{"name":"to_wishlist_item_id","type":"uuid","description":"The resulting wishlist item after transfer. {@link shopping_mall_wishlist_items.id}.","relation":{"name":"toWishlistItem","targetModel":"shopping_mall_wishlist_items","mappingName":"shopping_mall_cart_wishlist_transfer_of_to_wishlist_item_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"transfer_type","type":"string","description":"Type of transfer (wishlist_to_cart, cart_to_wishlist).","nullable":false},{"name":"quantity","type":"int","description":"Number of units transferred.","nullable":false},{"name":"timestamp","type":"datetime","description":"When the transfer occurred.","nullable":false}],"uniqueIndexes":[{"fieldNames":["timestamp","shopping_customer_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_customer_id","transfer_type","timestamp"]}],"ginIndexes":[{"fieldName":"transfer_type"}]},{"description":"Captures point-in-time states of shopping carts for audit, recovery, and analytics purposes. Stores the complete cart state at specific moments, preserving product prices and availability as they existed at that time. This is a snapshot entity as it captures historical cart states, enabling cart recovery, price change analysis, and purchase behavior tracking.","foreignFields":[{"description":"The cart whose state is captured in this snapshot. {@link shopping_mall_carts.id}.","name":"shopping_mall_cart_id","nullable":false,"relation":{"name":"cart","targetModel":"shopping_mall_carts"},"type":"uuid","unique":false}],"ginIndexes":[{"fieldName":"snapshot_type"}],"material":false,"name":"shopping_mall_cart_snapshots","plainFields":[{"description":"Reason for the snapshot (periodic, checkout_attempt, before_clearing, etc.).","name":"snapshot_type","nullable":false,"type":"string"},{"description":"The total value of the cart at snapshot time.","name":"total_amount","nullable":false,"type":"double"},{"description":"Number of items in the cart at snapshot time.","name":"item_count","nullable":false,"type":"int"},{"description":"Cart status at the time of snapshot.","name":"status","nullable":false,"type":"string"},{"description":"Serialized data containing complete cart state (items, prices, quantities).","name":"snapshot_data","nullable":false,"type":"string"},{"description":"Timestamp when the cart snapshot was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"When the user was notified of price changes (if applicable).","name":"notified_at","nullable":true,"type":"datetime"}],"plainIndexes":[],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"snapshot","uniqueIndexes":[{"fieldNames":["shopping_mall_cart_id","created_at"],"unique":true}]},{"name":"shopping_mall_saved_carts","description":"Represents carts that users have explicitly saved for future purchase. Allows users to maintain multiple saved cart configurations for different purchase scenarios. This is a supporting entity (subsidiary) as it extends the functionality of shopping_mall_carts but is managed through the same interfaces. Saved carts are essentially named references to specific cart states.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_cart_id","type":"uuid","description":"The original cart that was saved. {@link shopping_mall_carts.id}.","relation":{"name":"cart","targetModel":"shopping_mall_carts"},"unique":false,"nullable":false},{"name":"shopping_customer_id","type":"uuid","description":"Customer who saved the cart. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"User-provided name for the saved cart (e.g., 'Office Supplies', 'Birthday Gift').","nullable":false},{"name":"description","type":"string","description":"Optional description explaining the purpose of this saved cart.","nullable":true},{"name":"saved_at","type":"datetime","description":"When the cart was saved.","nullable":false},{"name":"updated_at","type":"datetime","description":"When the saved cart was last updated.","nullable":false},{"name":"expires_at","type":"datetime","description":"When the saved cart expires and should be cleaned up.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_customer_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_customer_id","saved_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"shopping_mall_abandoned_carts","description":"Tracks carts that were not completed through checkout. Used for cart recovery, marketing analysis, and understanding user behavior. This is a supporting entity (subsidiary) as it's automatically populated by the system and used for analytics and automated recovery campaigns. It has no direct user management interface.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_cart_id","type":"uuid","description":"The abandoned cart. {@link shopping_mall_carts.id}.","relation":{"name":"cart","targetModel":"shopping_mall_carts"},"unique":false,"nullable":false},{"name":"shopping_customer_id","type":"uuid","description":"Customer who abandoned the cart. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"abandoned_at","type":"datetime","description":"When the cart was identified as abandoned.","nullable":false},{"name":"recovery_attempts","type":"int","description":"Number of recovery attempts made for this abandoned cart.","nullable":false},{"name":"last_recovery_attempt_at","type":"datetime","description":"When the last recovery attempt was made.","nullable":true},{"name":"recovered_at","type":"datetime","description":"When the cart was recovered through a recovery attempt.","nullable":true},{"name":"conversion_value","type":"double","description":"Estimated value of items in the abandoned cart.","nullable":false},{"name":"estimated_recovery_value","type":"double","description":"Estimated value that could be recovered if the cart is completed.","nullable":false},{"name":"exit_page","type":"string","description":"URL where the user left the checkout process.","nullable":false},{"name":"device_type","type":"string","description":"Device used when cart was abandoned (desktop, mobile, tablet).","nullable":false},{"name":"referral_source","type":"string","description":"How the user arrived at the site (direct, google, social_media).","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_cart_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_customer_id","abandoned_at"]}],"ginIndexes":[{"fieldName":"device_type"}]}]},{"filename":"schema-05-orders.prisma","namespace":"Orders","models":[{"description":"Contains core information about customer orders in the shopping mall e-commerce platform. This table manages the primary transaction record that links customers with their purchases, tracking order totals, processing status, and customer information. As the central entity in the order processing flow, it connects to various related tables for items, payments, shipping, and order history.","foreignFields":[{"description":"Customer who placed the order. {@link shopping_mall_customers.id}.","name":"shopping_mall_customer_id","nullable":false,"relation":{"name":"customer","targetModel":"shopping_mall_customers"},"type":"uuid","unique":false},{"description":"Current status of the order. {@link shopping_mall_order_status.id}.","name":"shopping_mall_order_status_id","nullable":false,"relation":{"name":"orderStatus","targetModel":"shopping_mall_order_status"},"type":"uuid","unique":false},{"description":"Payment information for the order. {@link shopping_mall_payments.id}.","name":"shopping_mall_payment_id","nullable":false,"relation":{"name":"payment","targetModel":"shopping_mall_payments"},"type":"uuid","unique":true}],"ginIndexes":[],"material":false,"name":"shopping_mall_orders","plainFields":[{"description":"Unique order identifier in format OM-YYYY-XXXXX where YYYY is the year and XXXXX is sequential.","name":"order_number","nullable":false,"type":"string"},{"description":"Total cost of items before shipping, taxes, and discounts.","name":"subtotal","nullable":false,"type":"double"},{"description":"Cost of shipping for the order.","name":"shipping_cost","nullable":false,"type":"double"},{"description":"Total tax calculated based on shipping address and current tax rates.","name":"tax_amount","nullable":false,"type":"double"},{"description":"Total discount applied to the order from coupons or promotions.","name":"discount_amount","nullable":false,"type":"double"},{"description":"Final total amount charged to the customer.","name":"total_amount","nullable":false,"type":"double"},{"description":"Currency code for the order (e.g., USD, EUR).","name":"currency","nullable":false,"type":"string"},{"description":"Customer's special delivery or handling instructions.","name":"special_instructions","nullable":true,"type":"string"},{"description":"Timestamp when the order was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the order was last updated.","name":"updated_at","nullable":false,"type":"datetime"}],"plainIndexes":[{"fieldNames":["created_at","shopping_mall_customer_id"]},{"fieldNames":["shopping_mall_order_status_id","created_at"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["order_number"],"unique":true}]},{"name":"shopping_mall_order_items","description":"Details individual items within an order, tracking specific product variants (SKUs), quantities, and pricing at the time of purchase. This table ensures inventory accuracy by recording exactly what was sold and serves as the foundation for order fulfillment by the seller.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order to which this item belongs. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_product_id","type":"uuid","description":"Product being ordered. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Seller providing the product. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"quantity","type":"int","description":"Number of units ordered.","nullable":false},{"name":"unit_price","type":"double","description":"Price per unit at time of purchase.","nullable":false},{"name":"total_price","type":"double","description":"Total price for this item (quantity Ã— unit_price).","nullable":false},{"name":"currency","type":"string","description":"Currency code for this item's price.","nullable":false},{"name":"weight","type":"double","description":"Weight of one unit for shipping calculations.","nullable":false},{"name":"color","type":"string","description":"Color variant of the product (e.g., Red, Blue).","nullable":true},{"name":"size","type":"string","description":"Size variant of the product (e.g., S, M, L).","nullable":true},{"name":"material","type":"string","description":"Material of the product (e.g., Cotton, Leather).","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the item was added to the order.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the item was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","shopping_mall_product_id","color","size","material"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","created_at"]},{"fieldNames":["shopping_mall_product_id"]}],"ginIndexes":[{"fieldName":"color"},{"fieldName":"size"}]},{"name":"shopping_mall_order_snapshots","description":"Captures point-in-time snapshots of order details for audit and historical purposes. This table preserves order information as it existed at specific moments, ensuring data integrity for financial reconciliation, dispute resolution, and customer service.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order that was snapshotted. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false}],"plainFields":[{"name":"order_number","type":"string","description":"Order identifier from the original order.","nullable":false},{"name":"subtotal","type":"double","description":"Order subtotal at snapshot time.","nullable":false},{"name":"shipping_cost","type":"double","description":"Shipping cost at snapshot time.","nullable":false},{"name":"tax_amount","type":"double","description":"Tax amount at snapshot time.","nullable":false},{"name":"discount_amount","type":"double","description":"Discount amount at snapshot time.","nullable":false},{"name":"total_amount","type":"double","description":"Total amount at snapshot time.","nullable":false},{"name":"currency","type":"string","description":"Currency at snapshot time.","nullable":false},{"name":"special_instructions","type":"string","description":"Special instructions at snapshot time.","nullable":true},{"name":"order_status_name","type":"string","description":"Name of the order status at snapshot time (e.g., Processing, Shipped).","nullable":false},{"name":"snapshot_timestamp","type":"datetime","description":"Timestamp when the snapshot was taken.","nullable":false},{"name":"snapshot_reason","type":"string","description":"Reason for taking the snapshot (e.g., order confirmation, status change).","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","snapshot_timestamp"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","snapshot_reason"]}],"ginIndexes":[{"fieldName":"order_status_name"}]},{"name":"shopping_mall_order_status","description":"Lookup table containing all possible order statuses in the shopping mall system. This table ensures data consistency by standardizing order status values across the platform and provides a centralized definition of the order lifecycle.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_status_group_id","type":"uuid","description":"Group that this status belongs to (e.g., Active, Cancelled). {@link shopping_mall_sellers.id}.","relation":{"name":"statusGroup","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"Name of the order status (e.g., Processing, Shipped, Delivered).","nullable":false},{"name":"display_order","type":"int","description":"Order for displaying status in workflows.","nullable":false},{"name":"is_final_state","type":"boolean","description":"Indicates if this is a terminal state (e.g., Delivered, Cancelled).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the status was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the status was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["display_order"]}],"ginIndexes":[]},{"name":"shopping_mall_order_tracking","description":"Manages shipping and delivery tracking information for orders, linking order details with carrier services. This table enables real-time status updates, automated notifications, and delivery issue resolution.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order being tracked. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":true,"nullable":false},{"name":"shipping_carrier_id","type":"uuid","description":"Carrier service responsible for delivery. {@link shopping_mall_sellers.id}.","relation":{"name":"carrier","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"tracking_number","type":"string","description":"Unique tracking identifier provided by the carrier.","nullable":false},{"name":"tracking_url","type":"uri","description":"URL for real-time tracking on carrier's website.","nullable":true},{"name":"estimated_delivery_date","type":"datetime","description":"Carrier's estimated date and time of delivery.","nullable":true},{"name":"actual_delivery_date","type":"datetime","description":"Date and time when delivery was confirmed.","nullable":true},{"name":"delivery_signature","type":"string","description":"Name of person who signed for delivery (if applicable).","nullable":true},{"name":"delivery_instructions","type":"string","description":"Special delivery instructions (e.g., leave at door).","nullable":true},{"name":"delivery_attempts","type":"int","description":"Number of delivery attempts made.","nullable":false},{"name":"last_status_update","type":"string","description":"Most recent status update from carrier (e.g., Out for Delivery).","nullable":false},{"name":"last_location","type":"string","description":"Last known location of the package.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when tracking was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when tracking was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["tracking_number"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","created_at"]},{"fieldNames":["shipping_carrier_id","created_at"]},{"fieldNames":["actual_delivery_date"]}],"ginIndexes":[{"fieldName":"last_status_update"}]},{"name":"shopping_mall_order_history","description":"Comprehensive audit trail of all changes to orders, tracking when, why, and by whom modifications were made. This table supports accountability, troubleshooting, and compliance requirements.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order that was modified. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"modified_by_user_id","type":"uuid","description":"User who made the change. {@link shopping_mall_customers.id}.","relation":{"name":"modifiedBy","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Administrator who made the change (if applicable). {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"change_type","type":"string","description":"Type of change made (e.g., status_update, item_added, item_removed).","nullable":false},{"name":"field_name","type":"string","description":"Name of the field that was changed.","nullable":false},{"name":"previous_value","type":"string","description":"Value before the change.","nullable":true},{"name":"new_value","type":"string","description":"Value after the change.","nullable":true},{"name":"reason","type":"string","description":"Reason provided for the change.","nullable":true},{"name":"ip_address","type":"string","description":"IP address from which the change was made.","nullable":true},{"name":"user_agent","type":"string","description":"Browser/device information for the change.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the change was recorded.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","created_at","field_name"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","created_at"]},{"fieldNames":["change_type","created_at"]},{"fieldNames":["modified_by_user_id","created_at"]}],"ginIndexes":[{"fieldName":"change_type"},{"fieldName":"field_name"}]},{"name":"shopping_mall_order_cancellations","description":"Records instances when orders are cancelled, capturing the reason, timing, and financial implications. This table manages the cancellation workflow and ensures proper inventory restoration and customer notification.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order that was cancelled. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":true,"nullable":false},{"name":"cancelled_by_user_id","type":"uuid","description":"User who requested cancellation. {@link shopping_mall_customers.id}.","relation":{"name":"cancelledBy","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Administrator who processed cancellation (if applicable). {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"cancellation_reason","type":"string","description":"Reason for cancellation (e.g., change_of_mind, out_of_stock).","nullable":false},{"name":"cancellation_notes","type":"string","description":"Additional notes about the cancellation.","nullable":true},{"name":"cancellation_fee","type":"double","description":"Fee charged for cancellation (if applicable).","nullable":false},{"name":"refund_amount","type":"double","description":"Amount to be refunded to customer.","nullable":false},{"name":"currency","type":"string","description":"Currency for financial amounts.","nullable":false},{"name":"processing_status","type":"string","description":"Status of cancellation processing (e.g., requested, approved, completed).","nullable":false},{"name":"approved_at","type":"datetime","description":"Timestamp when cancellation was approved.","nullable":true},{"name":"completed_at","type":"datetime","description":"Timestamp when cancellation was completed.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when cancellation was initiated.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when cancellation was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","processing_status"]},{"fieldNames":["cancelled_by_user_id","created_at"]},{"fieldNames":["completed_at"]}],"ginIndexes":[{"fieldName":"cancellation_reason"}]},{"name":"shopping_mall_order_returns","description":"Manages the return process for order items, tracking return requests, approvals, and restocking. This table coordinates the reverse logistics workflow and ensures proper inventory and financial reconciliation.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Original order for returned items. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer requesting return. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_administrator_id","type":"uuid","description":"Administrator processing return. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true},{"name":"return_shipping_carrier_id","type":"uuid","description":"Carrier service for return shipping. {@link shopping_mall_sellers.id}.","relation":{"name":"returnCarrier","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true}],"plainFields":[{"name":"return_reason","type":"string","description":"Reason for return (e.g., wrong_item, damaged, not_as_described).","nullable":false},{"name":"return_notes","type":"string","description":"Additional information about the return.","nullable":true},{"name":"return_status","type":"string","description":"Current status of return processing (e.g., requested, approved, received, refunded).","nullable":false},{"name":"refund_method","type":"string","description":"Method of refund (e.g., original_payment, store_credit).","nullable":false},{"name":"refund_amount","type":"double","description":"Amount to be refunded for the return.","nullable":false},{"name":"currency","type":"string","description":"Currency for financial amounts.","nullable":false},{"name":"return_shipping_cost","type":"double","description":"Cost of return shipping (sometimes borne by customer).","nullable":true},{"name":"restocking_fee","type":"double","description":"Fee for processing returned items back into inventory.","nullable":true},{"name":"return_tracking_number","type":"string","description":"Tracking number for the return shipment.","nullable":true},{"name":"estimated_arrival_date","type":"datetime","description":"Estimated date when returned items will be received.","nullable":true},{"name":"actual_receipt_date","type":"datetime","description":"Date when returned items were actually received.","nullable":true},{"name":"inspection_notes","type":"string","description":"Notes from inspecting returned items.","nullable":true},{"name":"condition_rating","type":"int","description":"Rating of item condition upon return (1-5 scale).","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when return was initiated.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when return was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["return_status","created_at"]},{"fieldNames":["actual_receipt_date"]}],"ginIndexes":[{"fieldName":"return_reason"},{"fieldName":"return_status"}]},{"name":"shopping_mall_order_issues","description":"Tracks problems or disputes related to orders, such as fulfillment issues, customer complaints, or quality concerns. This table manages the case resolution workflow and ensures proper communication between customers and support staff.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order with the issue. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Customer reporting the issue. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"assigned_to_administrator_id","type":"uuid","description":"Administrator assigned to resolve the issue. {@link shopping_mall_administrators.id}.","relation":{"name":"assignedTo","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true},{"name":"related_seller_id","type":"uuid","description":"Seller associated with the order items in question. {@link shopping_mall_sellers.id}.","relation":{"name":"relatedSeller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true}],"plainFields":[{"name":"issue_type","type":"string","description":"Category of issue (e.g., shipping_delay, damaged_item, wrong_item).","nullable":false},{"name":"issue_description","type":"string","description":"Detailed description of the problem.","nullable":false},{"name":"urgency_level","type":"string","description":"Priority of the issue (e.g., low, medium, high, critical).","nullable":false},{"name":"current_status","type":"string","description":"Status of issue resolution (e.g., reported, under_review, resolved).","nullable":false},{"name":"resolution_notes","type":"string","description":"Notes about how the issue was resolved.","nullable":true},{"name":"compensation_offered","type":"double","description":"Monetary compensation provided (if any).","nullable":true},{"name":"compensation_currency","type":"string","description":"Currency for compensation.","nullable":true},{"name":"is_customer_satisfied","type":"boolean","description":"Indicates if customer was satisfied with resolution.","nullable":true},{"name":"resolution_time_hours","type":"int","description":"Time taken to resolve the issue in hours.","nullable":true},{"name":"first_response_time_hours","type":"int","description":"Time taken to first respond to the issue in hours.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when issue was reported.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when issue was last updated.","nullable":false},{"name":"resolved_at","type":"datetime","description":"Timestamp when issue was resolved.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["issue_type","created_at"]},{"fieldNames":["current_status","urgency_level"]},{"fieldNames":["resolved_at"]}],"ginIndexes":[{"fieldName":"issue_type"},{"fieldName":"current_status"},{"fieldName":"issue_description"}]},{"name":"shopping_mall_order_notifications","description":"Manages communication events related to orders, tracking what notifications were sent, to whom, and when. This table ensures customers are properly informed about order status changes and critical events.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"Order related to the notification. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false}],"plainFields":[{"name":"notification_type","type":"string","description":"Type of notification (e.g., order_confirmation, shipping_update, delivery_reminder).","nullable":false},{"name":"recipient_type","type":"string","description":"Type of recipient (e.g., customer, seller, administrator).","nullable":false},{"name":"recipient_id","type":"string","description":"ID of the specific recipient (for targeting specific customers/sellers).","nullable":false},{"name":"recipient_email","type":"string","description":"Email address where notification was sent.","nullable":false},{"name":"subject","type":"string","description":"Subject line of the notification.","nullable":false},{"name":"message_body","type":"string","description":"Content of the notification message.","nullable":false},{"name":"communication_channel","type":"string","description":"Method of delivery (e.g., email, sms, in_app).","nullable":false},{"name":"delivery_status","type":"string","description":"Status of notification delivery (e.g., sent, failed, delivered, read).","nullable":false},{"name":"failure_reason","type":"string","description":"Reason for delivery failure (if applicable).","nullable":true},{"name":"sent_at","type":"datetime","description":"Timestamp when notification was sent.","nullable":false},{"name":"delivered_at","type":"datetime","description":"Timestamp when delivery was confirmed.","nullable":true},{"name":"read_at","type":"datetime","description":"Timestamp when the notification was read.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the notification record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the notification was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_order_id","sent_at","notification_type"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_order_id","sent_at"]},{"fieldNames":["notification_type","created_at"]},{"fieldNames":["delivery_status","sent_at"]},{"fieldNames":["recipient_type","recipient_id"]}],"ginIndexes":[{"fieldName":"notification_type"},{"fieldName":"delivery_status"}]}]},{"filename":"schema-06-payments.prisma","namespace":"Payments","models":[{"name":"shopping_mall_payments","description":"Handles payment processing for orders within the shopping mall e-commerce platform","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payment_methods_id","type":"uuid","description":"Payment method used. {@link shopping_mall_payment_methods.id}.","relation":{"name":"paymentMethod","targetModel":"shopping_mall_payment_methods"},"unique":false,"nullable":false}],"plainFields":[{"name":"order_id","type":"uuid","description":"Associated order for this payment.","nullable":false},{"name":"amount","type":"double","description":"Payment amount in the specified currency.","nullable":false},{"name":"currency","type":"string","description":"Currency code (e.g., USD, EUR, KRW).","nullable":false},{"name":"status","type":"string","description":"Payment status (e.g., pending, confirmed, failed).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when payment was initiated.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last payment status update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when payment was deleted or canceled.","nullable":true}],"uniqueIndexes":[{"fieldNames":["order_id"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]},{"fieldNames":["shopping_mall_payment_methods_id"]}],"ginIndexes":[{"fieldName":"status"}]},{"name":"shopping_mall_payment_transactions","description":"Records individual transactions for payment processing and reconciliation","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payments_id","type":"uuid","description":"Payment this transaction belongs to. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":false}],"plainFields":[{"name":"transaction_id","type":"string","description":"External transaction identifier from payment processor.","nullable":false},{"name":"amount","type":"double","description":"Transaction amount.","nullable":false},{"name":"currency","type":"string","description":"Currency code for transaction.","nullable":false},{"name":"transaction_type","type":"string","description":"Type of transaction (authorization, capture, refund, etc.).","nullable":false},{"name":"status","type":"string","description":"Transaction status (success, failed, pending).","nullable":false},{"name":"response_code","type":"string","description":"Response code from payment gateway.","nullable":false},{"name":"response_message","type":"string","description":"Human-readable response message from gateway.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when transaction was processed.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last transaction update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["transaction_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_payments_id","transaction_type"]},{"fieldNames":["status","created_at"]}],"ginIndexes":[{"fieldName":"transaction_type"}]},{"name":"shopping_mall_payment_methods","description":"Stores available payment methods for customers to use in the shopping mall","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customers_id","type":"uuid","description":"Customer who owns this payment method. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"type","type":"string","description":"Payment method type (credit_card, debit_card, digital_wallet, bank_transfer).","nullable":false},{"name":"provider","type":"string","description":"Payment provider (Visa, MasterCard, PayPal, etc.).","nullable":false},{"name":"account_reference","type":"string","description":"Masked account number or token for the payment method.","nullable":false},{"name":"expiry_date","type":"datetime","description":"Expiry date for card-based payment methods.","nullable":true},{"name":"billing_address","type":"string","description":"Billing address associated with this payment method.","nullable":true},{"name":"is_default","type":"boolean","description":"Whether this is the default payment method for the customer.","nullable":false},{"name":"status","type":"string","description":"Payment method status (active, inactive, expired).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when payment method was added.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last payment method update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["account_reference"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_customers_id","is_default"]},{"fieldNames":["type","provider"]}],"ginIndexes":[{"fieldName":"type"}]},{"name":"shopping_mall_refunds","description":"Handles refund processing for canceled orders and returned items","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payments_id","type":"uuid","description":"Payment being refunded. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":false},{"name":"shopping_mall_orders_id","type":"uuid","description":"Order associated with this refund. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false}],"plainFields":[{"name":"refund_amount","type":"double","description":"Amount being refunded.","nullable":false},{"name":"currency","type":"string","description":"Currency code for refund.","nullable":false},{"name":"reason","type":"string","description":"Reason for refund (cancellation, return, warranty, etc.).","nullable":false},{"name":"status","type":"string","description":"Refund status (pending, processing, completed, failed).","nullable":false},{"name":"processed_by","type":"string","description":"Administrator or system that processed the refund.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when refund was requested.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last refund status update.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when refund was canceled.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_payments_id"],"unique":true}],"plainIndexes":[{"fieldNames":["status","created_at"]},{"fieldNames":["shopping_mall_orders_id"]}],"ginIndexes":[{"fieldName":"reason"}]},{"name":"shopping_mall_refund_transactions","description":"Records individual transactions for refund processing and reconciliation","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_refunds_id","type":"uuid","description":"Refund this transaction belongs to. {@link shopping_mall_refunds.id}.","relation":{"name":"refund","targetModel":"shopping_mall_refunds"},"unique":false,"nullable":false}],"plainFields":[{"name":"transaction_id","type":"string","description":"External transaction identifier from payment processor.","nullable":false},{"name":"amount","type":"double","description":"Refund transaction amount.","nullable":false},{"name":"currency","type":"string","description":"Currency code for transaction.","nullable":false},{"name":"status","type":"string","description":"Transaction status (success, failed, pending).","nullable":false},{"name":"response_code","type":"string","description":"Response code from payment gateway.","nullable":false},{"name":"response_message","type":"string","description":"Human-readable response message from gateway.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when refund transaction was processed.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last transaction update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["transaction_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_refunds_id","created_at"]},{"fieldNames":["status","created_at"]}],"ginIndexes":[{"fieldName":"response_code"},{"fieldName":"response_message"}]},{"name":"shopping_mall_fraud_detection","description":"System for detecting and preventing fraudulent payment activities","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payments_id","type":"uuid","description":"Payment being evaluated for fraud. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":false},{"name":"shopping_mall_customers_id","type":"uuid","description":"Customer associated with this fraud detection. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"risk_score","type":"double","description":"Calculated risk score (0-1) for potential fraud.","nullable":false},{"name":"detection_rules","type":"string","description":"Comma-separated list of fraud detection rules triggered.","nullable":false},{"name":"ip_address","type":"string","description":"IP address from payment request.","nullable":false},{"name":"device_fingerprint","type":"string","description":"Unique identifier for customer's device.","nullable":true},{"name":"geolocation_data","type":"string","description":"Geolocation information from IP address.","nullable":true},{"name":"transaction_velocity","type":"int","description":"Number of transactions from this customer in defined period.","nullable":false},{"name":"status","type":"string","description":"Fraud detection status (pending, cleared, flagged, blocked).","nullable":false},{"name":"reviewed_by","type":"string","description":"Administrator who reviewed this fraud detection.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when fraud detection was triggered.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last fraud detection status update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_payments_id"],"unique":true}],"plainIndexes":[{"fieldNames":["status","risk_score"]},{"fieldNames":["shopping_mall_customers_id","created_at"]}],"ginIndexes":[{"fieldName":"detection_rules"}]},{"name":"shopping_mall_payment_gateways","description":"Stores information about available payment gateway integrations","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"configured_by","type":"uuid","description":"Administrator who configured this gateway. {@link shopping_mall_administrators.id}.","relation":{"name":"configurer","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":false}],"plainFields":[{"name":"gateway_name","type":"string","description":"Name of the payment gateway (Stripe, PayPal, etc.).","nullable":false},{"name":"api_key","type":"string","description":"API key for gateway integration.","nullable":false},{"name":"secret_key","type":"string","description":"Secret key for secure gateway communication.","nullable":false},{"name":"webhook_url","type":"uri","description":"URL for gateway webhook notifications.","nullable":false},{"name":"status","type":"string","description":"Gateway status (active, inactive, testing).","nullable":false},{"name":"supported_currencies","type":"string","description":"JSON array of supported currencies.","nullable":false},{"name":"supported_methods","type":"string","description":"JSON array of supported payment methods.","nullable":false},{"name":"transaction_fee_rate","type":"double","description":"Transaction fee percentage charged by this gateway.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when gateway was configured.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last gateway configuration update.","nullable":false}],"uniqueIndexes":[{"fieldNames":["gateway_name"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"supported_currencies"}]},{"name":"shopping_mall_payment_logs","description":"Detailed logging of all payment system activities for auditing and debugging","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_payments_id","type":"uuid","description":"Payment associated with this log entry. {@link shopping_mall_payments.id}.","relation":{"name":"payment","targetModel":"shopping_mall_payments"},"unique":false,"nullable":true},{"name":"shopping_mall_refunds_id","type":"uuid","description":"Refund associated with this log entry. {@link shopping_mall_refunds.id}.","relation":{"name":"refund","targetModel":"shopping_mall_refunds"},"unique":false,"nullable":true},{"name":"initiated_by","type":"uuid","description":"User or system that initiated the payment activity. {@link shopping_mall_administrators.id}.","relation":{"name":"initiator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"log_level","type":"string","description":"Severity level of log (debug, info, warning, error).","nullable":false},{"name":"message","type":"string","description":"Log message describing the activity.","nullable":false},{"name":"source","type":"string","description":"Component that generated the log (gateway, fraud_detection, etc.).","nullable":false},{"name":"details","type":"string","description":"Additional JSON details about the log event.","nullable":true},{"name":"ip_address","type":"string","description":"IP address from which the activity originated.","nullable":true},{"name":"user_agent","type":"string","description":"User agent string from client request.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when log entry was created.","nullable":false}],"uniqueIndexes":[{"fieldNames":["created_at","source"],"unique":true}],"plainIndexes":[{"fieldNames":["log_level","created_at"]},{"fieldNames":["source"]},{"fieldNames":["shopping_mall_payments_id"]},{"fieldNames":["shopping_mall_refunds_id"]}],"ginIndexes":[{"fieldName":"message"}]}]},{"filename":"schema-07-inventory.prisma","namespace":"Inventory","models":[{"name":"shopping_mall_inventory","description":"Core inventory tracking entity that maintains current stock levels for all product variants (SKUs) in the e-commerce platform. This table is the primary source of truth for inventory availability and prevents overselling by ensuring real-time stock accuracy. Each record represents the current state of inventory for a specific SKU.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_product_variant_id","type":"uuid","description":"The product variant (SKU) being tracked. {@link shopping_mall_product_variants.id}.","relation":{"name":"productVariant","targetModel":"shopping_mall_product_variants"},"unique":false,"nullable":false},{"name":"shopping_seller_id","type":"uuid","description":"The seller responsible for this inventory. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_of_shopping_seller_id"},"unique":false,"nullable":false},{"name":"shopping_mall_location_id","type":"uuid","description":"The physical or virtual location where inventory is stored. {@link shopping_mall_sellers.id}.","relation":{"name":"location","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_of_shopping_mall_location_id"},"unique":false,"nullable":false},{"name":"shopping_mall_warehouse_id","type":"uuid","description":"The warehouse managing this inventory. {@link shopping_mall_sellers.id}.","relation":{"name":"warehouse","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_of_shopping_mall_warehouse_id"},"unique":false,"nullable":false}],"plainFields":[{"name":"quantity","type":"int","description":"Current stock count for this SKU. Must be a non-negative integer reflecting available inventory.","nullable":false},{"name":"reserved_quantity","type":"int","description":"Quantity of inventory reserved for pending orders that have not yet been confirmed. Prevents overselling.","nullable":false},{"name":"available_quantity","type":"int","description":"Calculated field representing quantity available for sale (quantity - reserved_quantity).","nullable":false},{"name":"business_status","type":"string","description":"Current inventory status (in_stock, low_stock, out_of_stock) used for business logic and user interface.","nullable":false},{"name":"cost_price","type":"double","description":"Per-unit cost price of the inventory for accounting and profit calculation purposes.","nullable":false},{"name":"last_count_date","type":"datetime","description":"Date and time when the physical inventory count was last performed for accuracy verification.","nullable":true},{"name":"count_accuracy","type":"double","description":"Percentage accuracy rating of the current inventory count based on recent physical audits.","nullable":true},{"name":"reorder_point","type":"int","description":"Minimum quantity level that triggers automatic restocking alerts.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this inventory record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this inventory record was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp. When set, this inventory is considered deactivated but retains history.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_product_variant_id","shopping_seller_id","shopping_mall_location_id"],"unique":true}],"plainIndexes":[{"fieldNames":["business_status","updated_at"]},{"fieldNames":["shopping_seller_id","updated_at"]}],"ginIndexes":[{"fieldName":"business_status"}]},{"name":"shopping_mall_inventory_snapshots","description":"Historical snapshot table that captures point-in-time states of inventory records for audit, reporting, and recovery purposes. Each snapshot preserves the complete state of an inventory record at a specific moment, allowing the system to reconstruct inventory levels at any previous date and track changes over time.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"The inventory record this snapshot is capturing. {@link shopping_mall_inventory.id}.","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"created_by_admin_id","type":"uuid","description":"The administrator who created or triggered this snapshot. {@link shopping_mall_administrators.id}.","relation":{"name":"createdByAdmin","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true},{"name":"created_by_seller_id","type":"uuid","description":"The seller who created or triggered this snapshot. {@link shopping_mall_sellers.id}.","relation":{"name":"createdBySeller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true}],"plainFields":[{"name":"quantity","type":"int","description":"Stock count at the time of snapshot.","nullable":false},{"name":"reserved_quantity","type":"int","description":"Reserved quantity at the time of snapshot.","nullable":false},{"name":"available_quantity","type":"int","description":"Available quantity at the time of snapshot.","nullable":false},{"name":"business_status","type":"string","description":"Inventory status at the time of snapshot.","nullable":false},{"name":"cost_price","type":"double","description":"Cost price at the time of snapshot.","nullable":false},{"name":"reorder_point","type":"int","description":"Reorder point at the time of snapshot.","nullable":false},{"name":"snapshot_type","type":"string","description":"Type of snapshot created: scheduled, manual, adjustment, transfer, writeoff, audit.","nullable":false},{"name":"source","type":"string","description":"Source of the snapshot: UI, API, batch process, import, system trigger.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this snapshot was created, which is the point-in-time being captured.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_inventory_id","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at","snapshot_type"]},{"fieldNames":["created_by_admin_id","created_at"]},{"fieldNames":["created_by_seller_id","created_at"]}],"ginIndexes":[{"fieldName":"snapshot_type"}]},{"name":"shopping_mall_inventory_adjustments","description":"Table that records manual inventory adjustments made by administrators, warehouse managers, or automated processes. These adjustments account for discrepancies between system records and physical counts, handling scenarios like received shipments, damaged goods, and stock corrections. Each adjustment represents a delta change to inventory levels.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"The inventory record being adjusted. {@link shopping_mall_inventory.id}.","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"admin_id","type":"uuid","description":"The administrator who authorized this adjustment. {@link shopping_mall_administrators.id}.","relation":{"name":"admin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_adjustments_of_admin_id"},"unique":false,"nullable":true},{"name":"suspended_by_admin_id","type":"uuid","description":"The administrator who suspended or reverted this adjustment. {@link shopping_mall_administrators.id}.","relation":{"name":"suspendedByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_adjustments_of_suspended_by_admin_id"},"unique":false,"nullable":true},{"name":"warehouse_manager_id","type":"uuid","description":"The warehouse manager responsible for this adjustment. {@link shopping_mall_sellers.id}.","relation":{"name":"warehouseManager","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true},{"name":"approver_admin_id","type":"uuid","description":"The administrator who approved this adjustment. {@link shopping_mall_administrators.id}.","relation":{"name":"approverAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_adjustments_of_approver_admin_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"previous_quantity","type":"int","description":"Inventory quantity before the adjustment was applied.","nullable":false},{"name":"new_quantity","type":"int","description":"Inventory quantity after the adjustment was applied.","nullable":false},{"name":"quantity_delta","type":"int","description":"Change in inventory quantity (new_quantity - previous_quantity).","nullable":false},{"name":"type","type":"string","description":"Type of adjustment: positive, negative, or transfer_out.","nullable":false},{"name":"reason","type":"string","description":"Justification for the adjustment (received_shipment, physical_count, damage, counting_error, expired).","nullable":false},{"name":"description","type":"string","description":"Detailed explanation of why the adjustment was necessary.","nullable":true},{"name":"adjustment_date","type":"datetime","description":"Date and time when the actual physical adjustment occurred.","nullable":false},{"name":"adjustment_status","type":"string","description":"Current status of the adjustment: pending, approved, rejected, completed.","nullable":false},{"name":"approval_date","type":"datetime","description":"Date and time when the adjustment was approved by the administrator.","nullable":true},{"name":"suspension_reason","type":"string","description":"Reason why this adjustment was suspended or reverted.","nullable":true},{"name":"suspension_date","type":"datetime","description":"Date and time when this adjustment was suspended.","nullable":true},{"name":"adjustment_source","type":"string","description":"Source of the adjustment: manual, automated, import, system.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this adjustment record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this adjustment record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_inventory_id","adjustment_date","reason"],"unique":true}],"plainIndexes":[{"fieldNames":["adjustment_date","adjustment_status"]},{"fieldNames":["type","adjustment_status","adjustment_date"]}],"ginIndexes":[{"fieldName":"reason"}]},{"name":"shopping_mall_inventory_history","description":"Subsidiary table that maintains a complete historical record of all changes to inventory levels over time. This table aggregates data from inventory snapshots, adjustments, transfers, write-offs, and other inventory movements to provide a comprehensive audit trail of stock changes. It is designed to support reporting, analytics, and inventory trend analysis.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"The inventory record this history entry relates to. {@link shopping_mall_inventory.id}.","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"shopping_mall_inventory_adjustment_id","type":"uuid","description":"The specific inventory adjustment that caused this change. {@link shopping_mall_inventory_adjustments.id}.","relation":{"name":"inventoryAdjustment","targetModel":"shopping_mall_inventory_adjustments"},"unique":false,"nullable":true},{"name":"shopping_mall_inventory_transfer_id","type":"uuid","description":"The inventory transfer that caused this change. {@link shopping_mall_inventory_transfers.id}.","relation":{"name":"inventoryTransfer","targetModel":"shopping_mall_inventory_transfers"},"unique":false,"nullable":true},{"name":"shopping_mall_inventory_writeoff_id","type":"uuid","description":"The inventory write-off that caused this change. {@link shopping_mall_inventory_writeoffs.id}.","relation":{"name":"inventoryWriteoff","targetModel":"shopping_mall_inventory_writeoffs"},"unique":false,"nullable":true},{"name":"created_by_admin_id","type":"uuid","description":"The administrator who initiated or approved the change. {@link shopping_mall_administrators.id}.","relation":{"name":"createdByAdmin","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"quantity_before","type":"int","description":"Inventory quantity before the change occurred.","nullable":false},{"name":"quantity_after","type":"int","description":"Inventory quantity after the change was applied.","nullable":false},{"name":"quantity_delta","type":"int","description":"Net change in inventory quantity for this event.","nullable":false},{"name":"change_type","type":"string","description":"Type of inventory change: adjustment, transfer_in, transfer_out, writeoff, sale, restock.","nullable":false},{"name":"change_source","type":"string","description":"Source of the change: system, user, API, import, batch.","nullable":false},{"name":"change_reason","type":"string","description":"Reason for the change, corresponding to the specific event that caused it.","nullable":false},{"name":"location_from","type":"uuid","description":"Previous location for transfer events. {@link shopping_mall_locations.id}.","nullable":true},{"name":"location_to","type":"uuid","description":"New location for transfer events. {@link shopping_mall_locations.id}.","nullable":true},{"name":"warehouse_from","type":"uuid","description":"Previous warehouse for transfer events. {@link shopping_mall_warehouses.id}.","nullable":true},{"name":"warehouse_to","type":"uuid","description":"New warehouse for transfer events. {@link shopping_mall_warehouses.id}.","nullable":true},{"name":"business_status","type":"string","description":"Inventory status after the change was applied.","nullable":false},{"name":"is_reversal","type":"boolean","description":"Indicates if this change reverses a previous inventory event.","nullable":false},{"name":"reversal_for_id","type":"uuid","description":"Reference to the inventory history record being reversed. {@link shopping_mall_inventory_history.id}.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this change was recorded in the system.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this history record was last updated.","nullable":false},{"name":"processed_at","type":"datetime","description":"Timestamp when this change was processed and reflected in inventory counts.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_inventory_id","created_at","change_type"],"unique":true}],"plainIndexes":[{"fieldNames":["change_type","created_at","change_source"]},{"fieldNames":["shopping_mall_inventory_id","processed_at"]}],"ginIndexes":[{"fieldName":"change_reason"}]},{"name":"shopping_mall_inventory_thresholds","description":"Table that defines configurable thresholds for inventory levels that trigger automated alerts and business workflows. These thresholds represent the business rules for when inventory should be monitored or action should be taken, such as low-stock alerts, reorder triggers, and high-stock warnings. Each threshold is associated with a specific inventory record.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"The inventory record this threshold applies to. {@link shopping_mall_inventory.id}.","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"created_by_admin_id","type":"uuid","description":"The administrator who created this threshold. {@link shopping_mall_administrators.id}.","relation":{"name":"createdByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_thresholds_of_created_by_admin_id"},"unique":false,"nullable":true},{"name":"last_modified_by_admin_id","type":"uuid","description":"The administrator who last modified this threshold. {@link shopping_mall_administrators.id}.","relation":{"name":"lastModifiedByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_thresholds_of_last_modified_by_admin_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"low_stock_threshold","type":"int","description":"Minimum quantity level that triggers low-stock alerts.","nullable":false},{"name":"reorder_threshold","type":"int","description":"Quantity level that triggers automatic reorder processes.","nullable":false},{"name":"high_stock_threshold","type":"int","description":"Maximum quantity level that triggers high-stock alerts to prevent overstocking.","nullable":false},{"name":"alert_recipients","type":"string","description":"Comma-separated list of email addresses or user IDs to notify when thresholds are crossed.","nullable":false},{"name":"notification_method","type":"string","description":"Preferred method for threshold alerts: email, in_app, both.","nullable":false},{"name":"is_active","type":"boolean","description":"Whether this threshold configuration is currently active and being monitored.","nullable":false},{"name":"alert_frequency","type":"string","description":"How often to send alerts after threshold is crossed: once, hourly, daily, weekly.","nullable":false},{"name":"alert_snooze_until","type":"datetime","description":"Timestamp until which alerts for this threshold should be suspended.","nullable":true},{"name":"escalation_level","type":"int","description":"Severity level for alerts (1-5), determining escalation path and response time requirements.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this threshold record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this threshold record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_inventory_id"],"unique":true}],"plainIndexes":[{"fieldNames":["low_stock_threshold","reorder_threshold","high_stock_threshold"]}],"ginIndexes":[{"fieldName":"notification_method"}]},{"name":"shopping_mall_inventory_transfers","description":"Table that documents planned and completed transfers of inventory between locations, warehouses, or storage units. This supports the logistics of moving stock between different physical or conceptual locations within the fulfillment network. Transfers include information about the quantity moved, source and destination, and fulfillment status.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"The inventory record being transferred. {@link shopping_mall_inventory.id}.","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"source_location_id","type":"uuid","description":"The location where inventory is being transferred from. {@link shopping_mall_sellers.id}.","relation":{"name":"sourceLocation","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_transfers_of_source_location_id"},"unique":false,"nullable":false},{"name":"destination_location_id","type":"uuid","description":"The location where inventory is being transferred to. {@link shopping_mall_sellers.id}.","relation":{"name":"destinationLocation","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_transfers_of_destination_location_id"},"unique":false,"nullable":false},{"name":"source_warehouse_id","type":"uuid","description":"The warehouse where inventory is being transferred from. {@link shopping_mall_sellers.id}.","relation":{"name":"sourceWarehouse","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_transfers_of_source_warehouse_id"},"unique":false,"nullable":false},{"name":"destination_warehouse_id","type":"uuid","description":"The warehouse where inventory is being transferred to. {@link shopping_mall_sellers.id}.","relation":{"name":"destinationWarehouse","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_transfers_of_destination_warehouse_id"},"unique":false,"nullable":false},{"name":"prepared_by_admin_id","type":"uuid","description":"The administrator who prepared this transfer request. {@link shopping_mall_administrators.id}.","relation":{"name":"preparedByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_transfers_of_prepared_by_admin_id"},"unique":false,"nullable":false},{"name":"approved_by_admin_id","type":"uuid","description":"The administrator who approved this transfer. {@link shopping_mall_administrators.id}.","relation":{"name":"approvedByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_transfers_of_approved_by_admin_id"},"unique":false,"nullable":true},{"name":"executed_by_warehouse_manager_id","type":"uuid","description":"The warehouse manager who executed this transfer. {@link shopping_mall_sellers.id}.","relation":{"name":"executedByWarehouseManager","targetModel":"shopping_mall_sellers","mappingName":"shopping_mall_inventory_transfers_of_executed_by_wareh_262e92d2"},"unique":false,"nullable":true},{"name":"canceled_by_admin_id","type":"uuid","description":"The administrator who cancelled this transfer. {@link shopping_mall_administrators.id}.","relation":{"name":"canceledByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_transfers_of_canceled_by_admin_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"quantity","type":"int","description":"Number of units being transferred.","nullable":false},{"name":"current_quantity_remaining","type":"int","description":"Quantity remaining to be fulfilled for this transfer.","nullable":false},{"name":"transfer_type","type":"string","description":"Type of transfer: internal, external, replenishment, redistribution.","nullable":false},{"name":"transfer_status","type":"string","description":"Current status of the transfer process: requested, approved, in_transit, partially_received, completed, cancelled.","nullable":false},{"name":"priority","type":"string","description":"Transfer priority level (low, normal, high, urgent) affecting fulfillment scheduling.","nullable":false},{"name":"shipping_method","type":"string","description":"Method used to transport inventory: truck, courier, hand_carry, own_vehicle.","nullable":false},{"name":"estimated_transit_days","type":"int","description":"Expected number of days for the transfer to complete.","nullable":false},{"name":"tracking_number","type":"string","description":"Transport tracking identifier for the physical shipment.","nullable":true},{"name":"carrier","type":"string","description":"Shipping carrier responsible for the transfer.","nullable":true},{"name":"prepared_at","type":"datetime","description":"Date and time when this transfer was prepared and approved.","nullable":false},{"name":"dispatched_at","type":"datetime","description":"Date and time when inventory was dispatched from the source location.","nullable":true},{"name":"in_transit_at","type":"datetime","description":"Date and time when inventory was confirmed to be in transit.","nullable":true},{"name":"estimated_arrival_at","type":"datetime","description":"Expected date and time of arrival at the destination.","nullable":false},{"name":"received_at","type":"datetime","description":"Date and time when inventory was received at the destination.","nullable":true},{"name":"canceled_at","type":"datetime","description":"Date and time when this transfer was cancelled.","nullable":true},{"name":"cancellation_reason","type":"string","description":"Reason why this transfer was cancelled.","nullable":true},{"name":"completion_notes","type":"string","description":"Notes about transfer completion, including any discrepancies or issues.","nullable":true},{"name":"requires_signature","type":"boolean","description":"Whether the transfer requires signature upon receipt.","nullable":false},{"name":"temperature_controlled","type":"boolean","description":"Whether the transfer requires temperature-controlled transport.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when this transfer record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this transfer record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["tracking_number"],"unique":true}],"plainIndexes":[{"fieldNames":["transfer_status","prepared_at"]},{"fieldNames":["source_location_id","destination_location_id","prepared_at"]},{"fieldNames":["transfer_type","priority"]}],"ginIndexes":[{"fieldName":"cancellation_reason"}]},{"name":"shopping_mall_inventory_writeoffs","description":"Table that records the formal write-off of inventory due to damage, expiration, loss, or other reasons that make stock unsellable. This represents the permanent removal of inventory from available stock and is a business-critical operation that requires proper documentation, authorization, and accounting treatment.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_inventory_id","type":"uuid","description":"The inventory record being written off. {@link shopping_mall_inventory.id}.","relation":{"name":"inventory","targetModel":"shopping_mall_inventory"},"unique":false,"nullable":false},{"name":"written_off_by_admin_id","type":"uuid","description":"The administrator who authorized this write-off. {@link shopping_mall_administrators.id}.","relation":{"name":"writtenOffByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_writeoffs_of_written_off_by_admin_id"},"unique":false,"nullable":true},{"name":"approved_by_admin_id","type":"uuid","description":"The administrator who approved this write-off. {@link shopping_mall_administrators.id}.","relation":{"name":"approvedByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_writeoffs_of_approved_by_admin_id"},"unique":false,"nullable":true},{"name":"suspended_by_admin_id","type":"uuid","description":"The administrator who suspended or reversed this write-off. {@link shopping_mall_administrators.id}.","relation":{"name":"suspendedByAdmin","targetModel":"shopping_mall_administrators","mappingName":"shopping_mall_inventory_writeoffs_of_suspended_by_admin_id"},"unique":false,"nullable":true}],"plainFields":[{"name":"quantity","type":"int","description":"Number of units being written off (removed from inventory).","nullable":false},{"name":"writeoff_type","type":"string","description":"Category of write-off: damaged, expired, lost, obsolete, recalled.","nullable":false},{"name":"writeoff_reason","type":"string","description":"Detailed reason for the write-off, providing context for the business decision.","nullable":false},{"name":"writeoff_status","type":"string","description":"Current status of the write-off process: requested, approved, completed, suspended, reversed.","nullable":false},{"name":"estimated_value","type":"double","description":"Estimated monetary value of the inventory being written off for accounting purposes.","nullable":false},{"name":"approved_at","type":"datetime","description":"Date and time when this write-off was approved.","nullable":true},{"name":"executed_at","type":"datetime","description":"Date and time when the write-off was physically executed.","nullable":false},{"name":"suspended_at","type":"datetime","description":"Date and time when this write-off was suspended.","nullable":true},{"name":"suspension_reason","type":"string","description":"Reason why this write-off was suspended or reversed.","nullable":true},{"name":"documentation_file_path","type":"string","description":"File path or URI to supporting documentation for this write-off (photos, reports, forms).","nullable":true},{"name":"regulatory_impact","type":"string","description":"Potential impact on regulatory compliance due to this write-off.","nullable":true},{"name":"tax_implications","type":"string","description":"Tax consequences of this write-off, important for accounting departments.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this write-off record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this write-off record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_inventory_id","executed_at","writeoff_type"],"unique":true}],"plainIndexes":[{"fieldNames":["writeoff_type","writeoff_status","executed_at"]},{"fieldNames":["created_at","executed_at"]}],"ginIndexes":[{"fieldName":"writeoff_reason"}]}]},{"filename":"schema-08-reviews.prisma","namespace":"Reviews","models":[{"name":"shopping_mall_reviews","description":"Primary table for storing customer product reviews with verification and moderation capabilities. This table captures the core review information submitted by customers who have actually purchased products, ensuring authenticity and preventing fake reviews. Reviews include star ratings, titles, content, and purchase verification to build trust with prospective buyers.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","description":"Reference to the product being reviewed. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Reference to the customer who submitted the review. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"rating","type":"int","description":"Star rating from 1-5 for the product.","nullable":false},{"name":"title","type":"string","description":"Review title (minimum 10 characters).","nullable":false},{"name":"content","type":"string","description":"Review content (minimum 50 characters, maximum 5000).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the review was submitted.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the review was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_id","shopping_mall_customer_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_product_id","created_at"]},{"fieldNames":["shopping_mall_customer_id"]}],"ginIndexes":[{"fieldName":"content"}]},{"description":"Subsidiary table for storing detailed attribute ratings within a review. This table supports rich rating feedback by allowing customers to rate specific product attributes such as quality, value, and shipping speed. Each attribute rating is linked to a parent review and the specific product attribute being rated.","foreignFields":[{"description":"Reference to the parent review. {<@link shopping_mall_reviews.id}.","name":"shopping_mall_review_id","nullable":false,"relation":{"name":"review","targetModel":"shopping_mall_reviews"},"type":"uuid","unique":false},{"description":"Reference to the product attribute being rated. {<@link shopping_mall_product_attributes.id}.","name":"shopping_mall_product_attribute_id","nullable":false,"relation":{"name":"productAttribute","targetModel":"shopping_mall_product_attributes"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_review_ratings","plainFields":[{"description":"Rating for the specific product attribute (1-5).","name":"attribute_rating","nullable":false,"type":"int"},{"description":"Timestamp when the attribute rating was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp when the attribute rating was last updated.","name":"updated_at","nullable":false,"type":"datetime"}],"plainIndexes":[{"fieldNames":["shopping_mall_review_id"]},{"fieldNames":["shopping_mall_product_attribute_id"]},{"fieldNames":["attribute_rating"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"subsidiary","uniqueIndexes":[{"fieldNames":["shopping_mall_review_id","shopping_mall_product_attribute_id"],"unique":true}]},{"name":"shopping_mall_review_votes","description":"Subsidiary table for storing helpfulness votes on reviews. This table enables customers to vote on whether a review was helpful in their purchase decision, providing social validation and helping surface the most useful feedback. Votes are recorded with their type (helpful or not helpful) and timestamp.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Reference to the review being voted on. {@link shopping_mall_reviews.id}.","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Reference to the customer casting the vote. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"vote_type","type":"string","description":"Type of vote: 'helpful' or 'not_helpful'.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the vote was cast.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id","shopping_mall_customer_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_review_id","vote_type"]},{"fieldNames":["shopping_mall_customer_id"]}],"ginIndexes":[{"fieldName":"vote_type"}]},{"name":"shopping_mall_review_media","description":"Subsidiary table for storing media files (photos, videos) uploaded with reviews. This table supports rich, multimedia reviews by allowing customers to share their product experiences visually. Each media entry includes the file type, URL, thumbnail, sort order, and optimization status for efficient web display.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Reference to the parent review. {@link shopping_mall_reviews.id}.","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":false,"nullable":false}],"plainFields":[{"name":"media_type","type":"string","description":"Type of media: 'image' or 'video'.","nullable":false},{"name":"media_url","type":"uri","description":"URL to the media file.","nullable":false},{"name":"media_thumbnail","type":"uri","description":"URL to the thumbnail version of the media.","nullable":false},{"name":"sort_order","type":"int","description":"Order in which media should be displayed.","nullable":false},{"name":"is_optimized","type":"boolean","description":"Whether the media has been optimized for web display.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the media was uploaded.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id","sort_order"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_review_id","media_type"]}],"ginIndexes":[{"fieldName":"media_type"}]},{"name":"shopping_mall_review_moderation","description":"Primary table for managing the review moderation workflow. This table tracks the complete moderation process from review submission to final decision, including automated content analysis results, human moderator assignments, and decision timestamps. It enables comprehensive oversight of review quality and policy compliance.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Reference to the review being moderated. {@link shopping_mall_reviews.id}.","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":true,"nullable":false},{"name":"shopping_mall_moderator_id","type":"uuid","description":"Reference to the administrator moderating the review. {@link shopping_mall_administrators.id}.","relation":{"name":"moderator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true},{"name":"shopping_mall_reporter_id","type":"uuid","description":"Reference to the customer who reported the review (if applicable). {@link shopping_mall_customers.id}.","relation":{"name":"reporter","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true}],"plainFields":[{"name":"submission_date","type":"datetime","description":"Timestamp when the review was submitted.","nullable":false},{"name":"automated_analysis","type":"string","description":"Results from automated content analysis algorithms.","nullable":false},{"name":"requires_human_review","type":"boolean","description":"Whether the review requires human moderator evaluation.","nullable":false},{"name":"moderation_date","type":"datetime","description":"Timestamp when human moderation was completed.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the moderation record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the moderation record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id"],"unique":true}],"plainIndexes":[{"fieldNames":["requires_human_review","submission_date"]},{"fieldNames":["shopping_mall_moderator_id"]}],"ginIndexes":[{"fieldName":"automated_analysis"}]},{"description":"Subsidiary table for tracking the status lifecycle of reviews through the moderation process. This table maintains a complete audit trail of status changes, showing the progression from draft to final publication or rejection. Each status change is recorded with a timestamp for compliance and accountability.","foreignFields":[{"description":"Reference to the moderation record. {<@link shopping_mall_review_moderation.id}.","name":"shopping_mall_review_moderation_id","nullable":false,"relation":{"name":"reviewModeration","targetModel":"shopping_mall_review_moderation"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_review_status","plainFields":[{"description":"Current status: 'draft', 'submitted', 'under_review', 'approved', 'rejected', 'archived'.","name":"status","nullable":false,"type":"string"},{"description":"Timestamp when this status was recorded.","name":"created_at","nullable":false,"type":"datetime"}],"plainIndexes":[{"fieldNames":["shopping_mall_review_moderation_id","created_at"]},{"fieldNames":["status"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"subsidiary","uniqueIndexes":[{"fieldNames":["shopping_mall_review_moderation_id","status","created_at"],"unique":true}]},{"name":"shopping_mall_seller_responses","description":"Subsidiary table for storing seller responses to customer reviews. This table enables sellers to publicly respond to feedback, acknowledge customer experiences, and provide clarifications. Responses are linked to specific reviews and sellers, with moderation requirements to ensure compliance with platform guidelines.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Reference to the review being responded to. {@link shopping_mall_reviews.id}.","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":true,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"Reference to the responding seller. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"response_text","type":"string","description":"Seller's response to the customer review.","nullable":false},{"name":"is_moderated","type":"boolean","description":"Whether the seller response has passed moderator review.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the response was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the response was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_seller_id","created_at"]},{"fieldNames":["is_moderated"]}],"ginIndexes":[{"fieldName":"response_text"}]},{"name":"shopping_mall_review_notifications","description":"Subsidiary table for managing notifications related to review activities. This table tracks all automated and manual notifications sent to users regarding their reviews, including submission confirmations, moderation decisions, and seller responses. Each notification record includes the recipient, type, and delivery status.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"Reference to the associated review. {@link shopping_mall_reviews.id}.","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":false,"nullable":false},{"name":"shopping_mall_recipient_id","type":"uuid","description":"Reference to the user receiving the notification. {@link shopping_mall_customers.id}.","relation":{"name":"recipient","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false}],"plainFields":[{"name":"notification_type","type":"string","description":"Type of notification: 'submission_confirmation', 'approval', 'rejection', 'moderator_request', 'seller_response', etc.","nullable":false},{"name":"is_delivered","type":"boolean","description":"Whether the notification has been successfully delivered.","nullable":false},{"name":"is_read","type":"boolean","description":"Whether the recipient has viewed the notification.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the notification was created.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id","shopping_mall_recipient_id","notification_type","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_recipient_id","created_at"]},{"fieldNames":["notification_type","is_delivered"]}],"ginIndexes":[{"fieldName":"notification_type"}]}]},{"filename":"schema-09-promotions.prisma","namespace":"Promotions","models":[{"name":"shopping_mall_promotions","description":"Contains information about marketing promotions, including start/end dates, eligibility criteria, and status tracking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_seller_id","type":"uuid","description":"Target description. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true}],"plainFields":[{"name":"name","type":"string","description":"The name of the promotion for display purposes.","nullable":false},{"name":"description","type":"string","description":"Detailed description of the promotion terms and conditions.","nullable":false},{"name":"start_date","type":"datetime","description":"When the promotion becomes active and available.","nullable":false},{"name":"end_date","type":"datetime","description":"When the promotion expires and is no longer available.","nullable":false},{"name":"status","type":"string","description":"Current state of the promotion (active, expired, cancelled, pending).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp of when the promotion was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of when the promotion was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp of when the promotion was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["start_date","end_date"]},{"fieldNames":["status"]}],"ginIndexes":[{"fieldName":"description"}]},{"description":"Stores coupon details including discount amounts, usage limits, and expiration dates.","foreignFields":[{"description":"Target description. {<@link shopping_mall_promotions.id}.","name":"shopping_mall_promotion_id","nullable":false,"relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"type":"uuid","unique":false},{"description":"Target description. {<@link shopping_mall_customers.id}.","name":"shopping_mall_customer_id","nullable":true,"relation":{"name":"customer","targetModel":"shopping_mall_customers"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_coupons","plainFields":[{"description":"Unique alphanumeric code for the coupon.","name":"code","nullable":false,"type":"string"},{"description":"Type of discount (amount, percentage, free_shipping).","name":"discount_type","nullable":false,"type":"string"},{"description":"Value of the discount applied.","name":"discount_value","nullable":false,"type":"double"},{"description":"Minimum order value required to use the coupon.","name":"minimum_order_value","nullable":true,"type":"double"},{"description":"Maximum number of times the coupon can be used.","name":"usage_limit","nullable":true,"type":"int"},{"description":"Maximum times a single customer can use the coupon.","name":"per_customer_limit","nullable":true,"type":"int"},{"description":"Date when the coupon expires.","name":"expiration_date","nullable":false,"type":"datetime"},{"description":"Timestamp of when the coupon was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the coupon was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the coupon was soft deleted.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["expiration_date"]},{"fieldNames":["discount_type"]},{"fieldNames":["shopping_mall_customer_id"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["code"],"unique":true}]},{"description":"Contains information about specific discounts applied to products or categories.","foreignFields":[{"description":"Target description. {<@link shopping_mall_promotions.id}.","name":"shopping_mall_promotion_id","nullable":false,"relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_discounts","plainFields":[{"description":"The discount amount applied.","name":"amount","nullable":false,"type":"double"},{"description":"The discount percentage applied.","name":"percentage","nullable":true,"type":"double"},{"description":"When the discount becomes active.","name":"start_date","nullable":false,"type":"datetime"},{"description":"When the discount expires.","name":"end_date","nullable":false,"type":"datetime"},{"description":"Minimum order value required for discount.","name":"minimum_order_value","nullable":true,"type":"double"},{"description":"Maximum amount that can be discounted.","name":"maximum_discount_amount","nullable":true,"type":"double"},{"description":"Timestamp of when the discount was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the discount was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the discount was soft deleted.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["start_date","end_date"]},{"fieldNames":["percentage"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["shopping_mall_promotion_id"],"unique":true}]},{"description":"Tracks flash sale events with specific start/end times and pricing.","foreignFields":[{"description":"Target description. {<@link shopping_mall_promotions.id}.","name":"shopping_mall_promotion_id","nullable":false,"relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"type":"uuid","unique":false},{"description":"Target description. {<@link shopping_mall_sellers.id}.","name":"shopping_mall_seller_id","nullable":false,"relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_flash_sales","plainFields":[{"description":"When the flash sale begins.","name":"start_time","nullable":false,"type":"datetime"},{"description":"When the flash sale ends.","name":"end_time","nullable":false,"type":"datetime"},{"description":"Current state of the flash sale (scheduled, live, completed, cancelled).","name":"status","nullable":false,"type":"string"},{"description":"The discount percentage offered during flash sale.","name":"discount_percentage","nullable":false,"type":"double"},{"description":"Maximum number of items available during flash sale.","name":"maximum_quantity","nullable":true,"type":"int"},{"description":"Number of items sold during the flash sale.","name":"sold_quantity","nullable":false,"type":"int"},{"description":"Timestamp of when the flash sale was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the flash sale was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the flash sale was soft deleted.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["start_time","end_time"]},{"fieldNames":["status"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["shopping_mall_promotion_id"],"unique":true}]},{"description":"Stores promotional code information for tracking and validation.","foreignFields":[{"description":"Target description. {<@link shopping_mall_promotions.id}.","name":"shopping_mall_promotion_id","nullable":false,"relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_promo_codes","plainFields":[{"description":"The actual promotional code used by customers.","name":"code","nullable":false,"type":"string"},{"description":"Maximum number of times this promo code can be used.","name":"max_uses","nullable":true,"type":"int"},{"description":"Number of times this promo code has been used.","name":"current_uses","nullable":false,"type":"int"},{"description":"When the promo code becomes active.","name":"start_date","nullable":false,"type":"datetime"},{"description":"When the promo code expires.","name":"end_date","nullable":false,"type":"datetime"},{"description":"Current state of the promo code (active, expired, cancelled).","name":"status","nullable":false,"type":"string"},{"description":"Timestamp of when the promo code was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the promo code was last updated.","name":"updated_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the promo code was soft deleted.","name":"deleted_at","nullable":true,"type":"datetime"}],"plainIndexes":[{"fieldNames":["start_date","end_date"]},{"fieldNames":["status"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"primary","uniqueIndexes":[{"fieldNames":["code"],"unique":true}]},{"description":"Tracks how promotions are being used by customers.","foreignFields":[{"description":"Target description. {<@link shopping_mall_promotions.id}.","name":"shopping_mall_promotion_id","nullable":false,"relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"type":"uuid","unique":false},{"description":"Target description. {<@link shopping_mall_customers.id}.","name":"shopping_mall_customer_id","nullable":false,"relation":{"name":"customer","targetModel":"shopping_mall_customers"},"type":"uuid","unique":false},{"description":"Target description. {<@link shopping_mall_orders.id}.","name":"shopping_mall_order_id","nullable":true,"relation":{"name":"order","targetModel":"shopping_mall_orders"},"type":"uuid","unique":false},{"description":"Target description. {<@link shopping_mall_promo_codes.id}.","name":"shopping_mall_promo_code_id","nullable":true,"relation":{"name":"promoCode","targetModel":"shopping_mall_promo_codes"},"type":"uuid","unique":false}],"ginIndexes":[],"material":false,"name":"shopping_mall_promotion_usage","plainFields":[{"description":"When the promotion was used.","name":"usage_date","nullable":false,"type":"datetime"},{"description":"Amount of discount applied by the promotion.","name":"discount_amount","nullable":false,"type":"double"},{"description":"Order value before promotion was applied.","name":"original_order_value","nullable":false,"type":"double"},{"description":"Order value after promotion was applied.","name":"final_order_value","nullable":false,"type":"double"},{"description":"Timestamp of when the usage record was created.","name":"created_at","nullable":false,"type":"datetime"},{"description":"Timestamp of when the usage record was last updated.","name":"updated_at","nullable":false,"type":"datetime"}],"plainIndexes":[{"fieldNames":["usage_date"]},{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["shopping_mall_order_id"]}],"primaryField":{"description":"Primary Key.","name":"id","type":"uuid"},"stance":"subsidiary","uniqueIndexes":[{"fieldNames":["shopping_mall_promotion_id","shopping_mall_customer_id","usage_date"],"unique":true}]},{"name":"shopping_mall_promotion_redemptions","description":"Tracks individual redemption events of promotions by customers.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_promotion_id","type":"uuid","description":"Target description. {@link shopping_mall_promotions.id}.","relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"Target description. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_order_id","type":"uuid","description":"Target description. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false},{"name":"shopping_mall_coupon_id","type":"uuid","description":"Target description. {@link shopping_mall_coupons.id}.","relation":{"name":"coupon","targetModel":"shopping_mall_coupons"},"unique":false,"nullable":true},{"name":"shopping_mall_promo_code_id","type":"uuid","description":"Target description. {@link shopping_mall_promo_codes.id}.","relation":{"name":"promoCode","targetModel":"shopping_mall_promo_codes"},"unique":false,"nullable":true}],"plainFields":[{"name":"redemption_date","type":"datetime","description":"When the promotion was redeemed.","nullable":false},{"name":"discount_amount","type":"double","description":"Amount of discount applied.","nullable":false},{"name":"original_order_value","type":"double","description":"Order value before promotion.","nullable":false},{"name":"final_order_value","type":"double","description":"Order value after promotion.","nullable":false},{"name":"status","type":"string","description":"Current state of the redemption (completed, cancelled, refunded).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp of when the redemption record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of when the redemption record was last updated.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_promotion_id","shopping_mall_customer_id","shopping_mall_order_id","redemption_date"],"unique":true}],"plainIndexes":[{"fieldNames":["redemption_date"]},{"fieldNames":["status"]},{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["final_order_value"]}],"ginIndexes":[]},{"name":"shopping_mall_promotion_eligibility","description":"Contains rules for determining promotion eligibility.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_promotion_id","type":"uuid","description":"Target description. {@link shopping_mall_promotions.id}.","relation":{"name":"promotion","targetModel":"shopping_mall_promotions"},"unique":false,"nullable":false}],"plainFields":[{"name":"eligibility_type","type":"string","description":"Type of eligibility rule (customer_segment, product_category, order_value, first_time_buyer).","nullable":false},{"name":"criteria","type":"string","description":"JSON containing specific eligibility criteria.","nullable":false},{"name":"priority","type":"int","description":"Order in which rules should be evaluated.","nullable":false},{"name":"is_exclusive","type":"boolean","description":"Whether this eligibility rule is mutually exclusive.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp of when the eligibility rule was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of when the eligibility rule was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp of when the eligibility rule was soft deleted.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_promotion_id","eligibility_type"],"unique":true}],"plainIndexes":[{"fieldNames":["eligibility_type"]},{"fieldNames":["priority"]},{"fieldNames":["is_exclusive"]}],"ginIndexes":[{"fieldName":"criteria"}]}]},{"filename":"schema-10-administrative.prisma","namespace":"Administrative","models":[{"name":"shopping_mall_admin_actions","description":"Tracks all administrative actions across the platform including modifications to orders, users, products, and system settings. This table provides a comprehensive record of administrator interventions for accountability and compliance purposes.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to the administrator who performed the action. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":false}],"plainFields":[{"name":"action_type","type":"string","description":"Type of administrative action performed (e.g., 'order_status_update', 'user_suspension', 'product_removal')","nullable":false},{"name":"target_entity","type":"string","description":"The entity that was acted upon (e.g., 'order', 'user', 'product')","nullable":false},{"name":"target_entity_id","type":"uuid","description":"The ID of the specific entity that was acted upon","nullable":false},{"name":"action_details","type":"string","description":"Specific details about the action performed, including change descriptions and justification","nullable":false},{"name":"impacted_records","type":"int","description":"Number of records impacted by this action","nullable":false},{"name":"priority","type":"string","description":"Priority level of the action (e.g., 'low', 'medium', 'high', 'critical')","nullable":false},{"name":"status","type":"string","description":"Current status of the action (e.g., 'completed', 'in_progress', 'pending_review')","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the action was initiated","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the action record was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the action record was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_administrator_id","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["action_type","status"]},{"fieldNames":["target_entity","target_entity_id"]},{"fieldNames":["created_at","priority"]}],"ginIndexes":[{"fieldName":"action_details"}]},{"name":"shopping_mall_admin_notes","description":"Stores administrative notes and observations made by platform administrators. These notes provide context for decisions, document issues, and track ongoing concerns that don't require immediate action but need to be recorded for future reference.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to the administrator who created the note. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Descriptive title for the note","nullable":false},{"name":"content","type":"string","description":"Full text of the administrative note","nullable":false},{"name":"note_type","type":"string","description":"Category of the note (e.g., 'observation', 'warning', 'follow_up', 'policy_concern')","nullable":false},{"name":"sensitivity_level","type":"string","description":"Sensitivity level of the note (e.g., 'public', 'internal', 'confidential', 'restricted')","nullable":false},{"name":"related_entities","type":"string","description":"JSON array of related entities that this note references","nullable":true},{"name":"tags","type":"string","description":"Comma-separated tags for categorizing and searching notes","nullable":true},{"name":"status","type":"string","description":"Current status of the note (e.g., 'active', 'resolved', 'archived')","nullable":false},{"name":"related_action_id","type":"uuid","description":"Reference to a related admin action if applicable. {@link shopping_mall_admin_actions.id}.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the note was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the note was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the note was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_administrator_id","title","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["note_type","status"]},{"fieldNames":["sensitivity_level","created_at"]},{"fieldNames":["related_action_id"]}],"ginIndexes":[{"fieldName":"content"}]},{"name":"shopping_mall_admin_alerts","description":"Handles critical system alerts that require administrator attention. This table manages the alert lifecycle from detection through resolution, ensuring that important issues are properly tracked and addressed.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to the administrator assigned to handle the alert. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"alert_type","type":"string","description":"Type of alert (e.g., 'fraud_detection', 'system_failure', 'policy_violation', 'inventory_critical')","nullable":false},{"name":"severity","type":"string","description":"Severity level of the alert (e.g., 'info', 'warning', 'error', 'critical')","nullable":false},{"name":"source","type":"string","description":"System component or process that generated the alert","nullable":false},{"name":"description","type":"string","description":"Detailed description of the alert condition","nullable":false},{"name":"trigger_data","type":"string","description":"JSON representation of the data that triggered the alert","nullable":false},{"name":"affected_users","type":"int","description":"Number of users potentially affected by this alert condition","nullable":false},{"name":"related_entities","type":"string","description":"JSON array of related system entities involved in the alert","nullable":true},{"name":"deadline","type":"datetime","description":"Timestamp by which the alert should be addressed","nullable":true},{"name":"resolution_notes","type":"string","description":"Notes documenting how the alert was resolved","nullable":true},{"name":"status","type":"string","description":"Current status of the alert (e.g., 'pending', 'in_progress', 'resolved', 'ignored')","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the alert was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the alert was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the alert was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["alert_type","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["severity","status"]},{"fieldNames":["source","created_at"]},{"fieldNames":["shopping_mall_administrator_id","status"]}],"ginIndexes":[{"fieldName":"description"}]},{"name":"shopping_mall_admin_reports","description":"Stores generated administrative reports that provide insights into platform performance, user behavior, and business metrics. This table manages report metadata and serves as the foundation for the reporting system.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to the administrator who generated or requested the report. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":false}],"plainFields":[{"name":"report_type","type":"string","description":"Type of report (e.g., 'sales_summary', 'user_engagement', 'fraud_analysis', 'inventory_turnover')","nullable":false},{"name":"title","type":"string","description":"Descriptive title for the report","nullable":false},{"name":"description","type":"string","description":"Summary of the report's purpose and content","nullable":true},{"name":"parameters","type":"string","description":"JSON representation of the parameters used to generate the report","nullable":false},{"name":"data_range_start","type":"datetime","description":"Start timestamp of the data range covered by the report","nullable":false},{"name":"data_range_end","type":"datetime","description":"End timestamp of the data range covered by the report","nullable":false},{"name":"generated_data","type":"string","description":"JSON representation of the actual data in the report","nullable":false},{"name":"size_mb","type":"double","description":"Size of the report data in megabytes","nullable":false},{"name":"format","type":"string","description":"Format of the generated report (e.g., 'json', 'csv', 'pdf', 'excel')","nullable":false},{"name":"status","type":"string","description":"Current status of the report (e.g., 'generating', 'completed', 'failed', 'expired')","nullable":false},{"name":"schedule_frequency","type":"string","description":"How often this report is generated (e.g., 'one_time', 'daily', 'weekly', 'monthly')","nullable":true},{"name":"next_generation","type":"datetime","description":"Timestamp for the next scheduled generation if recurring","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the report was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the report was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the report was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_administrator_id","title","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["report_type","status"]},{"fieldNames":["data_range_start","data_range_end"]},{"fieldNames":["schedule_frequency","next_generation"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"generated_data"}]},{"name":"shopping_mall_admin_dashboards","description":"Manages user-specific administrator dashboards that provide customized views of platform metrics and information. Each administrator can have a personalized dashboard configuration.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to the administrator who owns this dashboard. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":true,"nullable":false}],"plainFields":[{"name":"name","type":"string","description":"Name of the dashboard","nullable":false},{"name":"description","type":"string","description":"Description of the dashboard purpose","nullable":true},{"name":"layout_configuration","type":"string","description":"JSON representation of the dashboard layout and widget arrangement","nullable":false},{"name":"refresh_interval","type":"int","description":"Default refresh interval for dashboard widgets in seconds","nullable":false},{"name":"is_default","type":"boolean","description":"Whether this is the default dashboard for the administrator","nullable":false},{"name":"sharing_status","type":"string","description":"Indicates if and how this dashboard is shared (e.g., 'private', 'team', 'all_admins', 'public')","nullable":false},{"name":"access_level","type":"string","description":"Access level required to view this dashboard (e.g., 'basic', 'standard', 'advanced')","nullable":false},{"name":"status","type":"string","description":"Current status of the dashboard (e.g., 'active', 'archived', 'draft')","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the dashboard was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the dashboard was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the dashboard was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_administrator_id"],"unique":true},{"fieldNames":["shopping_mall_administrator_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["is_default","status"]},{"fieldNames":["sharing_status"]},{"fieldNames":["access_level"]}],"ginIndexes":[{"fieldName":"layout_configuration"}]},{"name":"shopping_mall_admin_widgets","description":"Stores configuration for dashboard widgets that display specific metrics, charts, or information blocks. Widgets are building blocks of dashboards and are managed through the dashboard relationship.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_admin_dashboard_id","type":"uuid","description":"Reference to the dashboard this widget belongs to. {@link shopping_mall_admin_dashboards.id}.","relation":{"name":"dashboard","targetModel":"shopping_mall_admin_dashboards"},"unique":false,"nullable":false}],"plainFields":[{"name":"widget_type","type":"string","description":"Type of widget (e.g., 'chart', 'metric', 'table', 'timeline', 'alert_summary')","nullable":false},{"name":"title","type":"string","description":"Title displayed on the widget","nullable":false},{"name":"data_source","type":"string","description":"Primary data source for the widget (e.g., 'sales_data', 'user_metrics', 'system_logs')","nullable":false},{"name":"configuration","type":"string","description":"JSON representation of the widget's specific configuration","nullable":false},{"name":"size","type":"string","description":"Size/position configuration (e.g., 'small', 'medium', 'large', 'full_width')","nullable":false},{"name":"refresh_interval","type":"int","description":"Refresh interval for the widget data in seconds","nullable":false},{"name":"is_interactive","type":"boolean","description":"Whether the widget supports user interaction or drill-down","nullable":false},{"name":"filters","type":"string","description":"JSON representation of any data filters applied to the widget","nullable":true},{"name":"status","type":"string","description":"Current status of the widget (e.g., 'active', 'inactive', 'debug')","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the widget was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the widget was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the widget was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_admin_dashboard_id","title"],"unique":true}],"plainIndexes":[{"fieldNames":["widget_type","status"]},{"fieldNames":["data_source","created_at"]}],"ginIndexes":[{"fieldName":"configuration"}]},{"name":"shopping_mall_admin_permissions","description":"Manages the comprehensive permission system that controls administrator access to various platform functions and data. This table defines the core permission structure for the administrative system.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","description":"Reference to parent permission for hierarchical organization. {@link shopping_mall_admin_permissions.id}.","relation":{"name":"parent","targetModel":"shopping_mall_admin_permissions","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"code","type":"string","description":"Unique code for the permission (e.g., 'user_management', 'order_approval', 'financial_overview')","nullable":false},{"name":"name","type":"string","description":"Human-readable name of the permission","nullable":false},{"name":"category","type":"string","description":"Category of the permission (e.g., 'user_management', 'order_management', 'financial', 'reporting', 'system_settings')","nullable":false},{"name":"description","type":"string","description":"Detailed description of what the permission allows","nullable":false},{"name":"level","type":"int","description":"Hierarchical level of the permission in the tree structure","nullable":false},{"name":"path","type":"string","description":"Materialized path in the permission hierarchy (e.g., '/user_management/create_user/')","nullable":false},{"name":"scope","type":"string","description":"Applicable scope of the permission (e.g., 'global', 'regional', 'store_specific')","nullable":false},{"name":"required_for_role","type":"string","description":"Administrative roles that require this permission (e.g., 'senior_admin', 'support_staff')","nullable":true},{"name":"business_impact","type":"string","description":"Business impact level (e.g., 'low', 'medium', 'high', 'critical')","nullable":false},{"name":"status","type":"string","description":"Current status of the permission (e.g., 'active', 'deprecated', 'planned')","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the permission was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the permission was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the permission was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["category","level","status"]},{"fieldNames":["parent_id"]},{"fieldNames":["path"]},{"fieldNames":["business_impact"]}],"ginIndexes":[{"fieldName":"required_for_role"}]},{"name":"shopping_mall_admin_audit_logs","description":"Immutable record of critical system changes and access events for compliance and security auditing. This table provides a tamper-resistant history of important operations.","material":false,"stance":"snapshot","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_administrator_id","type":"uuid","description":"Reference to the administrator associated with this audit event. {@link shopping_mall_administrators.id}.","relation":{"name":"administrator","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":false}],"plainFields":[{"name":"event_type","type":"string","description":"Type of audit event (e.g., 'login', 'permission_change', 'critical_data_access', 'security_configuration')","nullable":false},{"name":"severity","type":"string","description":"Security severity of the event (e.g., 'info', 'warning', 'high', 'critical')","nullable":false},{"name":"entity_affected","type":"string","description":"Entity type affected by the event","nullable":true},{"name":"entity_id","type":"uuid","description":"ID of the specific entity affected by the event","nullable":true},{"name":"action_details","type":"string","description":"Detailed description of the action taken","nullable":false},{"name":"ip_address","type":"string","description":"IP address from which the action was performed","nullable":false},{"name":"user_agent","type":"string","description":"User agent string of the client used","nullable":false},{"name":"session_id","type":"string","description":"Session identifier associated with the action","nullable":false},{"name":"success","type":"boolean","description":"Whether the action was successful","nullable":false},{"name":"data_before","type":"string","description":"JSON representation of data state before the change","nullable":true},{"name":"data_after","type":"string","description":"JSON representation of data state after the change","nullable":true},{"name":"duration_ms","type":"int","description":"Duration of the operation in milliseconds","nullable":true},{"name":"notes","type":"string","description":"Additional notes about the audit event","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the audit event occurred","nullable":false}],"uniqueIndexes":[{"fieldNames":["created_at","shopping_mall_administrator_id","event_type"],"unique":true}],"plainIndexes":[{"fieldNames":["event_type","severity"]},{"fieldNames":["entity_affected","entity_id"]},{"fieldNames":["shopping_mall_administrator_id","created_at"]},{"fieldNames":["success","created_at"]}],"ginIndexes":[{"fieldName":"action_details"}]},{"name":"shopping_mall_admin_system_metrics","description":"Stores time-series data for key system performance indicators and business metrics that administrators monitor to ensure platform health and performance.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"metric_source_id","type":"uuid","description":"Reference to the source of the metric data. (e.g., service, server, process). This ID points to a generic source entity.","relation":{"name":"metricSource","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"metric_name","type":"string","description":"Name of the metric being tracked (e.g., 'orders_per_minute', 'api_response_time', 'memory_usage')","nullable":false},{"name":"metric_category","type":"string","description":"Category of the metric (e.g., 'performance', 'business', 'security', 'engagement')","nullable":false},{"name":"unit","type":"string","description":"Unit of measurement for the metric (e.g., 'ms', '%', 'count', 'MB', 'USD')","nullable":false},{"name":"value","type":"double","description":"Numerical value of the metric","nullable":false},{"name":"threshold_warning","type":"double","description":"Warning threshold value for this metric","nullable":true},{"name":"threshold_critical","type":"double","description":"Critical threshold value for this metric","nullable":true},{"name":"collection_interval","type":"int","description":"Interval at which this metric is collected in seconds","nullable":false},{"name":"data_retention_days","type":"int","description":"Number of days to retain this metric data","nullable":false},{"name":"is_aggregated","type":"boolean","description":"Whether this is raw data or an aggregated view","nullable":false},{"name":"aggregation_method","type":"string","description":"Method used for aggregation if is_aggregated is true (e.g., 'average', 'sum', 'max', 'min')","nullable":true},{"name":"tags","type":"string","description":"Comma-separated tags for categorizing and searching metrics","nullable":true},{"name":"status","type":"string","description":"Current status of the metric tracking (e.g., 'active', 'paused', 'debug')","nullable":false},{"name":"recorded_at","type":"datetime","description":"Timestamp when this metric value was recorded","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the metric record was created","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the metric record was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the metric record was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["metric_name","recorded_at"],"unique":true}],"plainIndexes":[{"fieldNames":["metric_category","status"]},{"fieldNames":["recorded_at","is_aggregated"]},{"fieldNames":["status","created_at"]},{"fieldNames":["metric_source_id"]}],"ginIndexes":[{"fieldName":"tags"}]},{"name":"shopping_mall_admin_health_checks","description":"Records results of automated system health checks that verify the integrity and availability of platform components. This table helps administrators monitor and troubleshoot system issues.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"checked_by_id","type":"uuid","description":"Reference to the administrator who initiated or received this health check. {@link shopping_mall_administrators.id}.","relation":{"name":"checkedBy","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"check_type","type":"string","description":"Type of health check performed (e.g., 'database_connection', 'api_latency', 'storage_space', 'security_scan')","nullable":false},{"name":"target_component","type":"string","description":"System component that was checked (e.g., 'order_service', 'payment_gateway', 'inventory_db')","nullable":false},{"name":"status","type":"string","description":"Result of the health check (e.g., 'healthy', 'warning', 'unhealthy', 'critical')","nullable":false},{"name":"score","type":"double","description":"Numeric health score (0-100) representing component health","nullable":false},{"name":"details","type":"string","description":"Detailed breakdown of the health check results","nullable":false},{"name":"response_time_ms","type":"int","description":"Response time of the checked component in milliseconds","nullable":true},{"name":"error_count","type":"int","description":"Number of errors detected during the check","nullable":false},{"name":"degraded_functions","type":"string","description":"JSON array of functions that are degraded or impaired","nullable":true},{"name":"recommendations","type":"string","description":"Recommended actions to address any issues","nullable":true},{"name":"next_check_scheduled","type":"datetime","description":"Timestamp for the next scheduled health check","nullable":false},{"name":"is_automated","type":"boolean","description":"Whether this check was performed automatically or manually initiated","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the health check was performed","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the health check record was last updated","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the health check record was soft deleted (null if active)","nullable":true}],"uniqueIndexes":[{"fieldNames":["target_component","created_at"],"unique":true}],"plainIndexes":[{"fieldNames":["check_type","status"]},{"fieldNames":["status","score"]},{"fieldNames":["is_automated","created_at"]},{"fieldNames":["next_check_scheduled"]},{"fieldNames":["checked_by_id"]}],"ginIndexes":[{"fieldName":"details"}]}]}]}
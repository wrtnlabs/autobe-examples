import { tags } from "typia";

/**
 * Detailed information about a post on the communityPlatform system.
 *
 * This schema represents the full post entity as stored in the database and
 * returned in API responses for individual post displays. It combines fields
 * directly from community_platform_posts with data derived from related tables
 * to provide a comprehensive view.
 *
 * Core fields are stored in the community_platform_posts table:
 *
 * - Id (PK)
 * - Community_platform_community_id (FK)
 * - Author_id (FK)
 * - Title
 * - Content
 * - Post_type
 * - Vote_count
 * - Comment_count
 * - Status
 * - Created_at
 * - Updated_at
 * - Deleted_at
 *
 * The following fields are derived from relationships:
 *
 * - Image_url: from community_platform_post_images.table
 * - Link_url: from community_platform_post_links.table
 *
 * The schema maps exactly to the Prisma schema definition for
 * community_platform_posts, with relations handled in the response
 * composition.
 *
 * The response always includes all fields for completeness and consistency with
 * the platform's public-facing data model. System-generated fields like id,
 * created_at are immutable and read-only.
 *
 * This entity represents a Post as defined in the business requirements section
 * 3.3 for post creation, and 10.1 for post ranking algorithms, and stylesheet
 * display standards.
 *
 * @autobe Generated by AutoBE - https://github.com/wrtnlabs/autobe
 */
export type ICommunityPlatformPost = {
  /**
   * Primary Key.
   *
   * The UUID identifier assigned by the system to the post upon creation.
   * This immutable identifier allows precise referencing of the post in all
   * API interactions.
   *
   * Business context: This UUID is the definitive identifier for the post
   * throughout its lifecycle in the system. It is used in all URLs, database
   * joins, audit logs, and notifications. Users never see this value unless
   * they are developers or administrators - it is a system-level identifier.
   *
   * This field is generated by the server upon successful creation and is
   * never provided by users. It must always be returned by the server in
   * response to creation or retrieval operations.
   *
   * Format: Must be a valid UUID version 4 (randomly generated) according to
   * RFC 4122 specification.
   *
   * This field exists in the community_platform_posts table as the primary
   * key and is referenced by all related tables (comments, votes, reports,
   * audit_logs, etc.) via foreign keys. No other field can uniquely identify
   * a post.
   *
   * Required in response for all post representations including summaries and
   * detailed views. Never accept or process this field from client requests
   * as it's system-generated.
   */
  id: string & tags.Format<"uuid">;

  /**
   * The community this post belongs to.
   * {@link community_platform_communities.id}.
   *
   * This is the foreign key linking the post to its parent community entity.
   * This ID ensures proper content organization and enables aggregation of
   * content by community.
   *
   * Business context: Each post belongs to exactly one community, which
   * defines its context, audience, and moderation policies. This relationship
   * is fundamental to the platform's structure.
   *
   * This field must be a valid UUID that corresponds to an existing
   * community_platform_communities.id. The system enforces referential
   * integrity through database foreign key constraints.
   *
   * The post's community determines:
   *
   * - Which moderation rules apply (post_review_mode)
   * - Which users see it in their feeds
   * - Which moderators can edit or delete it
   *
   * This field is assigned automatically by the server based on the endpoint
   * path during creation and is never provided by the client in POST
   * requests. It must be returned in responses to help clients know which
   * community the post belongs to.
   *
   * Always returned in detailed post responses. Must be included in API
   * responses to support client-side community context and "back to
   * community" navigation.
   */
  community_platform_community_id: string & tags.Format<"uuid">;

  /**
   * The user who created this post. {@link community_platform_member.id}.
   *
   * This foreign key links the post to its creating user, establishing
   * ownership and accountability.
   *
   * Business context: Posting rights and authorship tracking are core to
   * community trust and reputation systems. This field enables user profile
   * pages to display their posted content and enables karma calculations
   * based on upvotes received.
   *
   * This field must be a valid UUID that corresponds to an existing
   * community_platform_member.id. The system enforces referential integrity
   * through database foreign key constraints.
   *
   * The author_id is automatically set by the server based on the
   * authenticated user's identity in the JWT token during POST requests. It
   * cannot be manipulated by clients.
   *
   * This field is returned in all post responses to display the author's
   * username and profile in UI components. It is necessary for displaying
   * authorship context and determining if the current user is the post's
   * owner (for edit/delete permissions).
   */
  author_id: string & tags.Format<"uuid">;

  /**
   * The title of the post, limited to 300 characters. Must be present for all
   * post types.
   *
   * This field represents the main headline or subject of the user's post,
   * serving as the primary content indicator in community feeds and search
   * results.
   *
   * Business context: This title is the first thing users see when browsing
   * communities, making it critical for engagement and discoverability. The
   * 300-character limit prevents overly verbose titles while still allowing
   * sufficient context.
   *
   * Must be non-empty and non-whitespace only. Trimmed before storage.
   * Language should be clear and representative of the post's content.
   *
   * Safety consideration: Server-side checks prevent dangerous characters and
   * injection attacks. Title may not contain markdown or HTML formatting as
   * specified in business rules.
   */
  title: string & tags.MinLength<1> & tags.MaxLength<300>;

  /**
   * The main body text of the post, limited to 10,000 characters. Used for
   * text posts.
   *
   * This field contains the textual content of a post when post_type is
   * 'text'. For other post types ('link' or 'image'), this field may be null
   * or omitted.
   *
   * Business context: This represents the user's narrative, explanation, or
   * thoughts that provide context for their post. With a 10,000-character
   * limit, users can provide detailed commentary while preventing abuse or
   * performance issues.
   *
   * The content is rendered as plain text without Markdown or HTML formatting
   * per business rules. Server-side validation ensures the length constraint
   * is strictly enforced.
   *
   * For text posts, this field is required. For link and image posts, this
   * field is optional and can be null, but should be omitted in the request
   * when not provided.
   *
   * When provided, it should be trimmed of leading/trailing whitespace. No
   * special characters are blocked (beyond basic injection prevention), but
   * the content may be processed by automated moderation systems.
   */
  content?: (string & tags.MinLength<0> & tags.MaxLength<10000>) | undefined;

  /**
   * The type of post: 'text', 'link', or 'image'. Determines which additional
   * fields are relevant.
   *
   * This discriminator field determines the nature of the post content and
   * which associated data properties will be populated in the database.
   *
   * Business context: Different content types serve distinct user needs.
   *
   * - 'text': Contains written narrative or opinion
   * - 'link': Shares external resources with context
   * - 'image': Visual content for expression and engagement
   *
   * This field must be exactly one of the three allowed values as strictly
   * defined in the community_platform_posts.post_type schema field, and its
   * value determines the required fields in the request:
   *
   * - For 'text': content field is required
   * - For 'link': url field is required
   * - For 'image': image file upload is required
   *
   * Only these three values are permitted. No alternatives or variations are
   * acceptable.
   */
  post_type: "text" | "link" | "image";

  /**
   * The total vote score calculated as upvotes minus downvotes for ranking
   * purposes.
   *
   * This field represents the net engagement score of the post, calculated as
   * the sum of all upvotes minus the sum of all downvotes. This score drives
   * sorting algorithms like 'hot' and 'top'.
   *
   * Business context: This score directly influences a post's visibility in
   * community feeds and search results, creating a feedback loop where
   * high-quality content receives increased exposure.
   *
   * This value is calculated from the community_platform_post_votes table by
   * server-side background jobs or database triggers that sum up votes and
   * subtract downvotes. It should never be modified directly by client
   * requests.
   *
   * The value can range from negative infinity to positive infinity, but
   * business rules impose a limit on the maximum number of votes counted per
   * post (max_post_votes in community_platform_platform_settings) to prevent
   * karma inflation.
   *
   * Must be returned in all post responses and update dynamically as votes
   * are cast.
   *
   * Important note: Unlike karma scores, vote_count can be negative. This
   * reflects genuine community disapproval and is part of the platform's
   * democratic content moderation system.
   */
  vote_count: number &
    tags.Type<"int32"> &
    tags.Minimum<-2147483648> &
    tags.Maximum<2147483647>;

  /**
   * The total number of direct comments on this post.
   *
   * This field tracks the number of top-level comments on the post, providing
   * a measure of community engagement and discussion depth.
   *
   * Business context: High comment counts indicate active discussion and
   * community interest, making this a key metric for both users and
   * administrators.
   *
   * This count is updated by server-side database triggers or background jobs
   * whenever a new top-level comment is created in the
   * community_platform_comments table or when a comment is deleted (in which
   * case it decrements).
   *
   * This field strictly counts direct comments attached directly to the post
   * (with parent_comment_id = null). Replies to comments (with
   * parent_comment_id set) are not counted in this total but are counted in
   * their parent comment's reply count.
   *
   * Must be returned in all post responses to show users the level of
   * discussion surrounding the post.
   *
   * Maintained by the system; client requests should never provide or modify
   * this value. Values can range from 0 to 2147483647, but practical limits
   * are determined by system performance, not schema.
   */
  comment_count: number &
    tags.Type<"int32"> &
    tags.Minimum<0> &
    tags.Maximum<2147483647>;

  /**
   * The moderation status: 'published', 'unreviewed', 'removed', or
   * 'archived'. Determines visibility.
   *
   * This field controls whether and how the post is displayed to users,
   * forming the basis of content moderation on the platform.
   *
   * Business context: This status field ensures community guidelines are
   * maintained while preserving user-generated content history for audit
   * purposes.
   *
   * Permitted values:
   *
   * - 'published': Visible to all users (default for posts in communities
   *   without review mode)
   * - 'unreviewed': Not visible to non-moderators until approved by a moderator
   *   (used in post_review_mode communities)
   * - 'removed': Deleted by moderator due to violation of guidelines; visible
   *   only to moderators and administrators
   * - 'archived': Content is intentionally archived by the user or system and
   *   not visible to the public
   *
   * This status reflects the moderation decision and determines whether the
   * post appears in feeds, search results, or user timelines.
   *
   * This field is updated automatically by the system based on community
   * settings (when posting) or manually by moderators and admins. Never
   * accept this field from client requests as it's managed by the platform's
   * moderation system.
   *
   * This field is referenced in all content rendering and API response
   * filtering logic, including page feeds and user timeline rendering.
   */
  status: "published" | "unreviewed" | "removed" | "archived";

  /**
   * The timestamp when the post was submitted.
   *
   * This field records the exact date and time when the post was created and
   * saved to the database. It is the primary basis for sorting posts in 'new'
   * order.
   *
   * Business context: Timeliness is critical for community engagement. This
   * timestamp allows users to understand context through chronological
   * ordering, especially in trending topics.
   *
   * Must be in ISO 8601 format with timezone information, as specified by the
   * database schema parameter @db.Timestamptz.
   *
   * This field is auto-generated by the server when the post is created and
   * never modified throughout the post's lifetime.
   *
   * It's used for:
   *
   * - 'New' sort algorithm in post rankings
   * - Calculating 'Hot' score with time decay formula
   * - Determining edit window eligibility
   * - Creating audit trail records
   * - Calculating the lifespan of a post for various analytical purposes
   *
   * All operations and interfaces must respect read-only nature of this
   * field. Never set or modify this field through API requests.
   */
  created_at: string & tags.Format<"date-time">;

  /**
   * The timestamp when the post was last modified (e.g., edit, promotion).
   *
   * This field tracks the most recent change to the post's content or state,
   * enabling display of "last updated" information to users.
   *
   * Business context: When a post is edited, the updated_at timestamp changes
   * to reflect the modification, signaling to users that the content has been
   * revised since the original posting.
   *
   * Modified when:
   *
   * - The title or content fields are updated
   * - A moderator changes the post's status
   * - The post is promoted to front-page status
   *
   * This field remains unchanged if only votes or comments are added, as
   * those are separate entities. The field represents changes to the post
   * itself, not its interactions.
   *
   * Must be in ISO 8601 format with timezone information, as specified by the
   * database schema.
   *
   * It is auto-generated and maintained by the server. Never provide this
   * field in client requests. This field is critical for frontend display of
   * edits and for administrative audit trails.
   */
  updated_at?: (string & tags.Format<"date-time">) | undefined;

  /**
   * The timestamp when the post was soft-deleted. Null if still active.
   *
   * This field implements soft deletion to preserve content history while
   * removing posts from public view.
   *
   * Business context: Soft deletion supports platform compliance, moderation
   * audit trails, and forensic analysis while giving users a sense of
   * permanence in their contributions. It prevents complete data loss while
   * enforcing content governance.
   *
   * When a post is "deleted" by the user or moderator:
   *
   * - The deleted_at field is set to the current timestamp
   * - The status field is set to 'removed'
   * - The post becomes invisible to regular users
   * - The post remains in the database for audit and analytics
   * - The post can be restored using admin operations if needed
   *
   * Concurrency consideration: This field can only be set once (immutable
   * after setting). Reverting deleted_at to null restores the post.
   *
   * This field exists as part of the platform's data integrity and compliance
   * practices. By keeping the record, we maintain the audit trail and prevent
   * data tampering.
   *
   * In most responses where the post is visible, this field will be null.
   * Only when the post has been removed and requires audit visibility will
   * this field have a value.
   *
   * Care must be taken in API responses: When deleted_at is not null and the
   * requester is not an admin or moderator, the post should not be returned
   * at all (404 Not Found). This field must never be set through client-side
   * requests.
   */
  deleted_at?: (string & tags.Format<"date-time">) | undefined;

  /**
   * The CDN URL where the image is hosted. Generated by external service
   * (e.g., Cloudinary).
   *
   * This field is not part of the post table but is derived from the
   * relationship with community_platform_post_images.
   *
   * Business context: This field provides the direct rendering URL for image
   * posts, enabling immediate display in web and mobile browsers.
   *
   * This field is not stored in the community_platform_posts table. When
   * creating a response, this value must be derived from joining with the
   * community_platform_post_images table and selecting the image_url field.
   *
   * It must be null if the post is not an image type or if the image upload
   * failed or was deleted.
   *
   * This URL must be publicly accessible and is served through a CDN for
   * performance. It follows the structure defined in the third-party image
   * hosting service integrated with the platform (as specified in
   * 08-external-integrations.md).
   *
   * The URL path may include versioning or transformations (e.g., resize,
   * quality compression) as generated by the image hosting service.
   *
   * NOTE: This field exists as an extension to the base
   * community_platform_posts schema due to the one-to-one relationship with
   * community_platform_post_images. It's derived from a related table and
   * included in the ICommunityPlatformPost schema as a computed field for
   * convenience.
   */
  image_url?: (string & tags.MaxLength<80000> & tags.Format<"uri">) | undefined;

  /**
   * The full URL of the linked resource. Must be a valid HTTP/HTTPS URL.
   *
   * This field is not part of the post table but is derived from the
   * relationship with community_platform_post_links.
   *
   * Business context: This field provides the destination URL for link-type
   * posts, allowing users to navigate to external content with one click.
   *
   * This field is not stored in the community_platform_posts table. When
   * creating a response, this value must be derived from joining with the
   * community_platform_post_links table and selecting the url field.
   *
   * It must be null if the post is not a link type or if no link was
   * provided.
   *
   * This field is saved as provided by the user during creation and validated
   * for proper URI format. It is intended for direct user navigation and must
   * be preserved exactly as submitted (subject to any security
   * sanitization).
   *
   * NOTE: This field exists as an extension to the base
   * community_platform_posts schema due to the one-to-one relationship with
   * community_platform_post_links. It's derived from a related table and
   * included in the ICommunityPlatformPost schema as a computed field for
   * convenience.
   */
  link_url?: (string & tags.MaxLength<80000> & tags.Format<"uri">) | undefined;
};
export namespace ICommunityPlatformPost {
  /**
   * Request parameters for searching and filtering posts across the platform.
   * This structured request object enables comprehensive query capabilities
   * for post discovery, content moderation, analytics, and personalized feed
   * generation.
   *
   * The ICommunityPlatformPost.IRequest schema defines a flexible query
   * interface for searching community_platform_posts collection with support
   * for pagination, filtering, and multiple sorting algorithms. It provides
   * the complete set of parameters needed to implement the four core sorting
   * algorithms ('new', 'hot', 'top', 'controversial') as specified in the
   * business requirements, along with additional contextual filters for
   * targeted content retrieval.
   *
   * The pagination parameters (page, limit) are critical for performance
   * optimization, ensuring response sizes remain manageable during
   * high-traffic periods and mobile network conditions. The 50-item limit
   * maximum prevents resource exhaustion and aligns with platform performance
   * requirements of under 2 seconds for 50 posts.
   *
   * The search parameter (q) leverages full-text search, enabling users to
   * discover content based on keywords that appear anywhere in post titles or
   * content bodies, with trigram indexing on these fields optimized for
   * performance.
   *
   * The filter parameters (community_id, author_id, min/max_created_at,
   * min/max_vote_count, status, nsfw) allow for granular content filtering
   * essential for moderating the platform, conducting analytics, and
   * delivering personalized user experiences. The status filter enforces the
   * business rule that unauthenticated users only see 'published' content
   * while acknowledging the underlying moderation workflow.
   *
   * The nsfw parameter integrates with community visibility rules, respecting
   * user preferences for adult content while maintaining compliance with
   * regulatory requirements. When this parameter is undefined, the system
   * defaults to its security policy of mixing available content based on user
   * subscription status.
   *
   * This request object is designed to be stable and future-proof, allowing
   * additional query parameters to be added without breaking existing
   * clients, and all parameters are optional with sensible default behaviors
   * for maximum usability in various client contexts.
   */
  export type IRequest = {
    /**
     * Page number for pagination.
     *
     * Specifies which page of results to return. Must be at least 1.
     * Default value is 1 if not provided.
     *
     * This parameter enables clients to request results in manageable
     * chunks (pagination), reducing payload size and improving performance
     * on slow networks.
     */
    page?: (number & tags.Type<"int32"> & tags.Minimum<1>) | undefined;

    /**
     * Number of records to return per page.
     *
     * Limits the number of posts returned in the response. Must be between
     * 1 and 50. Default value is 10 if not provided.
     *
     * This parameter helps optimize network usage and frontend rendering by
     * limiting the result set size.
     */
    limit?:
      | (number & tags.Type<"int32"> & tags.Minimum<1> & tags.Maximum<50>)
      | undefined;

    /**
     * Sorting algorithm to apply to the results.
     *
     * Determines the order of returned posts. Possible values:
     *
     * - 'new': sorts by creation timestamp, newest first
     * - 'hot': sorts by multi-factor algorithm combining recency and
     *   popularity
     * - 'top': sorts by total vote count (upvotes minus downvotes)
     * - 'controversial': sorts by ratio of upvotes to downvotes
     *
     * If not specified, defaults to the platform's default algorithm
     * configured in community_platform_platform_settings.
     */
    sort?: "new" | "hot" | "top" | "controversial" | undefined;

    /**
     * Full-text search query term to filter posts by title or content.
     *
     * Performs a full-text search across the title and content fields of
     * posts using trigram indexes for matching keywords. Matches are
     * case-insensitive and support partial word matches.
     *
     * This allows users to discover posts by keyword, such as 'electron',
     * 'python', or 'recursive'. This parameter should be URL-encoded when
     * used in requests.
     */
    q?: string | undefined;

    /**
     * Filter posts by specific community identifier.
     *
     * If provided, only posts belonging to the specified community will be
     * returned. This enables targeted queries of posts within a single
     * community rather than across the entire platform.
     */
    community_id?: (string & tags.Format<"uuid">) | undefined;

    /**
     * Filter posts by specific author identifier.
     *
     * If provided, only posts created by the specified user will be
     * returned. This allows retrieval of a user's own posts without
     * requiring a profile view.
     */
    author_id?: (string & tags.Format<"uuid">) | undefined;

    /**
     * Filter posts created on or after this timestamp.
     *
     * All posts with created_at greater than or equal to this value are
     * included in results. Useful for retrieving posts within a specific
     * time range (e.g., 'last 24 hours').
     */
    min_created_at?: (string & tags.Format<"date-time">) | undefined;

    /**
     * Filter posts created before this timestamp.
     *
     * All posts with created_at less than this value are included in
     * results. Used in conjunction with min_created_at to define a date
     * range.
     */
    max_created_at?: (string & tags.Format<"date-time">) | undefined;

    /**
     * Filter posts with at least this many total votes.
     *
     * Only posts with vote_count greater than or equal to this value are
     * included. Useful for filtering out low-engagement content.
     */
    min_vote_count?:
      | (number & tags.Type<"int32"> & tags.Minimum<0>)
      | undefined;

    /**
     * Filter posts with at most this many total votes.
     *
     * Only posts with vote_count less than or equal to this value are
     * included. Useful for finding niche or less-popular content.
     */
    max_vote_count?:
      | (number & tags.Type<"int32"> & tags.Minimum<0>)
      | undefined;

    /**
     * Filter posts by moderation status.
     *
     * Limits the results to posts with the specified status:
     *
     * - 'published': visible to public users
     * - 'unreviewed': awaiting moderator approval
     * - 'removed': taken down by moderator
     * - 'archived': removed from feed but possibly preserved
     *
     * For unauthenticated users, only 'published' posts are ever returned,
     * regardless of this filter.
     */
    status?: "published" | "unreviewed" | "removed" | "archived" | undefined;

    /**
     * Filter posts by NSFW attribute.
     *
     * When true, includes only posts from communities marked as NSFW. When
     * false, includes only posts from safe communities. When undefined,
     * includes all posts regardless of NSFW status.
     *
     * This filter respects user settings: users who have not explicitly
     * enabled NSFW content still won't see NSFW posts, even if this filter
     * is set to true.
     */
    nsfw?: boolean | undefined;
  };

  /**
   * Request payload for creating a new post in a community.
   *
   * This schema defines the fields required to submit a new post on the
   * communityPlatform. Every post must have a title and a type. The type
   * determines which additional fields (content, url, or image_file) must be
   * included.
   *
   * Required fields: title and post_type. Post type must be one of: 'text',
   * 'link', or 'image'.
   *
   * Conditional fields:
   *
   * - If post_type is 'text': content field is required
   * - If post_type is 'link': url field is required
   * - If post_type is 'image': image_file field is required
   *
   * All fields must be handled according to their validation rules as defined
   * in the Prisma schema. No other fields are permitted in the request body.
   *
   * The encoding of image_file must follow Base64 standards compatible with
   * server expectations. url field must be a valid URI. content field must be
   * trimmed and not exceed character limits.
   *
   * Never include a community_id field in this request. The community
   * association is determined by the API endpoint path, not by this request
   * body. This ensures security and prevents unauthorized posting to
   * incorrect communities.
   *
   * This schema mirrors exactly the fields present in the
   * community_platform_posts table in the Prisma schema. Do not add fields
   * that don't exist in the database schema, such as author_id or
   * community_id, as these are assigned by the system based on authentication
   * context and endpoint routing.
   */
  export type ICreate = {
    /**
     * The title of the post, limited to 300 characters. Must be present for
     * all post types.
     *
     * This field represents the main headline or subject of the user's
     * post, serving as the primary content indicator in community feeds and
     * search results.
     *
     * Business context: This title is the first thing users see when
     * browsing communities, making it critical for engagement and
     * discoverability. The 300-character limit prevents overly verbose
     * titles while still allowing sufficient context.
     *
     * Must be non-empty and non-whitespace only. Trimmed before storage.
     * Language should be clear and representative of the post's content.
     *
     * Safety consideration: Server-side checks prevent dangerous characters
     * and injection attacks. Title may not contain markdown or HTML
     * formatting as specified in business rules.
     */
    title: string & tags.MinLength<1> & tags.MaxLength<300>;

    /**
     * The type of post: 'text', 'link', or 'image'. Determines which
     * additional fields are relevant.
     *
     * This discriminator field determines the nature of the post content
     * and which associated data properties will be populated in the
     * database.
     *
     * Business context: Different content types serve distinct user needs.
     *
     * - 'text': Contains written narrative or opinion
     * - 'link': Shares external resources with context
     * - 'image': Visual content for expression and engagement
     *
     * This field must be exactly one of the three allowed values as
     * strictly defined in the community_platform_posts.post_type schema
     * field, and its value determines the required fields in the request:
     *
     * - For 'text': content field is required
     * - For 'link': url field is required
     * - For 'image': image file upload is required
     *
     * Only these three values are permitted. No alternatives or variations
     * are acceptable.
     */
    post_type: "text" | "link" | "image";

    /**
     * The main body text of the post, limited to 10,000 characters. Used
     * for text posts.
     *
     * This field contains the textual content of a post when post_type is
     * 'text'. For other post types ('link' or 'image'), this field may be
     * null or omitted.
     *
     * Business context: This represents the user's narrative, explanation,
     * or thoughts that provide context for their post. With a
     * 10,000-character limit, users can provide detailed commentary while
     * preventing abuse or performance issues.
     *
     * The content is rendered as plain text without Markdown or HTML
     * formatting per business rules. Server-side validation ensures the
     * length constraint is strictly enforced.
     *
     * For text posts, this field is required. For link and image posts,
     * this field is optional and can be null, but should be omitted in the
     * request when not provided.
     *
     * When provided, it should be trimmed of leading/trailing whitespace.
     * No special characters are blocked (beyond basic injection
     * prevention), but the content may be processed by automated moderation
     * systems.
     */
    content?: (string & tags.MinLength<0> & tags.MaxLength<10000>) | undefined;

    /**
     * The full URL of the linked resource. Must be a valid HTTP/HTTPS URL.
     *
     * This field contains the web address for link-type posts, preserving
     * the original citation source.
     *
     * Business context: This allows users to share valuable external
     * content with the community, facilitating knowledge spread and
     * resource discovery.
     *
     * The URL must:
     *
     * - Start with 'http://' or 'https://'
     * - Be syntactically valid according to RFC 3986
     * - Not contain encoded spaces or invalid characters
     * - Not be a URI scheme other than HTTP/HTTPS
     *
     * Server-side validation checks URL format comprehensively. Domain
     * blacklisting may be applied for known malicious domains. The system
     * will not validate if the URL endpoint is accessible or returns a
     * valid response.
     *
     * This field is required when post_type is 'link'. It must be omitted
     * when post_type is 'text' or 'image'.
     *
     * For security, URL-based payloads are sanitized to prevent XSS attacks
     * on external sites. The full text of the URL must be stored as
     * provided without modification or encoding.
     */
    url?:
      | (string &
          tags.MinLength<1> &
          tags.MaxLength<80000> &
          tags.Format<"uri">)
      | undefined;

    /**
     * Base64 encoded string representation of the uploaded image file, or
     * reference to uploaded image.
     *
     * This field is used for image-type posts to transfer the binary image
     * data to the server. It should contain the Base64-encoded
     * representation of the image file. The implementation may handle file
     * uploads differently, but the schema must include this field for image
     * type posts.
     *
     * Business context: Image posts enable visual expression, memes,
     * diagrams, screenshots, and other graphical content critical to
     * community engagement.
     *
     * This field should contain the base64-encoded string representation of
     * the image, including data URI prefix as needed (e.g.,
     * "data:image/jpeg;base64,base64encodedstring").
     *
     * Required when post_type is 'image'. Must be omitted when post_type is
     * 'text' or 'link'.
     *
     * Client-side: Image file must be ≤ 10MB before encoding or upload.
     * Server-side: The system will verify the format (JPG, PNG, GIF, WebP
     * only) and perform content moderation checks, as defined in the
     * community_platform_platform_settings.image_upload_max_size_mb
     * property. The image size will be compared against the 10MB limit
     * defined in the platform settings.
     *
     * The system transforms the base64 string into binary and validates the
     * image metadata using external image hosting integration services as
     * documented in 08-external-integrations.md.
     */
    image_file?:
      | (string & tags.MinLength<1> & tags.MaxLength<134217728>)
      | undefined;
  };

  /**
   * Update request body for a post.
   *
   * This schema defines the allowable fields that can be updated for an
   * existing post. Only the title and content can be modified; the post_type
   * cannot be changed after creation. The operation is restricted to the
   * original author and must occur within the 15-minute edit window defined
   * by community_platform_platform_settings.post_edit_window_minutes.
   *
   * This type is used exclusively in the PUT
   * /communityPlatform/member/posts/{postId} endpoint.
   *
   * All validation rules are enforced server-side based on the business
   * requirements. The response will include the full updated post object.
   * This object must be used ONLY for update operations, not for creation or
   * retrieval.
   *
   * This schema directly corresponds to the community_platform_posts table in
   * the Prisma schema, specifically permitting updates to the title and
   * content columns while preventing modification of other fields like
   * author_id, community_platform_community_id, created_at, etc.
   */
  export type IUpdate = {
    /**
     * The title of the post, limited to 300 characters. Must be present for
     * all post types.
     *
     * This field is required and must contain at least one non-whitespace
     * character. It serves as the primary identifier for the post in feeds
     * and search results. The title must not contain markdown or HTML
     * formatting.
     *
     * Business rule: The title is immutable after 15 minutes of posting.
     * This field must contain only plain text with no special characters
     * beyond standard punctuation.
     *
     * This property directly maps to the 'title' column in the
     * community_platform_posts table in the Prisma schema.
     */
    title: string & tags.MinLength<1> & tags.MaxLength<300>;

    /**
     * The main body text of the post, limited to 10,000 characters. Used
     * for text posts.
     *
     * This field contains the textual content of the post when post_type is
     * 'text'. It supports plain text only - no markdown, HTML, or
     * formatting is allowed.
     *
     * The maximum length of 10,000 characters ensures performance and
     * usability. Posts exceeding this limit will be truncated on the server
     * side before persistence.
     *
     * If the post_type is 'link' or 'image', this field should be null or
     * omitted as it is not applicable.
     *
     * This property directly maps to the 'content' column in the
     * community_platform_posts table in the Prisma schema.
     */
    content?: (string & tags.MinLength<1> & tags.MaxLength<10000>) | undefined;
  };

  /**
   * A summary representation of a post for display in feeds and lists.
   *
   * This schema is designed to optimize performance and data transfer for
   * showing posts in community feeds, search results, and home pages. It only
   * includes the fields necessary for rendering a post item in a
   * list—excluding full text, images, links, author details, or comment
   * threads.
   *
   * Every property in this schema directly maps to a field in the
   * community_platform_posts table from the Prisma schema. No additional
   * properties or inferred fields are included that would require new
   * database columns.
   *
   * For example, the content field is included but is nullable because it
   * only applies to text posts. The image or link details are not included
   * here—they are accessed through separate endpoints.
   *
   * The output of this type is paged using
   * IPageICommunityPlatformPost.ISummary, which allows clients to efficiently
   * render hundreds of post summaries without latency or bandwidth issues.
   *
   * This type supports the performance requirement of loading a feed of 50
   * posts in under 2 seconds by minimizing payload size and leveraging
   * indexed database fields.
   *
   * For detailed view of a single post, use the ICommunityPlatformPost type.
   */
  export type ISummary = {
    /**
     * Unique identifier of the post.
     *
     * This UUID is the primary key and uniquely identifies each post on the
     * platform. It is generated by the system upon creation and remains
     * immutable throughout the post's lifecycle.
     *
     * The id is used in all API endpoints to reference the specific post
     * for operations such as retrieval, updates, voting, and commenting.
     *
     * Strictly follows the Prisma schema definition where the id field is a
     * String with @id and @db.Uuid annotations.
     *
     * No additional fields can be inferred or added as they would require
     * database schema changes.
     */
    id: string & tags.Format<"uuid">;

    /**
     * The title of the post, limited to 300 characters.
     *
     * This is the primary headline of the post, visible to all users in
     * listings and feeds. It must be between 1 and 300 characters and
     * serves as the first point of engagement for readers.
     *
     * This field corresponds to the 'title' column in the
     * community_platform_posts table and is mandatory for all post types.
     *
     * The title should be clear, descriptive, and click-worthy while
     * avoiding spammy or misleading language. It is indexed for full-text
     * search to enable users to discover posts by keyword.
     *
     * Changes to the title are restricted to 15 minutes after posting, as
     * defined in the platform settings, to prevent manipulative edit
     * behavior.
     */
    title: string;

    /**
     * The main body text of the post, if the post type is 'text'.
     *
     * This field contains the primary written content of a text post. It is
     * optional for link or image posts and is null for those post types.
     *
     * When present, content is limited to 10,000 characters. It is intended
     * for longer-form engagement beyond the title and is formatted as plain
     * text (no HTML).
     *
     * This field maps directly to the 'content' column in the
     * community_platform_posts table.
     *
     * For performance reasons, only the first 800 characters are shown in
     * feed summaries, with a 'Read more' toggle to expand the full content
     * on demand.
     *
     * In community_platform_posts, this field is nullable and may be null
     * when the post type is 'link' or 'image'.
     *
     * No rich text or formatting is supported; this is strictly a plaintext
     * field.
     */
    content?: string | null | undefined;

    /**
     * The type of post: 'text', 'link', or 'image'.
     *
     * This field determines how the post is displayed and what additional
     * content fields are relevant. It must be one of the three static
     * values defined in the schema.
     *
     * This field corresponds to the 'post_type' column in the
     * community_platform_posts table.
     *
     * - 'text': Post contains body text in the content field
     * - 'link': Post contains a URL in the community_platform_post_links
     *   table
     * - 'image': Post contains an image in the community_platform_post_images
     *   table
     *
     * The post type is immutable after creation and determines the
     * rendering behavior on the client side. It is a discriminator for the
     * unified post model.
     *
     * No other values are allowed as they are not defined in any schema
     * table.
     */
    post_type: string;

    /**
     * The total vote score calculated as upvotes minus downvotes for
     * ranking purposes.
     *
     * This field represents the net popularity of the post, calculated as
     * (upvotes - downvotes) as defined in the business rules. It is used as
     * the primary sorting metric in the 'top' and 'hot' algorithms.
     *
     * It is updated atomically when any vote is cast and may be negative if
     * the post receives more downvotes than upvotes.
     *
     * This field corresponds exactly to the 'vote_count' column in the
     * community_platform_posts table and is denormalized for performance
     * optimization to avoid expensive real-time calculation during feed
     * rendering.
     *
     * Note that the calculated karma for the author is based on the same
     * values but stored separately in community_platform_user_karma.
     */
    vote_count: number & tags.Type<"int32">;

    /**
     * The total number of direct comments on this post.
     *
     * This count includes all published comments on this post, regardless
     * of depth level, excluding any that have been removed or deleted.
     *
     * It is updated automatically when a comment is created or deleted and
     * serves as an indicator of engagement on the post.
     *
     * This field corresponds to the 'comment_count' column in the
     * community_platform_posts table and is denormalized for efficient
     * display in listing views.
     *
     * This count does not include nested replies to comments—it reflects
     * only top-level comment threads directly attached to the post.
     */
    comment_count: number & tags.Type<"int32">;

    /**
     * The moderation status of the post: 'published', 'unreviewed',
     * 'removed', or 'archived'.
     *
     * This field determines whether the post is visible to users and
     * appears in feeds and search results.
     *
     * - 'published': Visible to all users. This is the default status after
     *   creation unless the community requires review.
     * - 'unreviewed': Hidden from public view until moderated. Applies to
     *   communities with post_review_mode enabled.
     * - 'removed': Hidden due to moderator/admin action. Content is not
     *   accessible to users.
     * - 'archived': Historical post that is no longer active but preserved
     *   for audit; typically not returned in normal request.
     *
     * This field corresponds exactly to the 'status' column in the
     * community_platform_posts table and is critical for content moderation
     * workflow.
     *
     * Only posts with 'published' status are included in rankings and feeds
     * for authenticated and guest users. 'unreviewed' posts are visible
     * only to moderators and the author. 'removed' and 'archived' posts are
     * not returned by the API except under admin privileges.
     */
    status: string;

    /**
     * The timestamp when the post was submitted.
     *
     * This field records the exact moment the post was saved to the
     * database and is used for sorting in the 'new' ranking algorithm. It
     * is set server-side and cannot be edited by users.
     *
     * This field corresponds exactly to the 'created_at' column in the
     * community_platform_posts table and is stored in the database as a
     * timestamp with time zone.
     *
     * Post ranking algorithms (hot, top, controversial) use this field to
     * calculate time decay, and the system uses UTC time for all
     * comparisons but stores values in the Asia/Seoul timezone (UTC+9) as
     * required by the business rules.
     *
     * No client-side clock value is accepted—the server timestamp is
     * authoritative.
     */
    created_at: string & tags.Format<"date-time">;
  };
}

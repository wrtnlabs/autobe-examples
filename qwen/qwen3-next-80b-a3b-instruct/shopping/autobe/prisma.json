{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"shopping_mall_categories","description":"Stores the hierarchical category structure used to organize products in the catalog. Categories form the taxonomy that enables navigation and filtering in the frontend. This table enables parent-child relationships for multi-level category trees, such as 'Electronics > Computers > Laptops'. Each category has its own display name, URL slug, and active status. This model is referenced by shopping_mall_product_categories but is never directly manipulated by end-users.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","relation":{"name":"parent","targetModel":"shopping_mall_categories","mappingName":"recursive"},"unique":false,"nullable":true,"description":"Parent category in hierarchical tree. {@link shopping_mall_categories.id}."}],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Display name of the category as shown to customers. Example: 'Electronics'."},{"name":"slug","type":"string","nullable":false,"description":"URL-friendly identifier for the category. Used in routing and SEO. Must be unique. Example: 'electronics'."},{"name":"depth","type":"int","nullable":false,"description":"Nesting level of the category in the hierarchy. Root categories have depth 0, children have depth 1+."},{"name":"is_active","type":"boolean","nullable":false,"description":"Indicates whether the category is active and visible to customers. Inactive categories are hidden but preserved for historical reference."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the category was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the category was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the category was soft-deleted. Null if active."}],"uniqueIndexes":[{"fieldNames":["slug"],"unique":true},{"fieldNames":["parent_id","name"],"unique":true}],"plainIndexes":[{"fieldNames":["parent_id"]},{"fieldNames":["is_active"]},{"fieldNames":["depth"]}],"ginIndexes":[]},{"name":"shopping_mall_sections","description":"Defines UI sections used across the platform for layout configuration. Sections represent content areas on pages such as 'hero-banner', 'featured-products', 'recommendations'. Each section has a unique identifier for programmatic reference, a display name, priority for ordering, and position for placement. Admins configure these sections to control page layouts, but customers never interact with them directly.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Display name of the section for admin interface. Example: 'Hero Banner Section'."},{"name":"identifier","type":"string","nullable":false,"description":"Unique system identifier used in code and templates to reference this section. Must be unique. Example: 'hero-banner'."},{"name":"priority","type":"int","nullable":false,"description":"Ordering priority for displaying sections on a page. Higher values appear first."},{"name":"position","type":"string","nullable":false,"description":"Location where this section should be rendered. Examples: 'top', 'sidebar', 'footer', 'middle'."},{"name":"is_active","type":"boolean","nullable":false,"description":"Controls whether the section is active and rendered on pages. Inactive sections are hidden from display."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the section was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the section was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the section was soft-deleted. Null if active."}],"uniqueIndexes":[{"fieldNames":["identifier"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]},{"fieldNames":["priority"]},{"fieldNames":["position"]}],"ginIndexes":[]},{"name":"shopping_mall_system_configs","description":"Stores global system configuration parameters that control platform behavior. Configuration values are stored as JSON strings to support complex structures while maintaining a simple key-value schema. This table enables dynamic configuration changes without code deployment. Values are consumed by application services and admin tools. Key examples include 'payment_gateway_settings', 'refund_policy_defaults', 'review_auto_moderation_rules'. This table is managed exclusively by system administrators via backend interfaces.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"key","type":"string","nullable":false,"description":"Unique system-wide key identifying the configuration parameter. Must be unique. Example: 'payment_gateway_fee_percent'."},{"name":"value","type":"string","nullable":false,"description":"JSON-encoded value of the configuration parameter. Supports strings, numbers, booleans, arrays, and objects. Must be valid JSON."},{"name":"type","type":"string","nullable":false,"description":"Type classification of the configuration value. Used for validation and UI rendering. Allowed values: 'string', 'int', 'boolean', 'json'."},{"name":"description","type":"string","nullable":false,"description":"Human-readable description explaining the purpose and expected format of this configuration parameter."},{"name":"is_active","type":"boolean","nullable":false,"description":"Indicates if the configuration is currently active. Inactive configurations are ignored by system processes."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the configuration was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the configuration was last updated."},{"name":"deleted_at","type":"datetime","nullable":true,"description":"Timestamp when the configuration was soft-deleted. Null if active."}],"uniqueIndexes":[{"fieldNames":["key"],"unique":true}],"plainIndexes":[{"fieldNames":["is_active"]},{"fieldNames":["type"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"shopping_mall_customers","description":"Customer account information. Each customer has a unique identity with authentication credentials and profile details. This table represents the core user entity for platform consumers who browse, purchase, and review products.","stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"References the user account. {@link shopping_mall_customers.id}.","relation":{"name":"user","targetModel":"shopping_mall_customers","mappingName":"recursive"},"nullable":false,"unique":true}],"plainFields":[{"name":"created_at","type":"datetime","description":"Timestamp when the customer account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the customer account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the customer account was soft-deleted. If null, account is active.","nullable":true},{"name":"email","type":"string","description":"Customer's primary email address for account login and communication.","nullable":false},{"name":"password_hash","type":"string","description":"Hashed password for authentication. Never store plain text passwords.","nullable":false},{"name":"first_name","type":"string","description":"Customer's first name as provided during registration.","nullable":true},{"name":"last_name","type":"string","description":"Customer's last name as provided during registration.","nullable":true},{"name":"phone","type":"string","description":"Customer's phone number for order notifications and contact.","nullable":true},{"name":"email_verified","type":"boolean","description":"Indicates if customer has verified their email address.","nullable":false},{"name":"is_active","type":"boolean","description":"Determines if the customer account is active and can log in. Suspended accounts set this to false.","nullable":false}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["email_verified"]},{"fieldNames":["is_active"]}],"ginIndexes":[],"material":false},{"name":"shopping_mall_sellers","description":"Seller account information. Represents business entities that list and sell products on the platform. Each seller is associated with a verified user account and requires admin approval before gaining publishing rights.","stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"References the user account. {@link shopping_mall_customers.id}.","relation":{"name":"user","targetModel":"shopping_mall_customers"},"nullable":false,"unique":true}],"plainFields":[{"name":"created_at","type":"datetime","description":"Timestamp when the seller account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the seller account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the seller account was soft-deleted. If null, account is active.","nullable":true},{"name":"business_name","type":"string","description":"Legal business name of the seller entity.","nullable":false},{"name":"tax_id","type":"string","description":"Tax identification number for the seller business.","nullable":false},{"name":"bank_account_number","type":"string","description":"Bank account number for seller payouts.","nullable":true},{"name":"bank_routing_number","type":"string","description":"Bank routing number for seller payouts.","nullable":true},{"name":"business_address","type":"string","description":"Physical business address for legal and tax purposes.","nullable":true},{"name":"is_approved","type":"boolean","description":"Indicates if seller has been approved by admin. Only approved sellers can list products.","nullable":false},{"name":"application_rejected","type":"boolean","description":"Indicates if the seller application was rejected.","nullable":false},{"name":"rejection_reason","type":"string","description":"Reason for seller application rejection. Only populated if application_rejected is true.","nullable":true},{"name":"is_suspended","type":"boolean","description":"Indicates if the seller account has been suspended by admin.","nullable":false},{"name":"suspension_reason","type":"string","description":"Reason for seller suspension. Only populated if is_suspended is true.","nullable":true}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true},{"fieldNames":["business_name"],"unique":true},{"fieldNames":["tax_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["is_approved"]},{"fieldNames":["is_suspended"]}],"ginIndexes":[],"material":false},{"name":"shopping_mall_administrators","description":"System administrator accounts with full platform governance capabilities. These accounts have elevated permissions to manage users, products, orders, refunds, and approve seller applications.","stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"user_id","type":"uuid","description":"References the user account. {@link shopping_mall_customers.id}.","relation":{"name":"user","targetModel":"shopping_mall_customers"},"nullable":false,"unique":true}],"plainFields":[{"name":"created_at","type":"datetime","description":"Timestamp when the administrator account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the administrator account was last updated.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Timestamp when the administrator account was soft-deleted. If null, account is active.","nullable":true},{"name":"is_active","type":"boolean","description":"Determines if the administrator account is active and can log in.","nullable":false},{"name":"role","type":"string","description":"Administrative role, typically 'super_admin' or 'support_admin' based on permissions level.","nullable":false},{"name":"access_level","type":"string","description":"Level of administrative access. 'full' gives complete control, 'limited' restricts sensitive actions.","nullable":false},{"name":"last_login","type":"datetime","description":"Timestamp of last successful login for this admin account.","nullable":true},{"name":"failed_login_attempts","type":"int","description":"Count of consecutive failed login attempts. Used for security lockout.","nullable":false},{"name":"is_locked_out","type":"boolean","description":"Indicates if the account has been locked due to excessive failed login attempts.","nullable":false}],"uniqueIndexes":[{"fieldNames":["user_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["is_active"]},{"fieldNames":["role"]},{"fieldNames":["is_locked_out"]}],"ginIndexes":[],"material":false}]},{"filename":"schema-03-products.prisma","namespace":"Products","models":[{"name":"shopping_mall_products","description":"Main product entity representing items available for sale in the shopping mall platform. Each product has a unique identifier and serves as the foundation for product variants (SKUs).","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_categories_id","type":"uuid","nullable":false,"unique":false,"description":"Category to which this product belongs. {@link shopping_mall_product_categories.id}.","relation":{"name":"category","targetModel":"shopping_mall_product_categories"}}],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"The display name of the product."},{"name":"description","type":"string","nullable":false,"description":"Detailed description of the product, including features and specifications."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this product record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this product record was last updated."}],"uniqueIndexes":[{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["shopping_mall_product_categories_id","created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_product_images","description":"Images associated with products in the catalog. Supports multiple images per product for comprehensive visual presentation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_products_id","type":"uuid","nullable":false,"unique":false,"description":"Product to which this image belongs. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"}}],"plainFields":[{"name":"url","type":"uri","nullable":false,"description":"Full URL or path to the image file."},{"name":"is_primary","type":"boolean","nullable":false,"description":"Indicates whether this image is the primary (featured) image for the product."},{"name":"sort_order","type":"int","nullable":false,"description":"Order index for displaying images in galleries. Lower numbers appear first."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this image was uploaded."}],"uniqueIndexes":[{"fieldNames":["shopping_mall_products_id","is_primary"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_products_id"]},{"fieldNames":["sort_order"]},{"fieldNames":["created_at"]},{"fieldNames":["url"]}],"ginIndexes":[]},{"name":"shopping_mall_product_videos","description":"Videos associated with products in the catalog. Supports up to two videos per product for enhanced product demonstrations.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_products_id","type":"uuid","nullable":false,"unique":false,"description":"Product to which this video belongs. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"}}],"plainFields":[{"name":"url","type":"uri","nullable":false,"description":"Full URL or path to the video file."},{"name":"sort_order","type":"int","nullable":false,"description":"Order index for displaying videos. Lower numbers appear first."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this video was uploaded."}],"uniqueIndexes":[{"fieldNames":["shopping_mall_products_id","sort_order"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_products_id"]},{"fieldNames":["sort_order"]},{"fieldNames":["created_at"]},{"fieldNames":["url"]}],"ginIndexes":[]},{"name":"shopping_mall_product_categories","description":"Product categories for organizing products in a hierarchical structure. Each category serves as a filterable group for product discovery.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"parent_id","type":"uuid","nullable":true,"unique":false,"description":"Parent category if this is a subcategory. {@link shopping_mall_product_categories.id}.","relation":{"name":"parent","targetModel":"shopping_mall_product_categories","mappingName":"recursive"}}],"plainFields":[{"name":"name","type":"string","nullable":false,"description":"Display name of the category."},{"name":"description","type":"string","nullable":true,"description":"Optional description of the category's purpose or content."},{"name":"slug","type":"string","nullable":false,"description":"URL-friendly identifier for the category (used in routing)."},{"name":"is_active","type":"boolean","nullable":false,"description":"Whether this category is currently active and visible to customers."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this category was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this category was last updated."}],"uniqueIndexes":[{"fieldNames":["slug"],"unique":true},{"fieldNames":["name"],"unique":true}],"plainIndexes":[{"fieldNames":["parent_id"]},{"fieldNames":["is_active"]},{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-04-skus.prisma","namespace":"SKUs","models":[{"name":"shopping_mall_product_skus","description":"Represents individual product variants (SKUs) that represent atomic sale units. Each SKU has unique pricing, attributes, and inventory. Managed directly by sellers through product listing interface. Customers select SKUs for purchase in cart and orders. Required for inventory tracking and order fulfillment. References master product.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_id","type":"uuid","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false,"description":"Reference to the master product this SKU belongs to. {@link shopping_mall_products.id}."}],"plainFields":[{"name":"sku_code","type":"string","nullable":false,"description":"Unique system-generated SKU code (e.g., SH-RED-M-2024)."},{"name":"name","type":"string","nullable":false,"description":"Display name of the SKU variant (e.g., 'Red, Medium')."},{"name":"price","type":"double","nullable":false,"description":"Individual price for this specific SKU variant. Must be greater than 0."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this SKU was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this SKU was last updated."}],"uniqueIndexes":[{"fieldNames":["sku_code"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_product_id"]},{"fieldNames":["price"]},{"fieldNames":["created_at"]}],"ginIndexes":[{"fieldName":"name"}]},{"name":"shopping_mall_sku_attributes","description":"Stores attribute name-value pairs for each SKU. Maintains normalized representation of variant characteristics like color, size, material. Each record belongs to exactly one SKU. Used to build dynamic product configurators and display variant options. This table enables flexible product variants without schema changes.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_sku_id","type":"uuid","relation":{"name":"sku","targetModel":"shopping_mall_product_skus"},"unique":false,"nullable":false,"description":"Reference to the SKU this attribute belongs to. {@link shopping_mall_product_skus.id}."}],"plainFields":[{"name":"attribute_name","type":"string","nullable":false,"description":"Name of the attribute (e.g., 'Color', 'Size', 'Material'). Locked after first SKU creation."},{"name":"attribute_value","type":"string","nullable":false,"description":"Value of the attribute for this particular SKU (e.g., 'Red', 'Medium', 'Cotton')."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this attribute was added to the SKU."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this attribute was last modified."}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_sku_id","attribute_name"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_product_sku_id"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[{"fieldName":"attribute_value"}]},{"name":"shopping_mall_sku_inventory","description":"Tracks real-time inventory levels per SKU for accurate stock management. Directly impacts product availability on the storefront. Sellers update inventory here. System validates cart and checkout against this inventory. Updated atomically during order processing to prevent oversell.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_product_sku_id","type":"uuid","relation":{"name":"sku","targetModel":"shopping_mall_product_skus"},"unique":true,"nullable":false,"description":"Reference to the SKU this inventory record belongs to. One-to-one relationship. {@link shopping_mall_product_skus.id}."}],"plainFields":[{"name":"quantity","type":"int","nullable":false,"description":"Current available inventory count for this SKU. Must be >= 0."},{"name":"warning_threshold","type":"int","nullable":true,"description":"Inventory level at which 'Low Stock' warning should be displayed. Optional."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when inventory record was created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when inventory was last updated."}],"uniqueIndexes":[{"fieldNames":["shopping_mall_product_sku_id"],"unique":true}],"plainIndexes":[{"fieldNames":["quantity"]},{"fieldNames":["warning_threshold"]}],"ginIndexes":[]}]},{"filename":"schema-05-carts.prisma","namespace":"Carts","models":[{"name":"shopping_mall_carts","description":"Temporarily stores a customer's shopping cart before checkout. Each user has at most one active cart. This table serves as a container for cart items and is cleared upon successful purchase. Maintains session state across devices but is not intended for long-term persistence or auditing.\n\n@namespace Carts\n@author AutoBE - https://github.com/wrtnlabs/autobe","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":true,"nullable":false,"description":"References the customer who owns this cart. {@link shopping_mall_customers.id}."}],"plainFields":[{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the cart was first created."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the cart was last modified (added/removed items)."}],"uniqueIndexes":[{"fieldNames":["shopping_mall_customer_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[]},{"name":"shopping_mall_cart_items","description":"Stores individual product variants (SKUs) added to a customer's cart. Each row represents one product quantity in the cart. This table is exclusively managed through its parent cart and has no direct user-facing API. Cart items are cleared upon order completion.\n\n@namespace Carts\n@author AutoBE - https://github.com/wrtnlabs/autobe","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_cart_id","type":"uuid","relation":{"name":"cart","targetModel":"shopping_mall_carts"},"unique":false,"nullable":false,"description":"References the parent cart that contains this item. {@link shopping_mall_carts.id}."},{"name":"shopping_mall_product_sku_id","type":"uuid","relation":{"name":"productSku","targetModel":"shopping_mall_product_skus"},"unique":false,"nullable":false,"description":"References the specific product variant (SKU) in this cart item. {@link shopping_mall_product_skus.id}."}],"plainFields":[{"name":"quantity","type":"int","nullable":false,"description":"Number of units of this SKU in the cart. Must be greater than zero."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when this item was added to the cart."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when this item's quantity was last modified."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_cart_id"]},{"fieldNames":["shopping_mall_product_sku_id"]},{"fieldNames":["created_at"]},{"fieldNames":["updated_at"]}],"ginIndexes":[]}]},{"filename":"schema-06-wishlists.prisma","namespace":"Wishlists","models":[{"name":"shopping_mall_wishlists","description":"Main wishlist entity that represents a user's personal collection of items they wish to purchase in the future. Each wishlist belongs to a single customer and contains multiple wishlist items. This model serves as the container for wishlist_items and connects user identity with product interest data.","stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"Belongs to the customer's {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"nullable":false,"unique":true}],"plainFields":[{"name":"created_at","type":"datetime","description":"Timestamp when this wishlist was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this wishlist was last updated.","nullable":false},{"name":"name","type":"string","description":"Display name of the wishlist. Defaults to 'My Wishlist' for standard user wishlists.","nullable":false,"default":"My Wishlist"}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[],"material":false},{"name":"shopping_mall_wishlist_items","description":"Individual items saved in a customer's wishlist. Each item represents a specific product variant (SKU) that a customer has expressed interest in for future purchase. This table links wishlists to specific product SKUs and maintains user-specific product interest data.","stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_wishlist_id","type":"uuid","description":"Belongs to the wishlist {@link shopping_mall_wishlists.id}.","relation":{"name":"wishlist","targetModel":"shopping_mall_wishlists"},"nullable":false,"unique":false},{"name":"shopping_mall_product_sku_id","type":"uuid","description":"References the specific product variant (SKU) that is saved in this wishlist {@link shopping_mall_product_skus.id}.","relation":{"name":"productSku","targetModel":"shopping_mall_product_skus"},"nullable":false,"unique":false}],"plainFields":[{"name":"created_at","type":"datetime","description":"Timestamp when this item was added to the wishlist.","nullable":false},{"name":"note","type":"string","description":"Optional private note from the customer about this wishlist item (e.g., 'Gift for birthday','Looking for sale').","nullable":true},{"name":"priority","type":"int","description":"Customer-defined priority level for this item (1-5, where 5 is highest interest). Default is 3 (medium priority).","nullable":false,"default":3}],"uniqueIndexes":[{"fieldNames":["shopping_mall_wishlist_id","shopping_mall_product_sku_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_wishlist_id"]},{"fieldNames":["shopping_mall_product_sku_id"]},{"fieldNames":["created_at"]},{"fieldNames":["priority"]}],"ginIndexes":[],"material":false}]},{"filename":"schema-07-orders.prisma","namespace":"Orders","models":[{"name":"shopping_mall_orders","description":"Main order record representing a customer purchase transaction. Each order is tied to exactly one customer and contains multiple order items.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"The customer who placed this order. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"nullable":false,"unique":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"The seller who fulfilled this order. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"nullable":false,"unique":false}],"plainFields":[{"name":"order_number","type":"string","description":"Unique order number in format 'ORD-YYYYMMDD-XXXXX'.","nullable":false},{"name":"status","type":"string","description":"Current status of the order. Must be one of: 'Created', 'Paid', 'Awaiting Shipment', 'Shipped', 'Delivered', 'Completed', 'Canceled', 'Refunded'.","nullable":false},{"name":"subtotal","type":"double","description":"Total value of all order items before shipping and tax.","nullable":false},{"name":"shipping_cost","type":"double","description":"Cost of shipping for this order.","nullable":false},{"name":"tax_amount","type":"double","description":"Total tax amount calculated for this order based on shipping address.","nullable":false},{"name":"total_amount","type":"double","description":"Final total amount (subtotal + shipping + tax).","nullable":false},{"name":"currency","type":"string","description":"Currency code for this order (e.g., 'USD').","nullable":false},{"name":"payment_method","type":"string","description":"Payment method used (e.g., 'Credit Card ending in 4242').","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the order was initially created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the order was last updated.","nullable":false},{"name":"payment_confirmed_at","type":"datetime","description":"Timestamp when payment was successfully confirmed.","nullable":true},{"name":"shipped_at","type":"datetime","description":"Timestamp when the order was marked as shipped by the seller.","nullable":true},{"name":"delivered_at","type":"datetime","description":"Timestamp when the order was marked as delivered.","nullable":true},{"name":"completed_at","type":"datetime","description":"Timestamp when the order automatically transitioned to 'Completed' status (48 hours after delivery).","nullable":true},{"name":"canceled_at","type":"datetime","description":"Timestamp when the order was canceled by customer or seller.","nullable":true},{"name":"refunded_at","type":"datetime","description":"Timestamp when the order was fully refunded.","nullable":true},{"name":"cancelled_by","type":"string","description":"System-generated reason for cancellation ('customer', 'seller', 'admin').","nullable":true},{"name":"tracking_number","type":"string","description":"Primary tracking number for the order overview (if available).","nullable":true},{"name":"carrier","type":"string","description":"Primary shipping carrier name for the order overview (if available).","nullable":true},{"name":"notes","type":"string","description":"Any additional notes or special instructions for this order (e.g., 'Leave at front door').","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["order_number"]},{"fieldNames":["shopping_mall_customer_id","created_at"]},{"fieldNames":["shopping_mall_seller_id","created_at"]},{"fieldNames":["status","created_at"]},{"fieldNames":["created_at"]},{"fieldNames":["payment_confirmed_at"]},{"fieldNames":["shipped_at"]},{"fieldNames":["delivered_at"]},{"fieldNames":["completed_at"]}],"ginIndexes":[]},{"name":"shopping_mall_order_items","description":"Line items that make up a shopping_mall_order, representing each SKU purchased, with its specific pricing and quantities.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"The order this item belongs to. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"nullable":false,"unique":false},{"name":"shopping_mall_product_sku_id","type":"uuid","description":"The specific product SKU variant that was purchased. {@link shopping_mall_product_skus.id}.","relation":{"name":"sku","targetModel":"shopping_mall_product_skus"},"nullable":false,"unique":false}],"plainFields":[{"name":"quantity","type":"int","description":"Number of units of this SKU purchased.","nullable":false},{"name":"unit_price","type":"double","description":"Price per unit of this SKU at the time of purchase.","nullable":false},{"name":"total_price","type":"double","description":"Total price for this line item (unit_price * quantity).","nullable":false},{"name":"product_name","type":"string","description":"Product name as it was at time of purchase for audit trail.","nullable":false},{"name":"product_description","type":"string","description":"Product description as it was at time of purchase for audit trail.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this order item was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this order item was updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_id"]},{"fieldNames":["shopping_mall_product_sku_id"]},{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_order_shippings","description":"Shipping details associated with an order, capturing carrier and tracking information provided by seller at time of fulfillment.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"The order this shipping record belongs to. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"nullable":false,"unique":true}],"plainFields":[{"name":"carrier","type":"string","description":"The shipping carrier name (e.g., 'UPS', 'FedEx').","nullable":false},{"name":"tracking_number","type":"string","description":"The unique tracking number provided by the carrier.","nullable":false},{"name":"shipping_method","type":"string","description":"Type of shipping selected: 'Standard', 'Expedited', 'Overnight'.","nullable":false},{"name":"estimated_delivery","type":"datetime","description":"Estimated delivery date provided by the seller.","nullable":true},{"name":"actual_shipping_date","type":"datetime","description":"Actual date and time when the seller marked the order as shipped.","nullable":false},{"name":"notes","type":"string","description":"Any additional shipping instructions provided by seller.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this shipping record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this shipping record was last updated.","nullable":false}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_id"]},{"fieldNames":["tracking_number"]},{"fieldNames":["carrier"]},{"fieldNames":["actual_shipping_date"]}],"ginIndexes":[]},{"name":"shopping_mall_order_payments","description":"Payment transaction records for each order, capturing details from the payment gateway for reconciliation.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","description":"The order this payment record belongs to. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"nullable":false,"unique":true}],"plainFields":[{"name":"gateway_transaction_id","type":"string","description":"Unique transaction ID from the external payment gateway.","nullable":false},{"name":"payment_gateway","type":"string","description":"The payment gateway provider used (e.g., 'Stripe', 'PayPal'), not specified in business logic but captured for technical reconciliation.","nullable":false},{"name":"payment_status","type":"string","description":"Status of the payment transaction: 'Pending', 'Approved', 'Declined', 'Timeout', 'Unknown', 'Refunded'.","nullable":false},{"name":"amount","type":"double","description":"Amount charged to the payment method for this transaction.","nullable":false},{"name":"currency","type":"string","description":"Currency code used for this payment transaction.","nullable":false},{"name":"authorization_code","type":"string","description":"Authorization code returned by the payment gateway if approved.","nullable":true},{"name":"error_code","type":"string","description":"Error code returned by the payment gateway in case of failure.","nullable":true},{"name":"error_message","type":"string","description":"Human-readable error message from the payment gateway.","nullable":true},{"name":"payment_method_type","type":"string","description":"Type of payment method used: 'Credit Card', 'Debit Card', 'Digital Wallet'.","nullable":false},{"name":"payment_method_last4","type":"string","description":"Last 4 digits of the payment method card number.","nullable":true},{"name":"captured_at","type":"datetime","description":"Timestamp when payment was captured (completed).","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when this payment record was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when this payment record was last updated.","nullable":false},{"name":"gateway_response_raw","type":"string","description":"Raw response JSON from the payment gateway for audit and debugging purposes.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_id"]},{"fieldNames":["gateway_transaction_id"]},{"fieldNames":["payment_status","created_at"]},{"fieldNames":["captured_at"]}],"ginIndexes":[]}]},{"filename":"schema-08-refunds.prisma","namespace":"Refunds","models":[{"name":"shopping_mall_refund_requests","description":"Record of refund requests initiated by customers after order delivery. Each request is tied to an order and specifies items, reason, and requested amount for financial reversal. This is a primary table allowing independent lookup, filtering, and management by customer support agents.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_order_id","type":"uuid","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":false,"description":"The order for which the refund is being requested. {@link shopping_mall_orders.id}."},{"name":"shopping_mall_customer_id","type":"uuid","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false,"description":"The customer who initiated the refund request. {@link shopping_mall_customers.id}."},{"name":"shopping_mall_seller_id","type":"uuid","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false,"description":"The seller whose product is being returned. {@link shopping_mall_sellers.id}."}],"plainFields":[{"name":"status","type":"string","nullable":false,"description":"Current status of the refund request. Values: 'requested', 'approved', 'denied', 'auto-approved', 'completed'."},{"name":"reason","type":"string","nullable":false,"description":"Category reason for refund selection from predefined list: 'Damaged items', 'Incorrect item', 'Item not as described', 'Didn't receive', 'Changed mind'."},{"name":"refund_type","type":"string","nullable":false,"description":"Type of refund: 'full' or 'partial'."},{"name":"requested_amount","type":"double","nullable":false,"description":"Amount of money requested for refund in USD. Must be positive and cannot exceed order value."},{"name":"refund_item_ids","type":"string","nullable":false,"description":"Comma-separated list of order_item_ids being refunded. Format: 'uuid,uuid,uuid'."},{"name":"refund_reason_detail","type":"string","nullable":true,"description":"Additional explanation provided by customer regarding the refund reason. Not required."},{"name":"created_at","type":"datetime","nullable":false,"description":"Timestamp when the refund request was submitted."},{"name":"updated_at","type":"datetime","nullable":false,"description":"Timestamp when the refund request was last updated."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_order_id"]},{"fieldNames":["shopping_mall_customer_id"]},{"fieldNames":["status"]},{"fieldNames":["created_at"]},{"fieldNames":["shopping_mall_seller_id","status"]}],"ginIndexes":[]},{"name":"shopping_mall_refund_approvals","description":"Audit trail of actions taken on refund requests by sellers or administrators. Records approval/denial decisions, timestamps, and notes. This is a subsidiary table managed solely through the refund_request workflow, not directly by end users.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_refund_request_id","type":"uuid","relation":{"name":"refundRequest","targetModel":"shopping_mall_refund_requests"},"unique":true,"nullable":false,"description":"The refund request being approved or denied. {@link shopping_mall_refund_requests.id}."},{"name":"shopping_mall_seller_id","type":"uuid","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":true,"description":"The seller who approved or denied this refund request. Null if approved by admin. {@link shopping_mall_sellers.id}."},{"name":"shopping_mall_admin_id","type":"uuid","relation":{"name":"admin","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true,"description":"The admin who approved or denied this refund request. Null if approved by seller. {@link shopping_mall_administrators.id}."}],"plainFields":[{"name":"status","type":"string","nullable":false,"description":"Final status of approval: 'approved', 'denied', 'auto-approved'."},{"name":"approver_type","type":"string","nullable":false,"description":"Type of entity who made the decision: 'seller' or 'admin'."},{"name":"approval_notes","type":"string","nullable":true,"description":"Optional reason or justification provided by the approver for approval/denial."},{"name":"approved_at","type":"datetime","nullable":false,"description":"Timestamp when the decision was made."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_refund_request_id"]},{"fieldNames":["approved_at"]},{"fieldNames":["approver_type"]},{"fieldNames":["shopping_mall_seller_id","status"]},{"fieldNames":["shopping_mall_admin_id","status"]}],"ginIndexes":[]},{"name":"shopping_mall_returns","description":"Track return logistics for approved refund requests. Stores return shipping details, tracking, and physical item receipt status. This is a subsidiary table triggered by refund approval and managed by fulfillment logistics, not by end users or sellers.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_refund_request_id","type":"uuid","relation":{"name":"refundRequest","targetModel":"shopping_mall_refund_requests"},"unique":true,"nullable":false,"description":"The refund request that triggered this return. {@link shopping_mall_refund_requests.id}."},{"name":"shopping_mall_order_item_id","type":"uuid","relation":{"name":"orderItem","targetModel":"shopping_mall_order_items"},"unique":false,"nullable":false,"description":"The specific order item being returned. {@link shopping_mall_order_items.id}."}],"plainFields":[{"name":"return_label","type":"string","nullable":false,"description":"Generated return shipping label ID or URL used for customer return."},{"name":"return_status","type":"string","nullable":false,"description":"Current return logistics status: 'label_generated', 'shipped', 'received', 'rejected', 'canceled'."},{"name":"return_tracking_number","type":"string","nullable":true,"description":"Tracking number provided by customer when shipping item back. Optional unless 'shipped' status."},{"name":"return_received_date","type":"datetime","nullable":true,"description":"Date when seller physically received the returned item. Null until received."},{"name":"inventory_restored","type":"boolean","nullable":false,"description":"Whether returned item quantity has been restored to seller's inventory. True = restored."},{"name":"reason_for_rejection","type":"string","nullable":true,"description":"Reason seller rejected returned item (e.g., 'not as described', 'damaged during return', 'wrong item')."}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["shopping_mall_refund_request_id"]},{"fieldNames":["return_status"]},{"fieldNames":["return_received_date"]},{"fieldNames":["inventory_restored"]},{"fieldNames":["shopping_mall_order_item_id"]}],"ginIndexes":[]}]},{"filename":"schema-09-reviews.prisma","namespace":"Reviews","models":[{"name":"shopping_mall_reviews","description":"Customer reviews for products, linked to both the customer who submitted it and the product being reviewed. This model captures the core feedback mechanism of the platform. Verified purchase status is enforced through linkage to the order system. All reviews are immutable after creation, but can be flagged for moderation.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_customer_id","type":"uuid","description":"The customer who submitted this review. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"shopping_mall_product_sku_id","type":"uuid","description":"The specific product variant (SKU) that the review is about. {@link shopping_mall_product_skus.id}.","relation":{"name":"productSku","targetModel":"shopping_mall_product_skus"},"unique":false,"nullable":false}],"plainFields":[{"name":"rating","type":"int","description":"The star rating given by the customer, on a scale of 1 to 5. Must be a whole number.","nullable":false},{"name":"title","type":"string","description":"The title or headline of the review, summarizing the experience in a few words.","nullable":false},{"name":"body","type":"string","description":"The full written review content provided by the customer. Can be a detailed description of their experience.","nullable":false},{"name":"submitted_at","type":"datetime","description":"The timestamp when the customer submitted the review. This is automatically set upon creation.","nullable":false},{"name":"verified_purchase","type":"boolean","description":"Indicates whether the review is from a customer who actually purchased this specific SKU. Set to true only if a matching, completed order exists in the order system.","nullable":false},{"name":"is_flagged","type":"boolean","description":"Indicates if this review has been flagged for moderation by the system or by other users. Triggered by content filters or user reports.","nullable":true},{"name":"is_hidden","type":"boolean","description":"Indicates if the review is hidden from public view, either due to pending moderation, admin action, or a violation of content guidelines.","nullable":true},{"name":"updated_at","type":"datetime","description":"The timestamp when the review was last edited, up to 14 days after its initial submission.","nullable":true},{"name":"deleted_at","type":"datetime","description":"The timestamp when the review was soft-deleted by an administrator. A soft delete allows for audit traceability.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_customer_id","shopping_mall_product_sku_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_product_sku_id","submitted_at"]},{"fieldNames":["shopping_mall_customer_id","submitted_at"]},{"fieldNames":["is_flagged"]},{"fieldNames":["is_hidden"]}],"ginIndexes":[{"fieldName":"title"},{"fieldName":"body"}]},{"name":"shopping_mall_review_responses","description":"Public responses from sellers to customer reviews. These responses are posted to provide feedback, clarification, or customer service on the product review. Each response is linked to a single review and cannot exist without one. Seller responses are considered part of the public product page dialogue.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"The review this response is replying to. {@link shopping_mall_reviews.id}. This relationship is required and the review must be visible (not hidden).","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":true,"nullable":false},{"name":"shopping_mall_seller_id","type":"uuid","description":"The seller who authored this response. {@link shopping_mall_sellers.id}. This links the response directly to the seller's product.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false}],"plainFields":[{"name":"body","type":"string","description":"The text content of the seller's reply to the customer review. Limited to 500 characters to encourage concise and professional communication.","nullable":false},{"name":"created_at","type":"datetime","description":"The timestamp when this seller response was published. This is automatically set upon creation.","nullable":false},{"name":"updated_at","type":"datetime","description":"The timestamp when this seller response was last edited. Includes versioning of replies.","nullable":true},{"name":"deleted_at","type":"datetime","description":"The timestamp when this response was removed. This occurs automatically if its associated review is hidden or deleted by an admin.","nullable":true}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_seller_id","created_at"]}],"ginIndexes":[]},{"name":"shopping_mall_review_flags","description":"System records for badges, reports, or flags on reviews. When a review is flagged by a user or by automated content filters, this table logs the event. Any interaction that triggers a moderation action (user report, system flag) is stored here for audit trail purposes.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"shopping_mall_review_id","type":"uuid","description":"The review that has been flagged or reported. {@link shopping_mall_reviews.id}.","relation":{"name":"review","targetModel":"shopping_mall_reviews"},"unique":false,"nullable":false},{"name":"shopping_mall_customer_id","type":"uuid","description":"The customer who flagged or reported this review. {@link shopping_mall_customers.id}. This field is null if the flag was created by the system's automated filter.","relation":{"name":"reporter","targetModel":"shopping_mall_customers"},"unique":false,"nullable":true},{"name":"shopping_mall_administrator_id","type":"uuid","description":"The admin who manually applied this flag, typically after review. {@link shopping_mall_administrators.id}. This is null for automated flags.","relation":{"name":"admin","targetModel":"shopping_mall_administrators"},"unique":false,"nullable":true}],"plainFields":[{"name":"type","type":"string","description":"The categorization of the flag. Must be one of: 'customer_report', 'system_flag', 'admin_flag'. This defines how the flag was created.","nullable":false},{"name":"reason","type":"string","description":"The specific reason provided for the flag. For user reports, this is the selection from a predefined list (spam, profanity, etc.). For system flags, this is the matching filter rule name. For admin flags, this is the discretion of the admin.","nullable":false},{"name":"created_at","type":"datetime","description":"The timestamp when the flag was created and logged in the system.","nullable":false},{"name":"resolved_at","type":"datetime","description":"The timestamp when the flag was acted upon (review hidden or unflagged) by an admin. Null if unresolved.","nullable":true},{"name":"is_resolved","type":"boolean","description":"Indicates whether the flagged review has been reviewed and acted upon by an admin. True when resolved_at is set.","nullable":false}],"uniqueIndexes":[{"fieldNames":["shopping_mall_review_id","shopping_mall_customer_id","type"],"unique":true}],"plainIndexes":[{"fieldNames":["shopping_mall_review_id"]},{"fieldNames":["is_resolved"]},{"fieldNames":["type"]},{"fieldNames":["created_at"]},{"fieldNames":["shopping_mall_customer_id","created_at"]},{"fieldNames":["resolved_at"]}],"ginIndexes":[]}]},{"filename":"schema-10-analytics.prisma","namespace":"Analytics","models":[{"name":"shopping_mall_sales_analytics","description":"Aggregate sales data for analytical reporting and business insights. This table contains pre-computed metrics derived from order and payment data to support executive dashboards and financial reporting. It is populated by batch processes and never updated by user actions. All data is aggregated by day, product category, seller, and region to enable performance analysis.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"product_id","type":"uuid","description":"Reference to the product in shopping_mall_products. {@link shopping_mall_products.id}.","relation":{"name":"product","targetModel":"shopping_mall_products"},"unique":false,"nullable":false},{"name":"category_id","type":"uuid","description":"Reference to the category in shopping_mall_categories. {@link shopping_mall_categories.id}.","relation":{"name":"category","targetModel":"shopping_mall_categories"},"unique":false,"nullable":false},{"name":"seller_id","type":"uuid","description":"Reference to the seller in shopping_mall_sellers. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false},{"name":"customer_id","type":"uuid","description":"Reference to the customer in shopping_mall_customers. {@link shopping_mall_customers.id}.","relation":{"name":"customer","targetModel":"shopping_mall_customers"},"unique":false,"nullable":false},{"name":"region_id","type":"uuid","description":"Reference to the region from system configuration. {@link shopping_mall_system_configs.id}.","relation":{"name":"region","targetModel":"shopping_mall_system_configs"},"unique":false,"nullable":false}],"plainFields":[{"name":"date","type":"datetime","description":"The date for which these sales metrics are aggregated, stored in Asia/Seoul timezone.","nullable":false},{"name":"total_sales","type":"double","description":"Total sales amount (before fees) for all orders on this date, in USD.","nullable":false},{"name":"total_orders","type":"int","description":"Total number of completed orders on this date.","nullable":false},{"name":"average_order_value","type":"double","description":"Average order value across all orders on this date, calculated as total_sales / total_orders.","nullable":false},{"name":"total_items_sold","type":"int","description":"Total number of individual product units sold across all orders on this date.","nullable":false},{"name":"total_revenue","type":"double","description":"Total platform revenue (after 8% transaction fee deduction) from sales on this date, in USD.","nullable":false},{"name":"total_payment_fees","type":"double","description":"Total payment gateway fees paid by the platform for transactions on this date, in USD (2.9% + $0.30 per transaction).","nullable":false},{"name":"refund_amount","type":"double","description":"Total refund amount processed for orders on this date, in USD.","nullable":false},{"name":"refund_rate","type":"double","description":"Rate of refunds as percentage of total sales for this date (refund_amount / total_sales * 100).","nullable":false},{"name":"review_count","type":"int","description":"Total number of reviews submitted for products on this date.","nullable":false},{"name":"review_rating_average","type":"double","description":"Average rating score from all reviews submitted for products on this date.","nullable":false}],"uniqueIndexes":[{"fieldNames":["date","product_id","seller_id","region_id"],"unique":true}],"plainIndexes":[{"fieldNames":["date"]},{"fieldNames":["category_id","date"]},{"fieldNames":["seller_id","date"]},{"fieldNames":["region_id","date"]},{"fieldNames":["product_id","date"]},{"fieldNames":["customer_id","date"]}],"ginIndexes":[]},{"name":"shopping_mall_earnings_ledger","description":"Detailed earnings tracking for each seller, calculated from order transactions and fees. This ledger records all earnings adjustments including sales, platform fees, payments, refunds, and bonuses. It enables real-time financial tracking for sellers and is updated by transactional events as they occur. All amounts are in USD.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"seller_id","type":"uuid","description":"Reference to the seller who earned this income. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false},{"name":"order_id","type":"uuid","description":"Reference to the originating order that generated this earnings entry. {@link shopping_mall_orders.id}.","relation":{"name":"order","targetModel":"shopping_mall_orders"},"unique":false,"nullable":true},{"name":"refund_request_id","type":"uuid","description":"Reference to the refund request if this entry is a refund adjustment. {@link shopping_mall_refund_requests.id}.","relation":{"name":"refundRequest","targetModel":"shopping_mall_refund_requests"},"unique":false,"nullable":true}],"plainFields":[{"name":"transaction_date","type":"datetime","description":"The date and time when the earning was recorded (in Asia/Seoul timezone).","nullable":false},{"name":"transaction_type","type":"string","description":"Type of earnings transaction: 'SALE', 'PLATFORM_FEE', 'REFUND', 'BONUS', 'WITHDRAWAL'.","nullable":false},{"name":"amount","type":"double","description":"The monetary amount in USD for this transaction. Positive for earnings, negative for deductions.","nullable":false},{"name":"fee_breakdown","type":"string","description":"JSON string containing breakdown of fees applied: e.g., {\"platform_fee\": 5.6, \"payment_gateway_fee\": 1.2}","nullable":true},{"name":"balance_after_transaction","type":"double","description":"The seller's running balance in USD after this transaction is applied.","nullable":false},{"name":"description","type":"string","description":"Human-readable description of the transaction for audit and reconciliation (e.g., 'Sale of Product XYZ - Order ORD-20250101-00123').","nullable":false},{"name":"status","type":"string","description":"Status of this earnings entry: 'PENDING', 'APPROVED', 'REJECTED', 'SUPERSEDED'.","nullable":false}],"uniqueIndexes":[{"fieldNames":["order_id"],"unique":true},{"fieldNames":["refund_request_id"],"unique":true}],"plainIndexes":[{"fieldNames":["seller_id","transaction_date"]},{"fieldNames":["transaction_date"]},{"fieldNames":["transaction_type","seller_id"]},{"fieldNames":["status","seller_id"]},{"fieldNames":["balance_after_transaction"]}],"ginIndexes":[]},{"name":"shopping_mall_payouts","description":"Record of scheduled and processed payouts to sellers. Tracks all payouts made by the platform to sellers' bank accounts. Payouts are calculated and executed weekly, aggregating earnings from the previous week and applying any business rules such as minimum thresholds or pending disputes.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"seller_id","type":"uuid","description":"Reference to the seller receiving this payout. {@link shopping_mall_sellers.id}.","relation":{"name":"seller","targetModel":"shopping_mall_sellers"},"unique":false,"nullable":false},{"name":"earnings_ledger_start_id","type":"uuid","description":"Reference to the earliest earnings ledger entry included in this payout period. {@link shopping_mall_earnings_ledger.id}.","relation":{"name":"earningsLedgerStart","targetModel":"shopping_mall_earnings_ledger","mappingName":"shopping_mall_payouts_of_earnings_ledger_start_id"},"unique":false,"nullable":false},{"name":"earnings_ledger_end_id","type":"uuid","description":"Reference to the latest earnings ledger entry included in this payout period. {@link shopping_mall_earnings_ledger.id}.","relation":{"name":"earningsLedgerEnd","targetModel":"shopping_mall_earnings_ledger","mappingName":"shopping_mall_payouts_of_earnings_ledger_end_id"},"unique":false,"nullable":false}],"plainFields":[{"name":"payout_cycle","type":"datetime","description":"The start of the weekly payout cycle for which this payout was generated, stored in Asia/Seoul timezone.","nullable":false},{"name":"payout_date","type":"datetime","description":"The date this payout was processed and transferred to the seller's bank account.","nullable":true},{"name":"amount","type":"double","description":"Total net payout amount to seller after all deductions (platform fee, pending disputes), in USD.","nullable":false},{"name":"total_earnings","type":"double","description":"Gross total earnings from the accounting period before any deductions, in USD.","nullable":false},{"name":"platform_fee_total","type":"double","description":"Total platform fee deducted from total earnings during this cycle (15% of net revenue), in USD.","nullable":false},{"name":"dispute_hold_amount","type":"double","description":"Amount withheld due to open disputes or pending refund requests, in USD.","nullable":false},{"name":"transaction_status","type":"string","description":"Current status of payout: 'INITIATED', 'PROCESSING', 'COMPLETED', 'FAILED', 'CANCELLED'.","nullable":false},{"name":"bank_transaction_id","type":"string","description":"Unique identifier from the bank or payment processor for the transaction, if available.","nullable":true},{"name":"payment_method","type":"string","description":"The payment method used for this payout (e.g., 'ACH', 'Wire Transfer', 'PayPal').","nullable":false}],"uniqueIndexes":[{"fieldNames":["payout_cycle","seller_id"],"unique":true},{"fieldNames":["bank_transaction_id"],"unique":true}],"plainIndexes":[{"fieldNames":["seller_id","payout_cycle"]},{"fieldNames":["payout_date"]},{"fieldNames":["transaction_status","seller_id"]},{"fieldNames":["payout_cycle"]}],"ginIndexes":[]},{"name":"shopping_mall_reporting_summaries","description":"High-level aggregated summaries to support executive dashboards and monthly reports. This table contains key performance indicators (KPIs) calculated daily from the sales analytics and earnings ledger tables. It enables fast dashboard loading by avoiding complex joins and aggregations directly on transactional data.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"reported_date","type":"datetime","description":"The date for which these summary metrics are calculated and reported, in Asia/Seoul timezone.","nullable":false},{"name":"total_active_users","type":"int","description":"Total number of active users (customers + sellers) with logins in the last 7 days on this date.","nullable":false},{"name":"total_transactions","type":"int","description":"Total number of completed orders processed as of this date.","nullable":false},{"name":"gross_merchandise_value","type":"double","description":"Total value of all completed orders before any fees or refunds, in USD.","nullable":false},{"name":"net_revenue","type":"double","description":"Total platform revenue after transaction fee (8%) deduction, in USD.","nullable":false},{"name":"seller_count","type":"int","description":"Total number of approved sellers on the platform as of this date.","nullable":false},{"name":"product_count","type":"int","description":"Total number of products listed across all sellers as of this date.","nullable":false},{"name":"avg_order_value","type":"double","description":"Average order value across all transactions, calculated daily as gross_merchandise_value / total_transactions.","nullable":false},{"name":"refund_rate","type":"double","description":"Percentage of transactions refunded as of this date (calculated from refund amount / gross_merchandise_value).","nullable":false},{"name":"customer_review_rate","type":"double","description":"Percentage of completed orders that have received a verified review as of this date.","nullable":false},{"name":"seller_retention_rate","type":"double","description":"Percentage of sellers who made at least one sale in the past 60 days, calculated daily.","nullable":false},{"name":"premium_seller_percentage","type":"double","description":"Percentage of active sellers subscribed to Premium Store tier as of this date.","nullable":false},{"name":"fraud_report_count","type":"int","description":"Total number of reported fraud incidents involving users or sellers as of this date.","nullable":false}],"uniqueIndexes":[{"fieldNames":["reported_date"],"unique":true}],"plainIndexes":[],"ginIndexes":[]}]}]}
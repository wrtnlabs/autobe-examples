{"files":[{"filename":"schema-01-systematic.prisma","namespace":"Systematic","models":[{"name":"community_platform_communities","description":"Core community entities that organize content and user interactions within the platform. Communities serve as containers for posts, comments, and subscriptions, with each having unique names and requiring moderator approval for creation.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"code","type":"string","description":"Unique community identifier consisting of alphanumeric characters and underscores, maximum 21 characters.","nullable":false},{"name":"name","type":"string","description":"Display name of the community shown to users, maximum 100 characters.","nullable":false},{"name":"description","type":"string","description":"Detailed description of the community's purpose and rules, maximum 500 characters.","nullable":false},{"name":"status","type":"string","description":"Current status of the community (pending, active, suspended, archived). Default is pending until moderator approval.","nullable":false},{"name":"business_status","type":"string","description":"Business workflow status for community management (e.g., pending_review, approved, featured).","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the community was initially created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp when the community was last modified.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for communities that have been removed but retained for audit purposes.","nullable":true}],"uniqueIndexes":[{"fieldNames":["code"],"unique":true}],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["created_at"]}],"ginIndexes":[]}]},{"filename":"schema-02-actors.prisma","namespace":"Actors","models":[{"name":"community_platform_members","description":"Registered members who participate in the community platform, posting content, voting, and engaging with discussions. Members can customize their profiles and subscribe to communities of interest. Each member has a unique email and nickname for identification and communication.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[],"plainFields":[{"name":"email","type":"string","description":"Email address for account registration and notifications.","nullable":false},{"name":"password_hash","type":"string","description":"Hashed password for secure authentication.","nullable":false},{"name":"nickname","type":"string","description":"Unique username displayed throughout the platform.","nullable":false},{"name":"bio","type":"string","description":"Optional user biography or description.","nullable":true},{"name":"avatar_uri","type":"uri","description":"Optional avatar image URL for user profiles.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the member account was created.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last profile modification.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for deactivated accounts.","nullable":true}],"uniqueIndexes":[{"fieldNames":["email"],"unique":true},{"fieldNames":["nickname"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]}],"ginIndexes":[]},{"name":"community_platform_moderators","description":"Junction table linking members to communities where they serve as moderators. Moderators can approve content, remove inappropriate posts, manage user behavior, and enforce community rules in their assigned communities.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"community_platform_member_id","type":"uuid","description":"Member assigned as moderator for this community.","relation":{"name":"member","targetModel":"community_platform_members"},"unique":false,"nullable":false},{"name":"community_platform_community_id","type":"uuid","description":"Community this member moderates.","relation":{"name":"community","targetModel":"community_platform_communities"},"unique":false,"nullable":false}],"plainFields":[{"name":"assigned_at","type":"datetime","description":"Timestamp when the moderator role was assigned.","nullable":false}],"uniqueIndexes":[{"fieldNames":["community_platform_member_id","community_platform_community_id"],"unique":true}],"plainIndexes":[{"fieldNames":["community_platform_community_id"]}],"ginIndexes":[]}]},{"filename":"schema-03-content.prisma","namespace":"Content","models":[{"name":"community_platform_posts","description":"Core content entities representing user-submitted posts including text posts, link posts, and image posts. Posts can be upvoted/downvoted, commented on, and are associated with specific communities. Posts require independent creation, editing, and management capabilities across the platform, supporting the primary content lifecycle.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"community_platform_community_id","type":"uuid","description":"Belonged community's {\"@link community_platform_communities.id\"}.","relation":{"name":"community","targetModel":"community_platform_communities"},"unique":false,"nullable":false},{"name":"community_platform_member_id","type":"uuid","description":"Author's {\"@link community_platform_members.id\"}.","relation":{"name":"author","targetModel":"community_platform_members"},"unique":false,"nullable":false}],"plainFields":[{"name":"title","type":"string","description":"Post title visible in listings and searches.","nullable":false},{"name":"content_type","type":"string","description":"Type of post content: 'text', 'link', or 'image'.","nullable":false},{"name":"text_content","type":"string","description":"Text content for text posts.","nullable":true},{"name":"url","type":"uri","description":"URL for link posts.","nullable":true},{"name":"image_url","type":"uri","description":"Image URL for image posts.","nullable":true},{"name":"created_at","type":"datetime","description":"Post creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modification timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp when post is removed.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["community_platform_community_id","created_at"]},{"fieldNames":["created_at"]},{"fieldNames":["community_platform_member_id"]}],"ginIndexes":[{"fieldName":"title"}]},{"name":"community_platform_comments","description":"Threaded comment system supporting unlimited nesting for discussions on posts. Comments can be replied to independently, represent user engagement, and require separate management from parent posts. Each comment can be voted on and moderated independently, enabling cross-post search and user activity tracking.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"community_platform_post_id","type":"uuid","description":"Referenced post's {\"@link community_platform_posts.id\"}.","relation":{"name":"post","targetModel":"community_platform_posts"},"unique":false,"nullable":false},{"name":"community_platform_member_id","type":"uuid","description":"Comment author's {\"@link community_platform_members.id\"}.","relation":{"name":"author","targetModel":"community_platform_members"},"unique":false,"nullable":false},{"name":"parent_comment_id","type":"uuid","description":"Parent comment's {\"@link community_platform_comments.id\"} for nested structure.","relation":{"name":"parent","targetModel":"community_platform_comments","mappingName":"recursive"},"unique":false,"nullable":true}],"plainFields":[{"name":"content","type":"string","description":"Comment text content.","nullable":false},{"name":"depth","type":"int","description":"Nesting level in comment thread.","nullable":false},{"name":"created_at","type":"datetime","description":"Comment creation timestamp.","nullable":false},{"name":"updated_at","type":"datetime","description":"Last modification timestamp.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft deletion timestamp when comment is removed.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["community_platform_post_id","created_at"]},{"fieldNames":["community_platform_member_id","created_at"]},{"fieldNames":["created_at"]},{"fieldNames":["parent_comment_id"]}],"ginIndexes":[{"fieldName":"content"}]}]},{"filename":"schema-04-engagement.prisma","namespace":"Engagement","models":[{"name":"community_platform_votes","description":"Tracks user votes on posts and comments within the engagement system. Each vote represents member engagement with community content, affecting karma calculations and content visibility. Relationships exist with members (voters), posts, and comments (voted content). Votes are immutable once cast but require efficient querying for real-time karma updates and content sorting algorithms. Modified to include proper stance classification and check constraint for mutual exclusivity.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Voted member's {@link community_platform_members.id} who cast the vote.","relation":{"name":"member","targetModel":"community_platform_members"},"unique":false,"nullable":false},{"name":"post_id","type":"uuid","description":"Related post's {@link community_platform_posts.id} that received the vote (if applicable).","relation":{"name":"post","targetModel":"community_platform_posts"},"unique":false,"nullable":true},{"name":"comment_id","type":"uuid","description":"Related comment's {@link community_platform_comments.id} that received the vote (if applicable).","relation":{"name":"comment","targetModel":"community_platform_comments"},"unique":false,"nullable":true}],"plainFields":[{"name":"vote_type","type":"string","description":"Type of vote cast - 'up' for positive or 'down' for negative engagement.","nullable":false},{"name":"created_at","type":"datetime","description":"Timestamp when the vote was cast, used for audit trails and analytical purposes.","nullable":false}],"uniqueIndexes":[{"fieldNames":["member_id","post_id"],"unique":true},{"fieldNames":["member_id","comment_id"],"unique":true}],"plainIndexes":[{"fieldNames":["created_at"]},{"fieldNames":["post_id"]},{"fieldNames":["comment_id"]},{"fieldNames":["member_id","created_at"]}],"ginIndexes":[]},{"name":"community_platform_subscriptions","description":"Manages member subscriptions to communities for personalized content delivery. Each subscription represents active interest in specific community content, enabling personalized feeds and notification systems. Relationships exist with members (subscribers) and communities (subscribed content). Subscriptions can be toggled on/off with proper timestamp tracking.","material":false,"stance":"subsidiary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"member_id","type":"uuid","description":"Subscribing member's {@link community_platform_members.id}.","relation":{"name":"member","targetModel":"community_platform_members"},"unique":false,"nullable":false},{"name":"community_id","type":"uuid","description":"Subscribed community's {@link community_platform_communities.id}.","relation":{"name":"community","targetModel":"community_platform_communities"},"unique":false,"nullable":false}],"plainFields":[{"name":"subscribed_at","type":"datetime","description":"Timestamp when the subscription was established.","nullable":false},{"name":"unsubscribed_at","type":"datetime","description":"Timestamp when the subscription was terminated (null if still active).","nullable":true}],"uniqueIndexes":[{"fieldNames":["member_id","community_id"],"unique":true}],"plainIndexes":[{"fieldNames":["subscribed_at"]},{"fieldNames":["community_id"]},{"fieldNames":["member_id","unsubscribed_at"]}],"ginIndexes":[]}]},{"filename":"schema-05-moderation.prisma","namespace":"Moderation","models":[{"name":"community_platform_reports","description":"User-submitted reports of content violations requiring moderator attention. Captures reporter identification, targeted content references, violation categories, and moderation resolution workflow. Enables platform governance through transparent reporting system that maintains community standards.","material":false,"stance":"primary","primaryField":{"name":"id","type":"uuid","description":"Primary Key."},"foreignFields":[{"name":"reporter_id","type":"uuid","description":"Reporter's {@link community_platform_members.id}.","relation":{"name":"reporter","targetModel":"community_platform_members"},"unique":false,"nullable":false},{"name":"assigned_moderator_id","type":"uuid","description":"Assigned moderator's {@link community_platform_moderators.id} for handling the report.","relation":{"name":"assignedModerator","targetModel":"community_platform_moderators"},"unique":false,"nullable":true},{"name":"reported_post_id","type":"uuid","description":"Reported post's {@link community_platform_posts.id} if report is about a post.","relation":{"name":"reportedPost","targetModel":"community_platform_posts"},"unique":false,"nullable":true},{"name":"reported_comment_id","type":"uuid","description":"Reported comment's {@link community_platform_comments.id} if report is about a comment.","relation":{"name":"reportedComment","targetModel":"community_platform_comments"},"unique":false,"nullable":true}],"plainFields":[{"name":"report_type","type":"string","description":"Type of report violation (spam, harassment, hate_speech, adult_content, misinformation, copyright, other).","nullable":false},{"name":"description","type":"string","description":"Additional details provided by reporter explaining the violation concern.","nullable":false},{"name":"status","type":"string","description":"Current processing status of the report (pending, under_review, resolved, dismissed).","nullable":false},{"name":"moderation_notes","type":"string","description":"Internal notes added by moderators during review and resolution process.","nullable":true},{"name":"created_at","type":"datetime","description":"Timestamp when the report was first submitted for moderation review.","nullable":false},{"name":"updated_at","type":"datetime","description":"Timestamp of last modification to the report record.","nullable":false},{"name":"deleted_at","type":"datetime","description":"Soft delete timestamp for report archival without permanent removal.","nullable":true}],"uniqueIndexes":[],"plainIndexes":[{"fieldNames":["status"]},{"fieldNames":["report_type"]},{"fieldNames":["created_at"]},{"fieldNames":["reporter_id","status"]},{"fieldNames":["assigned_moderator_id","updated_at"]}],"ginIndexes":[{"fieldName":"description"}]}]}]}